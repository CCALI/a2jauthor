/*
	CALI Author 5 / A2J Author 5 (CAJA) 正义 * công lý * правосудие
	All Contents Copyright The Center for Computer-Assisted Legal Instruction
*/
var AJAXLoader="<span class='loader'>&nbsp;</span>'";function urlSplit(a){var b={path:"",file:"",params:"",hash:""},c;a=a.replace("\\","/","gi");c=a.lastIndexOf("#");0<=c&&(b.hash=a.substr(c+1),a=a.substr(0,c));c=a.lastIndexOf("?");0<=c&&(b.params=a.substr(c+1),a=a.substr(0,c));c=a.lastIndexOf("/");0<=c&&(b.file=a.substr(c+1),a=a.substr(0,c+1));b.path=a;return b}function propCount(a){var b=0,c;for(c in a)b++;return b}
function traceTag(a,b){"val"===a&&""===b&&(b="<i>blank</i>");return"<span class="+a+">"+b+"</span>"}function trace(a){var b;for(b=0;b<arguments.length;b++){var c=arguments[b];"undefined"!==typeof console&&console.log(c)}}function cloneObject(a){var b={},c;for(c in a)b[c]="object"===typeof a[c]?cloneObject(a[c]):a[c];return b}$.fn.showit=function(a){return $(this).removeClass("hidden").addClass(a?"":"hidden")};String.prototype.asHTML=function(){return htmlEscape(this)};
function htmlEscape(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function makestr(a){return null===a||"undefined"===typeof a?"":a}function textToBool(a,b){return null===a||"undefined"===typeof a?b:1===a||"1"===a||"true"===String(a).toLowerCase()}function aie(a,b,c){null!==c&&(a[b]=c)}String.prototype.printf=function(){var a=this,b,c;for(b=0;b<arguments.length;b++)c=RegExp("\\{"+(b+1)+"\\}","gi"),a=a.replace(c,arguments[b]);return a};
function pickHilite(a,b){return a.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+$.ui.autocomplete.escapeRegex(b)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<span class=hilite>$1</span>")}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}var JS2XML_SKIP={skip:!0};
function js2xml(a,b){function c(a,b,c){return""===c?""===b?"":"<"+a.toUpperCase()+b+"/>":"<"+a.toUpperCase()+b+">"+c+"</"+a.toUpperCase()+">"}if("object"===typeof b){var d="",e="",f;for(f in b)0<=parseInt(f,10)?e+=js2xml("",b[f]):"_"===f.substr(0,1)?""!==b[f]&&b[f]!==JS2XML_SKIP&&(d+=" "+f.substr(1)+'="'+htmlEscape(b[f])+'"'):e="XML_"===f.substr(0,4)?e+c(f.substr(4),"",b[f]):e+js2xml(f,b[f]);""!==a&&(e=c(a,d,e))}else e=c(a,"",htmlEscape(b));return e.replace(/&nbsp;/g,"&#160;")}
function props(a){var b="",c;for(c in a)"object"===typeof a[c]?b+=c+"={"+props(a[c])+"}, ":"function"!==typeof a[c]&&(b+=c+"="+a[c]+", ");return b}function propsJSON(a,b){return propsJSON_(a,0,b)}
function propsJSON_(a,b,c){var d="",d='<div class="json indent">';if("object"===typeof c)if(d+=a+":",null===c)d+="null\n";else{a="";for(var e in c)parseInt(e,10),a+=propsJSON_(e,b+1,c[e]);d=""===a?d+"{}\n":d+("{\n"+a+"}\n")}else"function"===typeof c?d="":"string"===typeof c?(b=htmlEscape(c),d=1024>b.length?d+(a+':"'+b+'"\n'):d+(a+':"'+b.substr(0,1024)+'"...\n')):d+=a+":"+c+"\n";return d+"</div>"}
function sortingNaturalCompare(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,f,g;f=(g=a.charAt(c++)).charCodeAt(0);)f=46==f||48<=f&&57>=f,f!==e&&(b[++d]="",e=f),b[d]+=g;return b}var d=c(a),e=c(b),f;for(f=0;d[f]&&e[f];f++)if(d[f]!==e[f]){var g=Number(d[f]),h=Number(e[f]);return g==d[f]&&h==e[f]?g-h:d[f]>e[f]?1:-1}return d.length-e.length}
var decodeEntities=function(){var a=document.createElement("div");return function(b){b&&"string"===typeof b&&(b=b.replace(/<script[^>]*>([\S\s]*?)<\/script>/gmi,""),b=b.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gmi,""),a.innerHTML=b,b=a.textContent,a.textContent="");return b}}();function fixPath(a){return 0===a.indexOf("http")?a:guidePath+urlSplit(a).file}function loadGuideFile2(a,b){$.ajax({url:a,dataType:"xml",timeout:45E3,error:function(a,b){dialogAlert("Error occurred loading the XML from "+this.url+"\n"+b)},success:function(c){c=$(c);gGuide=parseXML_Auto_to_CAJA(c);gGuide.filename=a;guideStart(b)}})}
function loadGuideFile(a,b){var c=urlSplit(a);a=c.path+c.file;guidePath=c.path;""!==c.hash&&(b="PAGE "+c.hash);loadNewGuidePrep(a,b);window.setTimeout(function(){loadGuideFile2(a,b)},500)}function ws(a,b){$.ajax({url:"CAJA_WS.php",dataType:"json",type:"POST",data:a,success:function(a){b(a)},error:function(a,b){dialogAlert({title:"Error",message:b.responseText})}})}
function guideSave(){null!==gGuide&&0!==gGuideID&&(setProgress("Saving "+gGuide.title+AJAXLoader),ws({cmd:"guidesave",gid:gGuideID,guide:exportXML_CAJA_from_CAJA(gGuide),title:gGuide.title},function(a){setProgress(null!==a.error?a.error:a.info)}))};var lang={Male:"",Female:"",GoBack:"",GoNext:"",MyProgress:"",SaveAndExit:"",ResumeExit:"",qIDNOWHERE:"",qIDSUCCESS:"",qIDFAIL:"",qIDEXIT:"",qIDBACK:"",qIDRESUME:"",UnknownID:"",scriptErrorMissingPage:"",scriptErrorUnhandled:"",scriptErrorEndMissing:""};
function TLanguages(){this.defaultLanguage="en";this.regional=[];this.set=function(a){"undefined"===typeof this.regional[a]&&(a="en");trace("Set language to "+a);a=this.regional[a];lang={};for(var b in a)lang[b]=String(a[b]);a=this.regional.en;for(b in a)""===makestr(lang[b])&&(lang[b]=String(a[b]))};this.en=function(a){return a};return this}var Languages=new TLanguages;
Languages.regional.en={locale:"en",Language:"English",AskYesNo_Yes:"Yes",AskYesNo_No:"No",Close:"Close",Comment:"Comment",GoBack:"BACK",GoNext:"NEXT",LearnMore:"Learn More",MyProgress:"MY PROGRESS",ProvideFeedbackOrComment:"Provide feedback or comment on this page",SaveAndExit:"EXIT",ResumeExit:"RESUME",SendFeedback:"SEND FEEDBACK",SoundIsOff:"SOUND IS OFF",SoundIsOn:"SOUND IS ON",SoundPlay:"Play",SoundStop:"Stop",WhatDoYouMean:"What do you mean?",Continue:"Continue",Exit:"Exit",Male:"Male",Female:"Female",
ChooseListNumber:"Choose:",ChooseListText:"Choose from this list:",CheckBoxNOTALabel:"None of the above",ZoomNormal:"Normal Size",ZoomFull:"Full screen",TextEnlarge:"Enlarge text box",TextShrink:"Shrink text box",TextSizeLetter:"A",UploadAnswers:"Exiting. Please wait...",CalcClear:"Clear",CalcEnter:"Enter",MonthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",MonthNamesLong:"January,February,March,April,May,June,July,August,September,October,November,December",FieldPrompts_ResponseRequired:"You must provide a response in the blanks next to the red labels before you can continue.",
FieldPrompts_SelectionRequired:"You must make a selection before you can continue.",FieldPrompts_text:"You must type a response in the highlighted space before you can continue.",FieldPrompts_textlong:"You must type a response in the highlighted space before you can continue.",FieldPrompts_textpick:"You must make a selection from the highlighted space before you can continue.",FieldPrompts_number:"You must type a number in the highlighted space before you can continue.",FieldPrompts_numberdollar:"You must type a dollar amount in the highlighted space before you can continue.",
FieldPrompts_numberssn:"You must type a social security number in the highlighted spaces before you can continue.",FieldPrompts_numberphone:"You must type a phone number in the highlighted spaces before you can continue.",FieldPrompts_numberzip:"You must type a zip code in the highlighted space before you can continue.",FieldPrompts_numberpick:"You must select a number from the highlighted space before you can continue.",FieldPrompts_datemdy:"You must enter a month, day and year in the highlighted spaces before you can continue.",
FieldPrompts_gender:"You must choose either male or female from the highlighted selection before you can continue.",FieldPrompts_radio:"You must choose a response from the highlighted selection before you can continue.",FieldPrompts_checkbox:"You must select one or more checkboxes to continue.",FieldPrompts_checkboxNOTA:'Please select one or more checkboxes or "None of the above" to continue.',Ordinals_1:"first",Ordinals_2:"second",Ordinals_3:"third",Ordinals_4:"fourth",Ordinals_5:"fifth",Ordinals_6:"sixth",
Ordinals_7:"seventh",Ordinals_8:"eighth",Ordinals_9:"ninth",Ordinals_10:"tenth",Ordinals_11:"eleventh",Ordinals_12:"twelfth",Ordinals_13:"13th",tabAbout:"About",tabInterview:"Interview",tabVariables:"Variables",tabConstants:"Constants",tabSteps:"Steps",qIDNOWHERE:"[no where]",qIDSUCCESS:"[Success - Process Form]",qIDFAIL:"[Exit - User does not qualify]",qIDEXIT:"[Exit - Save Incomplete Form]",qIDBACK:"[Back to prior question]",qIDRESUME:"[Exit - Resume interview]",UnknownID:"[Unknown id [{1}]: [{2}",
scriptErrorMissingPage:'Page "{1}" does not exist.',scriptErrorUnhandled:"Unknown command: {1}",scriptErrorEndMissing:"Missing an EndIf",app:""};
Languages.regional.es={locale:"es",Language:"Español",AskYesNo_Yes:"Si",AskYesNo_No:"No",Close:"Cerrar",Comment:"Comentario",GoBack:"Anterior",GoNext:"Siguiente",LearnMore:"Aprender más",MyProgress:"Mi Progreso",ProvideFeedbackOrComment:"Enviar comentarios y sugerencias",SaveAndExit:"Salida",ResumeExit:"Anterior",SendFeedback:"Enviar comentarios",SoundIsOff:"Sonido está apagado",SoundIsOn:"Sonido está encendido",SoundPlay:"Prender",SoundStop:"Parar",WhatDoYouMean:"¿Qué significas?",Continue:"continúe",
Exit:"Salida",Male:"Masculino",Female:"Femenina",ChooseListNumber:"Escoja:",ChooseListText:"Escoja de esta lista:",CheckBoxNOTALabel:"ninguna de arriba",ZoomNormal:"tamaño normal",ZoomFull:"pantalla completa",TextEnlarge:"ampliar el cuadro de texto",TextShrink:"reducir el cuadro de texto",TextSizeLetter:"A",UploadAnswers:"Saliendo. Por favor, espere...",CalcClear:"Clear!",CalcEnter:"Enter!",MonthNamesShort:"ene,feb,mar,abr,may,jun,jul,ago,sep,oct,nov,dic",MonthNamesLong:"enero,febrero,marzo,abril,mayo,junio,julio,agosto,septiembre,octubre,noviembre,diciembre",
FieldPrompts_ResponseRequired:"You must provide a response in the blanks next to the red labels before you can continue.",FieldPrompts_SelectionRequired:"You must make a selection before you can continue.",FieldPrompts_text:"You must type a response in the highlighted space before you can continue.",FieldPrompts_textlong:"You must type a response in the highlighted space before you can continue.",FieldPrompts_textpick:"You must make a selection from the highlighted space before you can continue.",
FieldPrompts_number:"You must type a number in the highlighted space before you can continue.",FieldPrompts_numberdollar:"You must type a dollar amount in the highlighted space before you can continue.",FieldPrompts_numberssn:"You must type a social security number in the highlighted spaces before you can continue.",FieldPrompts_numberphone:"You must type a phone number in the highlighted spaces before you can continue.",FieldPrompts_numberzip:"You must type a zip code in the highlighted space before you can continue.",
FieldPrompts_numberpick:"You must select a number from the highlighted space before you can continue.",FieldPrompts_datemdy:"You must enter a month, day and year in the highlighted spaces before you can continue.",FieldPrompts_gender:"You must choose either male or female from the highlighted selection before you can continue.",FieldPrompts_radio:"You must choose a response from the highlighted selection before you can continue.",FieldPrompts_checkbox:"Please select one or more checkboxes to continue.",
FieldPrompts_checkboxNOTA:'Please select one or more checkboxes or "None of the above" to continue.',Ordinals1:"primero",Ordinals2:"segundo",Ordinals3:"tercero",Ordinals4:"cuarto",Ordinals5:"quinto",Ordinals6:"sexto",Ordinals7:"séptimo",Ordinals8:"octavo",Ordinals9:"noveno",Ordinals10:"décimo",Ordinals11:"undécimo",Ordinals12:"duodécimo",Ordinals13:"decimotecero",Ordinals14:"decimocuarto",Ordinals15:"decimoquinto",Ordinals16:"decimosexto",Ordinals17:"decimoséptimo",Ordinals18:"decimoctavo",Ordinals19:"decimonoveno:",
Ordinals20:"vigésimo",Ordinals21:"vigésimoprimero",Ordinals22:"vigésimosegundo",Ordinals23:"vigésimotercero",Ordinals24:"vigésimocuarto",Ordinals25:"vigésimoquinto",Ordinals26:"vigésimosexto",Ordinals27:"vigésimoséptimo",Ordinals28:"vigésimooctavo",Ordinals29:"vigésimonoveno",Ordinals30:"trigésimo",Ordinals31:"trigésimoprimero",Ordinals32:"trigésimosegundo",Ordinals33:"trigésimotercero",Ordinals34:"trigésimocuarto",Ordinals35:"trigésimoquinto",Ordinals36:"trigésimosexto",Ordinals37:"trigésimoséptimo",
Ordinals38:"trigésimooctavo",Ordinals39:"trigésimonoveno",Ordinals40:"cuadragésimo",Ordinals41:"cuadragésimoprimero",Ordinals42:"cuadragésimosegundo",Ordinals43:"cuadragésimotercero",Ordinals44:"cuadragésimocuarto",Ordinals45:"cuadragésimoquinto",Ordinals46:"cuadragésimosexto",Ordinals47:"cuadragésimoséptimo",Ordinals48:"cuadragésimooctavo",Ordinals49:"cuadragésimonoveno",Ordinals50:"quincuagésimo"};
Languages.regional.vi={locale:"vi",Language:"Tiếng Anh",AskYesNo_Yes:"Có",AskYesNo_No:"Không",Close:"Đóng",Comment:"Ý kiến/lời chú thích",GoBack:"TRỞ LẠI",GoNext:"TIẾP TỤC",LearnMore:"Tìm hiểu thêm",MyProgress:"TIẾN ĐỘ",ProvideFeedbackOrComment:"Trả lời của tôi hoặc là ý kiến trong trang này",SaveAndExit:"RỜI KHỎI TRANG",ResumeExit:"TRỞ LẠI TRANG ĐIỀN LẦN CUỐI CÙNG",SendFeedback:"GỬI CÂU TRẢ LỜI",SoundIsOff:"TẮT ÂM THANH",SoundIsOn:"MỞ ÂM THANH",SoundPlay:"Bắt đầu",SoundStop:"Ngưng",WhatDoYouMean:"Quý vị có ý gì?",
Continue:"Tiếp tục",Exit:"Rời khỏi trang",Male:"Nam",Female:"Nữ",ChooseListNumber:"Chọn",ChooseListText:"Chọn từ danh sách",CheckBoxNOTALabel:"Không có câu nào được áp dụng",ZoomNormal:"Chữ cỡ bình thưởng",ZoomFull:"Nguyên màn hình",TextEnlarge:"Làm chữ lớn hơn",TextShrink:"Làm chữ nhỏ hơn",TextSizeLetter:"A",UploadAnswers:"Rời khỏi trang. Xin đợi một chút",CalcClear:"Xóa",CalcEnter:"Vào trong",MonthNamesShort:"Tháng 1,Tháng 2,Tháng 3,Tháng 4,Tháng 5,Tháng 6,Tháng 7,Tháng 8,Tháng 9,Tháng 10,Tháng 11,Tháng 12",
MonthNamesLong:"Tháng 1,Tháng 2,Tháng 3,Tháng 4,Tháng 5,Tháng 6,Tháng 7,Tháng 8,Tháng 9,Tháng 10,Tháng 11,Tháng 12",FieldPrompts_ResponseRequired:"Quý vị phải điền một câu trả lời vào ô trống ngay bên cạnh nhãn hiệu màu đỏ trước khi quý vị có thể tiếp tục.",FieldPrompts_SelectionRequired:"Quý vị phải chọn một câu trả lời trước khi quý vị có thể tiếp tục.",FieldPrompts_text:"Quý vị phải trả lời bằng cách đánh máy vào chỗ được tô đậm trước khi quý vị có thể tiếp tục.",FieldPrompts_textlong:"Quý vị phải trả lời bằng cách đánh máy vào chỗ được tô đậm trước khi quý vị có thể tiếp tục.",
FieldPrompts_textpick:"Quý vị phải chọn một câu trả lời từ chỗ được tô đậm trước khi quý vị tiếp tục.",FieldPrompts_number:"Quý vị phải đánh một con số vào trong chỗ được tô đậm trước khi quý vị có thể tiếp tục.",FieldPrompts_numberdollar:"Quý vị phải đánh số tiền vào chỗ được tô đậm trước khi quý vị có thể được tiếp tục.",FieldPrompts_numberssn:"Quý vị phải đánh số an sinh xã hội vào chỗ được tô đậm trước khi quý vị có thể tiếp tục.",FieldPrompts_numberphone:"Quý vị phải đánh vào số điện thoại vào chỗ được tô đậm trước khi quý vị có thể tiếp tục. ",
FieldPrompts_numberzip:"Quý vị phải đánh vào số ZIP vào chỗ được tô đậm trước khi quý vị có thể tiếp tục. ",FieldPrompts_numberpick:"Quý vị phải chọn một số từ chỗ được tô đậm trước khi quý vị có thể tiếp tục. ",FieldPrompts_datemdy:"Xin điền tháng, ngày, và năm vào chỗ được tô đậm trước khi quý vị có thể tiếp tục. ",FieldPrompts_gender:"Quý vị phải chọn nam hay nữ từ chỗ được tô đậm trước khi quý vị có thể tiếp tục. ",FieldPrompts_radio:"Quý vị phải chọn một câu trả lời từ chỗ được tô đậm trước khi quý vị tiếp tục.",
FieldPrompts_checkbox:"Quý vị phải đánh dấu vào một ô trống hoặc nhiều hơn để tiếp tục. ",FieldPrompts_checkboxNOTA:'Xin đánh dấu vào một ô trống hoặc nhiều hơn hoặc chọn "Không có câu nào áp dụng" để tiếp tục. ',Ordinals1:"Một",Ordinals2:"Hai",Ordinals3:"Ba",Ordinals4:"Bốn",Ordinals5:"Năm ",Ordinals6:"Sáu",Ordinals7:"Bảy ",Ordinals8:"Tám",Ordinals9:"Chín",Ordinals10:"Mười",Ordinals11:"Mười một",Ordinals12:"Mười hai",Ordinals13:"Mười ba"};
Languages.regional["zh-cn"]={locale:"zh-cn",Language:"英语",AskYesNo_Yes:"是",AskYesNo_No:"否",Close:"关闭",Comment:"评论",GoBack:"返回/上一页",GoNext:"前进/下一页",LearnMore:"了解更多",MyProgress:"我的进度",ProvideFeedbackOrComment:"在本页作出回应或评论",SaveAndExit:"退出",ResumeExit:"恢复",SendFeedback:"送出回应",SoundIsOff:"关闭音效",SoundIsOn:"打开音效",SoundPlay:"播放",SoundStop:"停止",WhatDoYouMean:"你的意思是？",Continue:"继续",Exit:"退出",Male:"男性",Female:"女性",ChooseListNumber:"选择：",ChooseListText:"从以下选项选择",CheckBoxNOTALabel:"以上皆非",ZoomNormal:"正常尺寸",ZoomFull:"全荧幕",
TextEnlarge:"放大文字框",TextShrink:"缩小文字框",TextSizeLetter:"大",UploadAnswers:"退出中，请稍候…",CalcClear:"清除",CalcEnter:"输入",MonthNamesShort:"一月, 二月, 三月, 四月, 五月, 六月, 七月, 八月, 九月, 十月, 十一月, 十二月,",MonthNamesLong:"一月, 二月, 三月, 四月, 五月, 六月, 七月, 八月, 九月, 十月, 十一月, 十二月",FieldPrompts_ResponseRequired:"你必须先在红色标签旁的空位上作出回应才能继续下去",FieldPrompts_SelectionRequired:"你必须作出一项选择才能继续下去",FieldPrompts_text:"你必须先在黃色标记的栏位上作出回应才能继续下去",FieldPrompts_textlong:"你必须先在黃色标记的栏位上作出回应才能继续下去",FieldPrompts_textpick:"你必须先在黃色标记的栏位上作出一项选择才能继续下去",FieldPrompts_number:"你必须先在黃色标记的栏位上输入一个号码才能继续下去",
FieldPrompts_numberdollar:"你必须先在黃色标记的栏位上输入一个价钱才能继续下去",FieldPrompts_numberssn:"你必须先在黃色标记的栏位上输入社会安全号码才能继续下去",FieldPrompts_numberphone:"你必须先在黃色标记的栏位上输入一个电话号码才能继续下去",FieldPrompts_numberzip:"你必须先在黃色标记的栏位上输入一个邮区号码才能继续下去",FieldPrompts_numberpick:"你必须先在黃色标记的栏位上选择一个号码才能继续下去",FieldPrompts_datemdy:"你必须先在黃色标记的栏位上输入月、日及年份才能继续下去",FieldPrompts_gender:"你必须先在黃色标记的栏位上选择男或女才能继续下去",FieldPrompts_radio:"你必须先在黃色标记的栏位上选择一项回应才能继续下去",FieldPrompts_checkbox:"你必须先在复选框里选择一项或以上才能继续下去",FieldPrompts_checkboxNOTA:"请在复选框选择一项或以上，或选择“以上皆非”以继续下去",
Ordinals1:"第一",Ordinals2:"第二",Ordinals3:"第三",Ordinals4:"第四",Ordinals5:"第五",Ordinals6:"第六",Ordinals7:"第七",Ordinals8:"第八",Ordinals9:"第九",Ordinals10:"第十",Ordinals11:"第十一",Ordinals12:"第十二",Ordinals13:"第十三"};
$.datepicker&&(jQuery(function(a){a.datepicker.regional.es={closeText:"Cerrar",prevText:"&#x3c;Ant",nextText:"Sig&#x3e;",currentText:"Hoy",monthNames:"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),monthNamesShort:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),dayNames:"Domingo Lunes Martes Mi&eacute;rcoles Jueves Viernes S&aacute;bado".split(" "),dayNamesShort:"Dom Lun Mar Mi&eacute; Juv Vie S&aacute;b".split(" "),dayNamesMin:"Do Lu Ma Mi Ju Vi S&aacute;".split(" "),
weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.datepicker.setDefaults(a.datepicker.regional.es)}),jQuery(function(a){a.datepicker.regional.vi={closeText:"Đóng",prevText:"&#x3c;Trước",nextText:"Tiếp&#x3e;",currentText:"Hôm nay",monthNames:"Tháng Một;Tháng Hai;Tháng Ba;Tháng Tư;Tháng Năm;Tháng Sáu;Tháng Bảy;Tháng Tám;Tháng Chín;Tháng Mười;Tháng Mười Một;Tháng Mười Hai".split(";"),monthNamesShort:"Tháng 1;Tháng 2;Tháng 3;Tháng 4;Tháng 5;Tháng 6;Tháng 7;Tháng 8;Tháng 9;Tháng 10;Tháng 11;Tháng 12".split(";"),
dayNames:"Chủ Nhật;Thứ Hai;Thứ Ba;Thứ Tư;Thứ Năm;Thứ Sáu;Thứ Bảy".split(";"),dayNamesShort:"CN T2 T3 T4 T5 T6 T7".split(" "),dayNamesMin:"CN T2 T3 T4 T5 T6 T7".split(" "),weekHeader:"Tu",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.datepicker.setDefaults(a.datepicker.regional.vi)}),jQuery(function(a){a.datepicker.regional["zh-CN"]={closeText:"关闭",prevText:"&#x3c;上月",nextText:"下月&#x3e;",currentText:"今天",monthNames:"一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),
monthNamesShort:"一 二 三 四 五 六 七 八 九 十 十一 十二".split(" "),dayNames:"星期日 星期一 星期二 星期三 星期四 星期五 星期六".split(" "),dayNamesShort:"周日 周一 周二 周三 周四 周五 周六".split(" "),dayNamesMin:"日一二三四五六".split(""),weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"};a.datepicker.setDefaults(a.datepicker.regional["zh-CN"])}));var CONST={A2JVersionNum:"5.0.1.1",A2JVersionDate:"2013-09-18",CAVersionNum:"5.0.0",CAVersionDate:"2013-04-15",ptPopup:"Popup",ftButton:"button",ftText:"text",ftTextLong:"textlong",ftTextPick:"textpick",ftNumber:"number",ftNumberDollar:"numberdollar",ftNumberSSN:"numberssn",ftNumberPhone:"numberphone",ftNumberZIP:"numberzip",ftNumberPick:"numberpick",ftDateMDY:"datemdy",ftGender:"gender",ftRace:"race",ftRadioButton:"radio",ftCheckBox:"checkbox",ftCheckBoxNOTA:"checkboxNOTA",ftCheckBoxMultiple:"checkboxmultiple",
vtUnknown:0,vtText:1,vtTF:2,vtNumber:3,vtDate:4,vtMC:5,vtOther:6,MAXFIELDS:9,MAXBUTTONS:3,MAXSTEPS:12,kMinYear:1900,ordDefault:"",ordAscending:"ASC",ordDescending:"DESC",qIDNOWHERE:"",qIDSUCCESS:"SUCCESS",qIDFAIL:"FAIL",qIDEXIT:"EXIT",qIDBACK:"BACK",qIDRESUME:"RESUME",ScriptLineBreak:"<BR/>"},gGuide,gPage,gGuideID,gUserID=0,gUserNickName="User",runid=0,resumeScoreURL=null,guidePath;function TText(){this.text="";return this}
function TButton(){this.value=this.name=this.next=this.label="";return this}function TField(){this.value=this.name=this.label=this.type="";this.required=!1;this.max=this.min=this.order=this.invalidPromptAudio=this.invalidPrompt="";this.calculator=this.calendar=!1;this.listData=this.listSrc=this.maxChars="";return this}function TScript(){this.code=this.event="";return this}function TStep(){this.text=this.number="";return this}function TConstant(){this.text=this.name="";return this}
function TPage(){this.codeAfter=this.codeBefore=this.repeatVar=this.helpVideoURL=this.helpImageURL=this.helpReader=this.helpAudioURL=this.help=this.learn=this.notes=this.textAudioURL=this.text=this.name="";this.fields=[];this.buttons=[];this.step=0;this.style=this.type="";this.mapy=this.mapx=0;this.xml=this.mapBranches=null;return this}function TAuthor(){this.email=this.organization=this.title=this.name="";return this}
function TGuide(){this.tool="CAJA";this.toolversion="2012-12-12";this.avatar="";this.guideGender="Female";this.notes=this.modifydate=this.language=this.jurisdiction=this.description=this.credits=this.createdate=this.copyrights=this.completionTime="";this.sendfeedback=!1;this.mobileFriendly=this.endImage=this.logoImage=this.viewer=this.version=this.title=this.subjectarea=this.emailContact="";this.authors=[];this.exitPage=this.firstPage="";this.steps=[];this.pages={};this.constants={};this.assets=[];
this.templates="";this.vars={};this.filename="";this.sortedPages=[];return this}var vtStrings="Unknown Text TF Number Date MC Other".split(" "),vtStringsAnswerFile="Unknown TextValue TFValue NumValue DateValue MCValue OtherValue".split(" "),vtStringsGrid="Unknown;Text;True/False;Number;Date;Multiple Choice;Other".split(";");function TVariable(){this.comment=this.type=this.name="";this.repeating=!1;this.values=[];return this}
TGuide.prototype.sortPages=function(){this.sortedPages=[];for(var a in this.pages)this.sortedPages.push(this.pages[a]);this.sortedPages=this.sortedPages.sort(function(a,c){return sortingNaturalCompare(a.name,c.name)})};
TGuide.prototype.pageDisplayName=function(a){var b="";this.pages[a]?b=this.pages[a].name:(b={},b[CONST.qIDNOWHERE]=lang.qIDNOWHERE,b[CONST.qIDSUCCESS]=lang.qIDSUCCESS,b[CONST.qIDFAIL]=lang.qIDFAIL,b[CONST.qIDEXIT]=lang.qIDEXIT,b[CONST.qIDBACK]=lang.qIDBACK,b[CONST.qIDRESUME]=lang.qIDRESUME,b="undefined"===typeof b[a]?lang.UnknownID.printf(a,a):a+"\t"+b[a]);return b};
TGuide.prototype.addUniquePage=function(a,b){for(var c=1,d=a;"undefined"!==typeof this.pages[d];)c++,d=a+" "+c;c=b?b:new TPage;c.name=d;return this.pages[c.name]=c};
TGuide.prototype.varGet=function(a,b){a=jQuery.trim(a);var c=a.toLowerCase(),c=this.vars[c];if("undefined"===typeof b||null===b||""===b)b=0;if("undefined"===typeof c)return gLogic.trace("Undefined variable: "+traceTag("var",a)+(0===b?"":traceTag("varidx",b))),c;var d=c.values[b];switch(c.type){case CONST.vtNumber:d=parseFloat(d);break;case CONST.vtTF:d=0<d||!0===d||"true"===d}return d};
TGuide.prototype.varSet=function(a,b,c){a=jQuery.trim(a);var d=a.toLowerCase(),e=this.vars[d];"undefined"===typeof e&&(e=new TVariable,e.name=a,e.repeating=!("undefined"===typeof b||null===b||""===b),this.vars[d]=e,gLogic.trace("Creating variable "+traceTag("var",a)));if("undefined"===typeof b||null===b||""===b)b=0;gLogic.indent++;0===b?(gLogic.trace(traceTag("var",a)+"="+traceTag("val",c)),e.values[0]=c):(gLogic.trace(traceTag("var",a+"#"+b)+traceTag("val",c)),e.values[b]=c);gLogic.indent--};var SHOWXML=!1;
function page2JSON(a){var b={_NAME:a.name,_TYPE:a.type,_STYLE:a.style,_MAPX:a.mapx,_MAPY:a.mapy,_STEP:a.step,_REPEATVAR:a.repeatVar,_NEXTPAGE:""===a.nextPage?JS2XML_SKIP:a.nextPage,_nextPageDisabled:!0===a.nextPageDisabled?!0:JS2XML_SKIP,_alignText:""===a.alignText?JS2XML_SKIP:a.alignText,XML_TEXT:a.text,TEXTAUDIO:a.textAudioURL,XML_LEARN:a.learn,XML_HELP:a.help,HELPAUDIO:a.helpAudioURL,XML_HELPREADER:a.helpReader,HELPIMAGE:a.helpImageURL,HELPVIDEO:a.helpVideoURL,BUTTONS:[],FIELDS:[],XML_CODEBEFORE:a.codeBefore,
XML_CODEAFTER:a.codeAfter,XML_NOTES:a.notes},c;for(c in a.buttons){var d=a.buttons[c];b.BUTTONS.push({BUTTON:{XML_LABEL:d.label,_NEXT:d.next,NAME:d.name,VALUE:d.value}})}for(var e in a.fields)c=a.fields[e],b.FIELDS.push({FIELD:{_TYPE:c.type,_ORDER:c.order,_REQUIRED:c.required,_MIN:c.min,_MAX:c.max,_CALENDAR:!0===c.calendar?!0:JS2XML_SKIP,_CALCULATOR:!0===c.calculator?!0:JS2XML_SKIP,_MAXCHARS:c.maxChars,LISTSRC:c.listSrc,XML_LISTDATA:c.listData,XML_LABEL:c.label,NAME:c.name,VALUE:c.value,XML_INVALIDPROMPT:c.invalidPrompt}});
return b}
function exportXML_CAJA_from_CAJA(a){var b={INFO:{AUTHORS:[]},PAGES:[],STEPS:[],VARIABLES:[]};b.INFO.tool=a.tool;b.INFO.toolversion=a.toolversion;b.INFO.avatar=a.avatar;b.INFO.guideGender=a.guideGender;b.INFO.XML_completionTime=a.completionTime;b.INFO.XML_copyrights=a.copyrights;b.INFO.createdate=a.createdate;b.INFO.XML_credits=a.credits;b.INFO.XML_DESCRIPTION=a.description;b.INFO.emailContact=a.emailContact;b.INFO.jurisdiction=a.jurisdiction;b.INFO.language=a.language;b.INFO.modifydate=a.modifydate;
b.INFO.XML_notes=a.notes;b.INFO.sendfeedback=a.sendfeedback;b.INFO.subjectarea=a.subjectarea;b.INFO.title=a.title;b.INFO.version=a.version;b.INFO.viewer=a.viewer;b.INFO.endImage=a.endImage;b.INFO.logoImage=a.logoImage;b.INFO.mobileFriendly=a.mobileFriendly;for(var c in a.authors){var d=a.authors[c];b.INFO.AUTHORS.push({AUTHOR:{NAME:d.name,TITLE:d.title,ORGANIZATION:d.organization,EMAIL:d.email}})}b.INFO.firstPage=a.firstPage;b.INFO.exitPage=a.exitPage;for(var e in a.steps)c=a.steps[e],b.STEPS.push({STEP:{_NUMBER:c.number,
XML_TEXT:c.text}});for(var f in a.vars)e=a.vars[f],b.VARIABLES.push({VARIABLE:{_NAME:e.name,_TYPE:e.type,_REPEATING:!0===e.repeating?e.repeating:JS2XML_SKIP,_COMMENT:e.comment}});for(var g in a.pages)b.PAGES.push({PAGE:page2JSON(a.pages[g])});return'<?xml version="1.0" encoding="UTF-8" ?>'+js2xml("GUIDE",b)}
function parseXML_CAJA_to_CAJA(a){var b=new TGuide,c=$("INFO",a);b.tool=makestr(c.children("TOOL").text());b.toolversion=makestr(c.children("TOOLVERSION").text());b.avatar=makestr(c.children("AVATAR").text());b.guideGender=makestr(c.children("GUIDEGENDER").text());console.log("guide.guideGender",b.guideGender);b.completionTime=makestr(c.children("COMPLETIONTIME").xml());b.copyrights=makestr(c.children("COPYRIGHTS").xml());b.createdate=makestr(c.children("CREATEDATE").text());b.credits=makestr(c.children("CREDITS").xml());
b.description=makestr(c.children("DESCRIPTION").xml());b.jurisdiction=makestr(c.children("JURISDICTION").text());b.language=makestr(c.children("LANGUAGE").text());b.modifydate=makestr(c.children("MODIFYDATE").text());b.notes=makestr(c.children("NOTES").xml());b.sendfeedback=textToBool(c.children("SENDFEEDBACK").text(),!1);b.emailContact=makestr(c.children("EMAILCONTACT").text());b.subjectarea=makestr(c.children("SUBJECTAREA").text());b.title=c.children("TITLE").text();b.version=makestr(c.children("VERSION").text());
b.viewer=makestr(c.children("VIEWER").text());b.logoImage=makestr(c.children("LOGOIMAGE").text());b.endImage=makestr(c.children("ENDIMAGE").text());b.mobileFriendly=c.children("MOBILEFRIENDLY").text();b.authors=[];a.find("AUTHORS > AUTHOR").each(function(){var a=$(this),c=new TAuthor;c.name=a.find("NAME").text();c.title=a.find("TITLE").text();c.organization=a.find("ORGANIZATION").text();c.email=a.find("EMAIL").text();b.authors.push(c)});b.firstPage=makestr(a.find("FIRSTPAGE").text());b.exitPage=makestr(a.find("EXITPAGE").text());
a.find("STEP").each(function(){var a=$(this),c=new TStep;c.number=a.attr("NUMBER");c.text=a.find("TEXT").xml();b.steps.push(c)});a.find("VARIABLES > VARIABLE").each(function(){var a=$(this),c=new TVariable;c.name=a.attr("NAME");c.type=a.attr("TYPE");b.vars[c.name.toLowerCase()]=c});a.find("CONSTANTS").each(function(){var a=$(this),c=new TConstant;c.name=a.attr("NAME");c.text=a.find("VAL").xml();b.constants[c.name]=c});a.find("PAGES > PAGE").each(function(){var a=$(this),c=b.addUniquePage(a.attr("NAME"));
parseXML2Page(a,c)});return b}function page2XML(a){return'<?xml version="1.0" encoding="UTF-8" ?>'+js2xml("PAGE",page2JSON(a))}function pageFromXML(a){a=$(jQuery.parseXML(a));a=$("PAGE",a);var b=new TPage;parseXML2Page(a,b);return b}
function parseXML2Page(a,b){b.xml=a.xml();b.type=a.attr("TYPE");b.style=makestr(a.attr("STYLE"));b.type===CONST.ptPopup||"Pop-up page"===b.type?(b.type=CONST.ptPopup,b.mapx=null):(b.mapx=parseInt(a.attr("MAPX"),10),b.mapy=parseInt(a.attr("MAPY"),10));b.repeatVar=makestr(a.attr("REPEATVAR"));b.nextPage="";b.nextPageDisabled=!1;b.alignText="";b.step=parseInt(a.attr("STEP"),10);b.text=a.find("TEXT").xml();b.textAudioURL=makestr(a.find("TEXTAUDIO").text());b.learn=makestr(a.find("LEARN").xml());b.help=
makestr(a.find("HELP").xml());b.helpAudioURL=makestr(a.find("HELPAUDIO").text());b.helpReader=makestr(a.find("HELPREADER").xml());b.helpImageURL=makestr(a.find("HELPIMAGE").text());b.helpVideoURL=makestr(a.find("HELPVIDEO").text());b.notes=makestr(a.find("NOTES").xml());b.codeBefore=makestr(a.find("CODEBEFORE").xml());b.codeAfter=makestr(a.find("CODEAFTER").xml());a.find("BUTTONS > BUTTON").each(function(){var a=new TButton;a.label=jQuery.trim($(this).find("LABEL").xml());a.next=makestr($(this).attr("NEXT"));
a.name=jQuery.trim($(this).find("NAME").xml());a.value=jQuery.trim($(this).find("VALUE").xml());b.buttons.push(a)});a.find("FIELDS > FIELD").each(function(){var a=new TField,d=$(this);a.type=d.attr("TYPE");a.required=textToBool(d.attr("REQUIRED"),!0);a.order=makestr(d.attr("ORDER"));a.label=makestr(jQuery.trim(d.find("LABEL").xml()));a.name=jQuery.trim(d.find("NAME").xml());a.value=makestr(jQuery.trim(d.find("VALUE").xml()));a.min=makestr(d.attr("MIN"));a.max=makestr(d.attr("MAX"));a.calendar=textToBool(d.attr("CALENDAR"),
!1);a.calculator=textToBool(d.attr("CALCULATOR"),!1);a.invalidPrompt=makestr(jQuery.trim(d.find("INVALIDPROMPT").xml()));a.invalidPromptAudio=makestr(jQuery.trim(d.find("INVALIDPROMPTAUDIO").xml()));a.listSrc=makestr(d.find("LISTSRC").xml());""===a.listSrc&&(a.listData=d.find("LISTDATA").xml());b.fields.push(a)});return b}
function parseXML_Auto_to_CAJA(a){var b;""!==a.find("A2JVERSION").text()?b=parseXML_A2J_to_CAJA(a):""!==a.find("CALIDESCRIPTION").text()?"undefined"!==typeof parseXML_CA_to_CAJA&&(b=parseXML_CA_to_CAJA(a)):b=parseXML_CAJA_to_CAJA(a);b.sortPages();return b}function cr2P(a){return""===a?"":"<P>"+a.split("\n").join("</P><P>")+"</P>"};function parseXML_A2J_to_CAJA(a){trace("Converting from A2J Author (Flash)");var b={"I need more information. Please choose one or more checkboxes to continue.":"helpCB","I need more information. You must type an answer in the highlighted box before you can continue.":"helpText","I need more information. You must choose an answer from the highlighted box before you can continue.":"invalidPromptChoose"},c={},d=new TGuide;d.tool="A2J";d.toolversion=makestr(a.find("A2JVERSION").text());d.avatar=makestr(a.find("AVATAR").text());
d.guideGender=makestr(a.find("GUIDEGENDER").text());d.completionTime="";d.copyrights="";d.createdate="";d.credits="";d.description=cr2P(makestr(a.find("DESCRIPTION").xml()));d.jurisdiction=makestr(a.find("JURISDICTION").text());d.language=makestr(a.find("LANGUAGE").text());d.modifydate="";d.notes=cr2P(makestr(a.find("HISTORY").xml()));d.sendfeedback=textToBool(a.find("SENDFEEDBACK").text(),!1);d.emailContact=makestr(a.find("SENDFEEDBACKEMAIL").text());d.subjectarea=d.jurisdiction;d.title=a.find("TITLE").text();
d.version=makestr(a.find("VERSION").text());d.viewer="A2J";d.endImage=a.find("ENDGRAPHIC").text();d.logoImage=a.find("LOGOGRAPHIC").text();d.mobileFriendly="";var e=new TAuthor;e.name=makestr(a.find("AUTHOR").text());d.authors=[e];a.find("STEP").each(function(){var a=$(this),b=new TStep;b.number=a.attr("NUMBER");b.text=a.find("TEXT").xml();d.steps.push(b)});d.templates=makestr(a.find("TEMPLATES").text());a.find("VARIABLE").each(function(){var a=$(this),b=new TVariable;b.name=a.attr("NAME");b.type=
a.attr("TYPE");b.repeating=textToBool(a.attr("REPEATING"),!1);b.comment=makestr(a.find("COMMENT").xml());d.vars[b.name.toLowerCase()]=b});var f=[];a.find("POPUP").each(function(){var a=$(this),b={};b.id=a.attr("ID");b.name=a.attr("NAME");b.text=a.find("TEXT").xml();f[b.id]=b});var g=[],h=function(a){return g[a]?g[a].name:a},j=function(a,b){return b.replace(/\"POPUP:\/\/(\w+)\"/ig,function(b){b=b.match(/\"POPUP:\/\/(\w+)\"/i)[1];b=f[b];b.page=d.addUniquePage(a+" popup");b.page.type="Popup";b.page.text=
j(a,b.text);return'"POPUP://'+htmlEscape(b.page.name)+'"'})};a.find("QUESTION").each(function(){var a=$(this),b=d.addUniquePage(jQuery.trim(a.attr("NAME")));g[a.attr("ID")]=b});d.firstPage=h(makestr(a.find("FIRSTQUESTION").text()));d.exitPage=h(makestr(a.find("EXITQUESTION").text()));a.find("QUESTION").each(function(){var a=$(this),b=g[a.attr("ID")];b.xmla2j=a.xml();b.type="A2J";b.style="";b.step=parseInt(a.attr("STEP"),10);b.mapx=parseInt(0.4*a.attr("MAPX"),10);b.mapy=parseInt(0.3*a.attr("MAPY"),
10);b.repeatVar=makestr(a.attr("REPEATVAR"));b.nextPage="";b.nextPageDisabled=!1;b.text=j(b.name,makestr(a.find("TEXT").xml()));b.textAudioURL=j(b.name,makestr(a.find("TEXTAUDIO").xml()));b.learn=makestr(a.find("LEARN").xml());b.help=j(b.name,makestr(a.find("HELP").xml()));b.helpAudioURL=j(b.name,makestr(a.find("HELPAUDIO").xml()));b.helpReader=makestr(a.find("HELPREADER").xml());b.helpImageURL=makestr(a.find("HELPGRAPHIC").text());b.helpVideoURL=makestr(a.find("HELPVIDEO").text());b.notes=cr2P(makestr(a.find("NOTE").xml()));
SHOWXML&&(b.xml=$(this).xml());b.alignText="";var c=[];a.find("BUTTON").each(function(){var a=new TButton;a.label=jQuery.trim($(this).find("LABEL").xml());a.next=h(makestr($(this).attr("NEXT")));a.name=jQuery.trim($(this).attr("NAME"));a.value=jQuery.trim($(this).find("VALUE").xml());b.buttons.push(a)});a.find("FIELD").each(function(){var a=new TField;a.type=$(this).attr("TYPE");a.required=!textToBool($(this).attr("OPTIONAL"),!1);a.order=makestr($(this).attr("ORDER"));a.min=makestr($(this).attr("MIN"));
a.max=makestr($(this).attr("MAX"));a.calendar=textToBool($(this).attr("CALENDAR"),!1);a.calculator=textToBool($(this).attr("CALCULATOR"),!1);a.label=makestr(jQuery.trim($(this).find("LABEL").xml()));a.name=jQuery.trim($(this).find("NAME").xml());a.value=makestr(jQuery.trim($(this).find("VALUE").xml()));a.invalidPrompt=makestr(jQuery.trim($(this).find("INVALIDPROMPT").xml()));a.invalidPromptAudio=makestr(jQuery.trim($(this).find("INVALIDPROMPTAUDIO").xml()));a.listSrc=makestr(jQuery.trim($(this).find("LISTSRC").xml()));
""===a.listSrc&&(a.listData=$(this).find("SELECT").xml());b.fields.push(a)});a.find("MACRO").each(function(){var a=new TScript;a.event=jQuery.trim($(this).find("EVENT").xml());var b=gLogic.hds(jQuery.trim($(this).find("CONDITION").xml())),d=jQuery.trim($(this).find("COMMENT").xml());if("Example: set a flag if income too high"===d||null===d||"undefined"===d)d="";var e=[],k=[];$(this).find("STATEMENT").each(function(){var a=jQuery.trim($(this).find("CONDITION").xml()),b=jQuery.trim($(this).find("ACTION").xml()),
c;if(null!==(c=b.match(/set\s+(.+)/i))){var d=c[1].indexOf("="),b=c[1].substr(0,d);c=gLogic.hds(c[1].substr(d+1));""===c&&(c='""');b=""!==b?"SET "+b+" TO "+c:""}else b=null!==(c=b.match(/goto\s+(\w+)\s?/i))?'GOTO "'+htmlEscape(h(c[1]))+'"':"//"+b;""!==b&&("true"===a?e.push(b):k.push(b))});a.code="true"===b.toLowerCase()||"1"===b||"1=1"===b?e.join("\n")+"\n":0===k.length?"IF "+b+" \n "+e.join("\n ")+"\nEND IF\n":0===e.length?"IF NOT ("+b+") \n "+k.join("\n ")+"\nEND IF\n":"IF  "+b+" \n "+e.join("\n ")+
"\nELSE\n "+k.join("\n ")+"\nEND IF\n";d&&(a.code="//"+d+"\n"+a.code);c.push(a)});var a=[],d=[],e;for(e in c){var k=c[e],f=k.code.split("\n");"BEFORE"===k.event?a=a.concat(f):d=d.concat(f)}b.codeBefore=makestr(a.join("<BR/>"));b.codeAfter=makestr(d.concat([]).join("<BR/>"))});for(var k in b)1===c[k]&&(d.constants[b[k]]=k);return parseXML_CAJA_to_CAJA($(jQuery.parseXML(exportXML_CAJA_from_CAJA(d))))};function versionString(){return"Access to Justice Viewer/Author Version "+CONST.A2JVersionNum+"("+CONST.A2JVersionDate+")"}function loadXMLList(a){var b=$(a.data);$(b,"option:first").prepend('<option value="">Choose from this list</option>');$(a.elt).html(b.html()).val(a.val)}
function loadXMLListExternal(a){$.ajax({url:fixPath(a.url),dataType:"text",timeout:15E3,opts:a,error:function(a,c){dialogAlert("Unable to load a list of items from "+this.url+"\n"+c)},success:function(a){var c=this.opts;c.data=a;loadXMLList(c)}})}
var A2JViewer={IMG:"img/",history:[],layoutPage:function(a,b){var c='<ul class="NavBar"> <li><a href="#navback">'+lang.GoBack+'</a></li> <li><a href="#">'+lang.GoNext+"</a></li> <li>"+lang.MyProgress+' <select id="history"><option>Question 1</option><option>Question 2</option></select></li>  <li class="right size2"><a href="#">A+</a></li> <li class="right size1"><a href="#">A-</a></li> <li class="right"><a href="#">Exit</a></li> <li class="right"><a href="#">Save</a></li> </ul><div class="interact"></div> <div id="a2jbtn"></div> <div class="notice"><div class="license"><p ><img src="img/SJILogo.gif" width="90" height="55" hspace="3" vspace="3" align="left" />This program was developed under grants from the State Justice Institute (SJI grant number SJI-04-N-121), Center for Access to the Courts through Technology; Chicago Kent College of Law, Center for Computer-Assisted Legal Instruction (CALI), and Legal Services Corporation (LSC).  The points of view expressed are those of the authors and do not necessarily represent the official position or policies of the SJI, Center for Access to the Courts through Technology, Chicago-Kent, CALI, or the LSC.</p><p>&quot;A2J Author&quot; and &quot;A2J Guided Interviews&quot; are federally registered trademarks of Illinois Institute of Technology, Chicago Kent College of Law &amp; Center for Computer-Assisted Legal Instruction.  Any use of either mark must include the full name of the mark, along with the registration circle - ®.  Use of either mark on your webpage, or in any publications, presentations or materials must also prominently display the following sentence, &quot;[insert mark name here]® is a US federally registered trademark owned by Illinois Institute of Technology, Chicago Kent College of Law &amp; Center for Computer-Assisted Legal Instruction. &lt;www.a2jauthor.org&gt; </p></div><div class="copyright">© 2000-2013 Illinois Institute of Technology - Chicago-Kent College of Law and the Center for Computer-Assisted Legal Instruction</div></div>';""===
a.html()&&(a.html(c),$("#a2jbtn").attr("title",versionString()).click(function(){$(a).toggleClass("test",500)}),$("#viewer-var-form").append("<div><button/><button/></div>"),$("#viewer-var-form div button").first().button({label:"Save",icons:{primary:"ui-icon-arrow-4-diag"}}).next().button({label:"Reload",icons:{primary:"ui-icon-zoomin"}}),$(".NavBar a").click(function(){$(this).attr("href")}),"undefined"!==typeof authorViewerHook?authorViewerHook():($(".license",a).delay(5E3).slideUp(),$(".copyright",
a).hover(function(){$(".license").slideDown()},function(){$(".license").slideUp()})));traceLogic(traceTag("code","PAGE")+" "+traceTag("page",b.name));gLogic.GOTOPAGE=null;gLogic.executeScript(b.codeBefore);var c=b.step,d=gLogic.evalLogicHTML(b.text),e=gLogic.evalLogicHTML(b.help);$(".interact",a).html(A2JViewer.layoutStep(c));$(".ui-form.question",a).html(d+'<div class="form"></div><div class="buttonlist"></div>');for(var f in b.buttons)c=b.buttons[f],$(".ui-form.question  .buttonlist",a).append("<button num="+
f+' title="Go to page '+gGuide.pageDisplayName(c.next).asHTML()+'">'+c.label+"</button>");f=$(".ui-form.question .form",a);c=null;""!==b.repeatVar&&(c=gGuide.varGet(b.repeatVar));for(var g in b.fields){var h=b.fields[g],j="FID_"+g,d="FID_"+h.name,k=gGuide.varGet(h.name,c),l=gLogic.evalLogicHTML(h.label),l=$("<label/>").attr("for",j).html(l),m=null,p=null;switch(h.type){case CONST.ftText:m=$("<input type=text class=text id="+j+"></input>").val(k);break;case CONST.ftTextLong:m=$("<textarea type=text class=textarea id="+
j+"></textarea>").val(k);break;case CONST.ftTextPick:m=$("<select id="+j+"></select>").val(k);""!==h.listSrc?loadXMLListExternal({elt:m,url:h.listSrc,val:k}):loadXMLList({elt:m,data:"<select>"+h.listData+"</select>",val:k});break;case CONST.ftNumber:m=$("<input type=text class=number id="+j+"></input>").val(k);break;case CONST.ftNumberDollar:m=$("<input type=text class=number id="+j+"></input>").val(k);break;case CONST.ftNumberSSN:m=$("<input type=text class=number id="+j+"></input>").val(k);break;
case CONST.ftNumberPhone:m=$("<input type=text class=number id="+j+"></input>").val(k);break;case CONST.ftNumberZIP:m=$("<input type=text class=number id="+j+"></input>").val(k);break;case CONST.ftNumberPick:m=$("<input type=text id="+j+"></input>").val(k);break;case CONST.ftDateMDY:m=$("<input type=text id="+j+"></input>").val(k);break;case CONST.ftGender:h=j+"M";j+="F";m=$("<div/>").append($('<input type=radio id="'+h+'" name="'+d+'"></input>')).append($("<label/>").attr("for",h).html(lang.Male)).append($('<br/><input type=radio id="'+
j+'" name="'+d+'"></input>')).append($("<label/>").attr("for",j).html(lang.Female));break;case CONST.ftRadioButton:p=$('<input type=radio id="'+j+'" name="'+d+'"></input>');break;case CONST.ftCheckBox:p=$('<input type=checkbox id="'+j+'"  name="'+d+'"></input>');break;case CONST.ftCheckBoxNOTA:p=$('<input type=checkbox id="'+j+'"  name="'+d+'"></input>')}d=$('<div class="field"/>');null!==p?d.append($('<div class="labelinput"/>').append([p,l])):d.append([$('<div class="label"/>').append(l),$('<div class="input"/>').append(m)]);
f.append(d)}$(".ui-form.learnmore",a).html(e+'<div class="buttonlist"><button>Close</button></div>').parent().hide().filter(function(){return""!==e}).fadeIn(1E3);400<$(".question.ui-form",a).height()&&$(".question.bubble",a).css({top:50});$(".ui-form.learnmore button",a).button().click(function(){$(".A2JViewer .learnmore.bubble").hide()});$(".ui-form.question button",a).button().click(function(){var a=null;""!==b.repeatVar&&(a=gGuide.varGet(b.repeatVar));for(var c in b.fields){var d=b.fields[c],e=
"FID_"+c;switch(d.type){case CONST.ftText:case CONST.ftTextLong:case CONST.ftNumber:case CONST.ftNumberDollar:case CONST.ftNumberSSN:case CONST.ftNumberPhone:case CONST.ftNumberZIP:case CONST.ftDateMDY:gGuide.varSet(d.name,a,$("#"+e).val());break;case CONST.ftTextPick:gGuide.varSet(d.name,a,$("#"+e).val());break;case CONST.ftNumberPick:gGuide.varSet(d.name,a,$("#"+e).val());break;case CONST.ftGender:$("#"+e+"M").is(":checked")&&gGuide.varSet(d.name,a,lang.Male);$("#"+e+"F").is(":checked")&&gGuide.varSet(d.name,
a,lang.Female);break;case CONST.ftRadioButton:$("#"+e).is(":checked")&&gGuide.varSet(d.name,a,d.value);break;case CONST.ftCheckBox:gGuide.varSet(d.name,a,$("#"+e).is(":checked"))}}c=parseInt($(this).attr("num"),10);c=b.buttons[c];traceLogic("You pressed "+traceTag("ui",c.label));trace(c.label,c.name,c.value);""!==c.name&&gGuide.varSet(c.name,a,c.value);gLogic.GOTOPAGE=c.next;gLogic.executeScript(b.codeAfter);gotoPageView(c.next)})},layoutStep:function(a){function b(a,b,c,e,k){void 0!=typeof e&&(e=
" width="+e);void 0!=typeof k&&(k=" height="+k);return'<img src="'+d+a+'" '+e+k+' style="position:absolute; left:'+b+"px; top:"+c+'px;">'}for(var c=gGuide.steps,d=A2JViewer.IMG,e=[{ground:"step1.png",ch:[322,5,550,350],gl:[351,204],gf:[451,200],cr:[523,198],steps:[[288,430,432,131]],signs:[[629,277,1]]},{ground:"step7.png",ch:[579,66,143,61],gl:[351,204],gf:[451,200],cr:[523,198],steps:[[288,430,432,131],[448,236,197,24]],signs:[[619,438,1],[550,200,0.6]]}],e=1>=c.length-a?e[0]:e[1],f=b(e.ground,
0,0)+b("A2J5_CourtHouse.png",e.ch[0],e.ch[1],e.ch[2],e.ch[3]),g=0;g<e.steps.length;g++)var h=a+g,j=e.steps[g],k=0===h?0:(h-1)%4+1,f=f+b("step_circle_"+k+".png",j[0],j[1],j[2],j[3]),j=e.signs[g],l=j[2],l="-moz-transform: scale("+l+");",f=f+('<div class="stepsign" style="position:absolute; left:'+j[0]+"px; top: "+j[1]+"px;"+l+'"><div class="stepsigncolor Step'+k+'" ></div>\t<div class="stepnumber" >'+c[h].number+'</div><div class="steptext">'+c[h].text+"!</div></div>");a=gGuide.guideGender;a="Male"==
a?"M":"F";c=gGuide.varGet("User Gender");c="Male"==c?"M":"Female"==c?"F":"";g=gGuide.varGet("User Avatar");"undefined"===typeof g&&(g=gGuide.avatar);g="tan"==g?1:"blank"==g||""==g?0:parseInt(g,10);""!=c?(h=e.gl[0]-300,f+=b("A2JAvatar-Guide-"+a+g+".png",e.gl[0],e.gl[1])+b("A2JAvatar-Client-"+c+g+".png",e.cr[0],e.cr[1])):(h=e.gf[0]-300,f+=b("A2JAvatar-Guide-Front-"+a+g+".png",e.gf[0],e.gf[1]));return'<div class="step" >'+(f+('<div class="question bubble" style="position:absolute; left:'+h+'px; top: 140px; width: 300px; "><div class="question ui-form"><div class="buttonlist"></div></div></div><img style="position:absolute; left: '+
(h+299)+'px; top: 240px; " src="'+d+'guide_bubble_tip.png"   />'))+'<div class="learnmore bubble" style="position:absolute; left:604px; top: 93px; width: 285px;"><div class="ui-form learnmore"><div class="buttonlist"><button>Close</button></div></div></div></div>'}};function dialogAlert(a){"string"===typeof a&&(a={message:a});null===a.title&&(a.title="Alert");var b=$("#dialog-confirm");b.html('<p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>'+a.message+"</p>");b.dialog({title:a.title,resizable:!1,width:350,height:250,modal:!0,buttons:{OK:function(){$(this).dialog("close")}}})};function jquote(a){return'"'+a.replace(/"/gi,'\\"')+'"'}function ParseError(a,b,c){this.line=a;this.type=b;this.text=c;return this}function TLogic(){this.showCAJAScript=0;this.tracerID="#tracer";this.userFunctions=[];this.indent=0;this.GOTOPAGE=null;return this}TLogic.prototype.pageExists=function(a){return null!==gGuide.pages[a]};
TLogic.prototype.pageFindReferences=function(a,b){var c={add:!1},d=a.split(CONST.ScriptLineBreak),e;for(e=0;e<d.length;e++){var f;if(null!==(f=jQuery.trim(d[e]).split("//")[0].match(/^goto\s+\"(.+)\"/i))&&f[1]===b)c.add=!0}return c};TLogic.prototype.evalLogicHTML=function(a){var b=a.split("%%");if(0<b.length){a="";var c;for(c=0;c<b.length;c+=2)a+=b[c],c<b.length-1&&(a+=this.evalBlock(b[c+1]))}return a};
TLogic.prototype.evalBlock=function(a){var b="",c=[],d=this.translateCAJAtoJSExpression(a,1,c);if(0===c.length)try{b=(new Function("with (gLogic) { return ("+d+")}"))()}catch(e){b='<span class="code">'+a+'</span><span class="err">'+e.message+"</span>"}else b='<span class="code">'+a+'</span><span class="err">syntax error</span>';return b};
TLogic.prototype.translateCAJAtoJS=function(a){var b=[],c=[];a=a.split(CONST.ScriptLineBreak);var d=0,e;for(e=0;e<a.length;e++){var f=jQuery.trim(decodeEntities(a[e])).split("//")[0],g;if(""!==f){if(null!==(g=f.match(/set\s+([\w#]+|\[.+\])\s*?(=|TO)\s?(.+)/i))){var h=g[1],h=h.replace(/\[|\]/gi,""),h=h.split("#");g=1===h.length?"_VS("+jquote(f)+',"'+h[0]+'",0,'+this.translateCAJAtoJSExpression(g[3],e,b)+");":"_VS("+jquote(f)+',"'+h[0]+'",'+this.translateCAJAtoJSExpression(h[1],e,b)+","+this.translateCAJAtoJSExpression(g[3],
e,b)+");"}else null!==(g=f.match(/^goto\s+(.+)/i))?(g=g[1],'"'===g.substr(0,1)&&'"'===g.substr(-1,1)&&(h=g.substr(1,g.length-2),this.pageExists(h)||b.push(new ParseError(e,"",lang.scriptErrorMissingPage.printf(h)))),g="_GO("+jquote(f)+","+g+");return;"):null!==f.match(/print\s+(.+)/i)?g="":null!==(g=f.match(/^if\s+(.+)/i))?(d++,3===this.showCAJAScript&&(f=""),g="if (_IF("+d+","+jquote(g[1])+","+this.translateCAJAtoJSExpression(g[1],e,b)+")){"):null!==(g=f.match(/^else if\s+(.+)/i))?(3===this.showCAJAScript&&
(f=""),g="} else if (_IF("+d+","+jquote(g[1])+","+this.translateCAJAtoJSExpression(g[1],e,b)+")){"):null!==f.match(/^end if/i)?(3===this.showCAJAScript&&(f=""),d--,g="};_ENDIF("+d+");"):null!==f.match(/^else/i)?(3===this.showCAJAScript&&(f=""),g="}else{"):null!==f.match(/deltavars/i)?g="_deltaVars("+jquote(f)+");":(g="_CAJA("+jquote(f)+");",b.push(new ParseError(e,"",lang.scriptErrorUnhandled.printf(f))));switch(this.showCAJAScript){case 0:c.push(g);break;case 1:c.push(g+" //CAJA: "+f);break;case 2:c.push("",
"//CAJA: "+f,g);break;default:c.push("","",g)}}}0<d&&b.push(new ParseError(e,"",lang.scriptErrorEndMissing.printf()));return{js:c,errors:b}};TLogic.prototype.hds=function(a){return a};
TLogic.prototype.translateCAJAtoJSExpression=function(a,b,c){a=(" "+a+" ").split('"');var d;for(d=0;d<a.length;d+=2){var e=a[d],e=e.replace(/\[([\w|\s|\-]+)\]/gi,'$$1("$1")'),e=e.replace(/\[([\w|\s|\-]+)#([\d]+)\]/gi,'$$1("$1",$2)'),e=e.replace(/\[([\w|\s|\-]+)#([\w|\s|\-]+)\]/gi,'$$1("$1",$$1("$2"))'),e=e.replace(/#([\d|\/]+)#/gi,'$$2("$1")');a[d]=e}a=a.join('"').split('"');for(d=0;d<a.length;d+=2)e=a[d],e=e.replace(/(\d[\d|\,]+)/gi,function(a){return a.replace(",","")}),e=e.replace(/\band\b/gi,
"&&"),e=e.replace(/\bor\b/gi,"||"),e=e.replace(/\bnot\b/gi,"!"),e=e.replace(/\=/gi,"=="),e=e.replace(/\>\=\=/gi,">="),e=e.replace(/\<\=\=/gi,"<="),e=e.replace(/\<\>/gi,"!="),e=e.replace(/\btrue\b/gi,"1"),e=e.replace(/\bfalse\b/gi,"0"),e=e.replace(/([A-Za-z_][\w]*)(\s*)(\()/gi,'$$3("$1",'),a[d]=e;a=a.join('"').split('"');for(d=0;d<a.length;d+=2)e=a[d],e=e.replace(/([A-Za-z_][\w]*)/gi,'$$1("$1")'),a[d]=e;a=a.join('"').split('"');for(d=0;d<a.length;d+=2)e=a[d],e=e.replace(/\$1/,"_VG").replace(/\$2/,
"_ED").replace(/\$3/,"_CF"),a[d]=e;a=a.join('"');try{new Function(a)}catch(f){"missing ; before statement"===f.message&&(f.message="syntax error"),c.push(new ParseError(b,"",f.message))}return a};TLogic.prototype.addUserFunction=function(a,b,c){this.userFunctions.push({name:a,numArgs:b,func:c})};TLogic.prototype.trace=function(a){$(this.tracerID).append('<li style="text-indent:'+this.indent+'em">'+a+"</li>")};TLogic.prototype._CAJA=function(a){this.trace(traceTag("code",a))};
TLogic.prototype._IF=function(a,b,c){!0===c?this.trace("IF "+traceTag("val",b)+" ✔"):this.trace("<strike>IF "+traceTag("val",b)+"</strike>");this.indent=a;return!0===c};TLogic.prototype._ENDIF=function(a){this.indent=a};TLogic.prototype._VS=function(a,b,c,d){this.trace(a);return gGuide.varSet(b,c,d)};TLogic.prototype._VG=function(a,b){return gGuide.varGet(a,b)};TLogic.prototype._CF=function(a){this.trace("Call function "+a);return 0};TLogic.prototype._ED=function(a){return Date.parse(a)};
TLogic.prototype._GO=function(a,b){this.GOTOPAGE=b;this.trace(a)};TLogic.prototype._deltaVars=function(){};TLogic.prototype.executeScript=function(a){if("undefined"===typeof a)return!0;this.indent=0;a=this.translateCAJAtoJS(a);if(0===a.errors.length){a="with (gLogic) {"+a.js.join("\n")+"}";try{(new Function(a))()}catch(b){return this.trace("ERROR: "+b.message+" "+b.lineNumber),!1}}else return this.trace("ERROR: syntax error in logic"),!1;this.indent=0;return!0};var gLogic=new TLogic;
gLogic.addUserFunction("Number",1,function(a){return parseFloat(a)});gLogic.addUserFunction("String",1,function(a){return String(a)});gLogic.addUserFunction("HisHer",1,function(a){return"male"===a?"his":"her"});gLogic.addUserFunction("HimHer",1,function(a){return"male"===a?"him":"her"});gLogic.addUserFunction("HeShe",1,function(a){return"male"===a?"he":"she"});
$.formatNumber&&(gLogic.addUserFunction("Dollar",1,function(a){return $.formatNumber(a,{format:"#,###.00",locale:"us"})}),gLogic.addUserFunction("DollarRound",1,function(a){return $.formatNumber(Math.round(a),{format:"#,##0",locale:"us"})}));gLogic.addUserFunction("dateMDY",1,function(a){var b=new Date;b.setTime(864E5*a);return b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear()});function traceLogic(a){gLogic.trace(a)};var gMapperScale=1,gMapSize=1;function showPageOnMap(){}var GRID_MAP={x:10,y:10},NODE_SIZE={w:150,h:44};
function buildMap(){var a=$(".map");a.empty();var b,c;for(b in gGuide.pages)c=gGuide.pages[b],null!==c.mapx&&(c.mapx=Math.round(1+c.mapx/GRID_MAP.x)*GRID_MAP.x,c.mapy=Math.round(1+c.mapy/GRID_MAP.y)*GRID_MAP.y);for(b in gGuide.pages)if(c=gGuide.pages[b],null!==c.mapx){var d=c.mapx,e=c.mapy;a.append(' <div class="node Step'+(0===c.step?0:c.step%4+1)+'" rel="'+c.name.asHTML()+'" style="z-index:1; left:'+d+"px;top:"+e+'px;">'+(c.type===CONST.ptPopup?"":'<div class="arrow"></div>')+'<div class="text">'+
c.name+"</div></div>")}$(".node",a).dblclick(function(){var a=$(this).attr("rel");gotoPageEdit(a)});mapLines();a.traggable({grid:[GRID_MAP.x,GRID_MAP.y],start:function(){},stop:function(a,b){var c=gGuide.pages[$(b.node).attr("rel")];c.mapx=b.position.left;c.mapy=b.position.top;mapLines()}})}function mapZoomClick(){var a=parseFloat($(this).attr("zoom"));0<a&&(gMapperScale*=a);0.9<=gMapperScale&&(gMapperScale=1);$(".map").traggable("changeScale",gMapperScale)}
function mapLines(){var a=NODE_SIZE.w,b=NODE_SIZE.h,c=$(".map");$(".branch, .line",c).remove();for(var d in gGuide.pages){var e=gGuide.pages[d];if(null!==e.mapx){var f=e.mapx,g=e.mapy,h,j=[];for(h in e.buttons){var k=e.buttons[h];j.push({text:k.label,dest:gGuide.pages[k.next]})}e.mapBranches=j;j=e.mapBranches.length;k=a/j/2;for(h in e.mapBranches){var l=e.mapBranches[h],m=f+h/j*a+k,p=g+b;if("undefined"!==typeof l.dest){var q=4*(j-parseInt(h,10)),r=l.dest.mapx+a/2,l=l.dest.mapy,s=m,q=p+10+q,n,u,t;
l>g+b+16?(n=r,u=q,t=n,l-=10,r<m?(s=r,n=m):(s=m,n=r),c.append(lineV(m,p,q-p)+lineH(s,q,n-s)+lineV(t,u,l-u))):(n=(s+r)/2,u=q,t=n,l-=10,c.append(lineV(m,p,q-p)+(s<n?lineH(s,q,n-s):lineH(n,q,s-n))+lineV(t,l,u-l)+(t<r?lineH(t,l,r-t):lineH(r,l,t-r))))}}}}}function lineV(a,b,c){return'<div class="line" style="left:'+a+"px;top:"+b+"px;width:2px;height:"+c+'px;"></div>'}function lineH(a,b,c){return'<div class="line" style="left:'+a+"px;top:"+b+"px;width:"+c+'px;height:2px;"></div>'};CONST.uploadURL="CAJA_WS.php?cmd=uploadfile&gid=";
TGuide.prototype.noviceTab=function(a,b){var c=this,d=$("#"+a),d=$(".tabContent",d);b&&d.html("");if(""===d.html()){form.clear();var e,f,g;switch(a){case "tabsVariables":c.buildTabVariables(d);break;case "tabsConstants":e=form.fieldset("Constants");d.append(e);break;case "tabsLogic":d.append(form.note(1===prefs.showLogic?"Showing only logic fields containing code":"Showing all logic fields"));var h=function(a,b){b.codeBefore=a},j=function(a,b){b.codeAfter=a};for(e in c.sortedPages)if(f=c.sortedPages[e],
f.type!==CONST.ptPopup&&(2===prefs.showLogic||1===prefs.showLogic&&(""!==f.codeBefore||""!==f.codeAfter)))g=form.fieldset(f.name,f),(2===prefs.showLogic||""!==f.codeBefore)&&g.append(form.codearea({label:"Before:",value:f.codeBefore,change:h})),(2===prefs.showLogic||""!==f.codeAfter)&&g.append(form.codearea({label:"After:",value:f.codeAfter,change:j})),d.append(g);break;case "tabsText":d.append(form.note(1===prefs.showText?"All non-empty text blocks in this guide":"All text blocks in this guide"));
for(e in c.sortedPages)f=c.sortedPages[e],g=form.fieldset(f.name,f),pageNameFields(g,f),d.append(g);break;case "tabsAbout":e=form.fieldset("About");e.append(form.text({label:"Title:",placeholder:"Interview title",value:c.title,change:function(a){c.title=a}}));e.append(form.htmlarea({label:"Description:",value:c.description,change:function(a){c.description=a}}));e.append(form.text({label:"Jurisdiction:",value:c.jurisdiction,change:function(a){c.jurisdiction=a}}));g=[];for(f in Languages.regional)g.push(f,
Languages.regional[f].Language+" {"+f+"}");e.append(form.pickList({label:"Language:",value:c.language,change:function(a){c.language=a;trace("Guide language is now "+c.language)}},g));e.append(form.htmlarea({label:"Credits:",value:c.credits,change:function(a){c.credits=a}}));e.append(form.text({label:"Approximate Completion Time:",placeholder:"",value:c.completionTime,change:function(a){c.completionTime=a}}));d.append(e);e=form.fieldset("Layout");e.append(form.pickImage({label:"Logo graphic:",placeholder:"Logo URL",
value:c.logoImage,change:function(a){c.logoImage=a}}));e.append(form.pickImage({label:"End graphic:",placeholder:"End (destination graphic) URL",value:c.endImage,change:function(a){c.endImage=a}}));e.append(form.pickList({label:"Mobile friendly?",value:c.mobileFriendly,change:function(a){c.mobileFriendly=a}}," Undetermined false No true Yes".split(" ")));d.append(e);e=form.fieldset("Authors");f=new TAuthor;e=form.fieldset("Revision History");e.append(form.text({label:"Current Version:",value:c.version,
change:function(a){c.version=a}}));e.append(form.htmlarea({label:"Revision Notes",value:c.notes,change:function(a){c.notes=a}}));d.append(e);e=form.fieldset("Authors");e.append(form.listManager({name:"Authors",picker:"Number of authors",min:1,max:12,list:c.authors,blank:f,save:function(a){c.authors=a},create:function(a,b){a.append(form.text({label:"Author's Name:",placeholder:"name",value:b.name,change:function(a,b){b.name=a}}));a.append(form.text({label:"Author's Title:",placeholder:"title",value:b.title,
change:function(a,b){b.title=a}}));a.append(form.text({label:"Author's Organization:",placeholder:"organization",value:b.organization,change:function(a,b){b.organization=a}}));a.append(form.text({label:"Author's email:",placeholder:"email",value:b.email,change:function(a,b){b.email=a}}));return a}}));d.append(e);break;case "tabsSteps":e=form.fieldset("Start/Exit points"),e.append(form.pickpage({value:c.firstPage,label:"Starting Point:",change:function(a){c.firstPage=a}})),e.append(form.pickpage({value:c.exitPage,
label:"Exit Point:",change:function(a){c.exitPage=a}})),d.append(e),e=form.fieldset("Steps"),f=new TStep,e.append(form.listManager({grid:!0,name:"Steps",picker:"Number of Steps",min:1,max:CONST.MAXSTEPS,list:c.steps,blank:f,save:function(a){c.steps=a;updateTOC()},create:function(a,b){a.append(form.text({label:"Step Number:",placeholder:"#",value:b.number,change:function(a,b){b.number=a;updateTOC()}}));a.append(form.text({label:"Step Sign:",placeholder:"title",value:b.text,change:function(a,b){b.text=
a;updateTOC()}}));return a}})),d.append(e)}form.finish(d)}};
function pageNameFields(a,b){a.append(form.htmlarea({label:"Text:",value:b.text,change:function(a,b){b.text=a}}));if(b.type!==CONST.ptPopup){(2===prefs.showText||""!==b.learn)&&a.append(form.text({label:"Learn More prompt:",placeholder:"",value:b.learn,change:function(a,b){b.learn=a}}));(2===prefs.showText||""!==b.help)&&a.append(form.htmlarea({label:"Help:",value:b.help,change:function(a,b){b.help=a}}));(2===prefs.showText||""!==b.helpReader)&&a.append(form.htmlarea({label:"Help Text Reader:",value:b.helpReader,
change:function(a,b){b.helpReader=a}}));var c,d=function(a,b){b.label=a},e=function(a,b){b.value=a},f=function(a,b){b.invalidPrompt=a};for(c in b.fields){var g=b.fields[c],h=form.fieldset("Field "+(parseInt(c,10)+1),g);h.append(form.htmlarea({label:"Label:",value:g.label,change:d}));(2===prefs.showText||""!==g.value)&&h.append(form.text({label:"Default value:",placeholder:"",name:"default",value:g.value,change:e}));(2===prefs.showText||""!==g.invalidPrompt)&&h.append(form.htmlarea({label:"If invalid say:",
value:g.invalidPrompt,change:f}));a.append(h)}var j;c=function(a,b){b.label=a};d=function(a,b){b.value=a};for(j in b.buttons)e=b.buttons[j],f=form.fieldset("Button "+(parseInt(j,10)+1),e),(2===prefs.showText||""!==e.label)&&f.append(form.text({value:e.label,label:"Label:",placeholder:"button label",change:c})),(2===prefs.showText||""!==e.value)&&f.append(form.text({value:e.value,label:"Default value",placeholder:"Default value",change:d})),a.append(f)}}
var prefs={showLogic:1,showText:1,showPageList:1,showJS:0,showXML:1},$pageEditDialog=null,SELECTED="ui-state-active";
function authorViewerHook(){$(".A2JViewer").append('<div class="debugmenu"><button/><button/></div>');$(".A2JViewer div.debugmenu button").first().button({label:"Resume editing",icons:{primary:"ui-icon-arrowreturnthick-1-w"}}).click(function(){resumeEdit()}).next().button({label:"Testing",icons:{primary:"ui-icon-pencil"}}).click(function(){$(".A2JViewer").toggleClass("test",500)})}$(document).ready(main);
function main(){Languages.set(Languages.defaultLanguage);$("#cajainfo").attr("title",versionString());$("#welcome").dialog({autoOpen:!1,modal:!0,height:500,width:700,close:function(a){"object"===typeof a.originalEvent&&signin()}});$("#guideSave").button({label:"Save",icons:{primary:"ui-icon-disk"}}).click(function(){guideSave()});$("#guideSaveAs").button({label:"Save as",disabled:!0,icons:{primary:"ui-icon-disk"}}).click(function(){});$("#guideNew").button({label:"New",disabled:!0,icons:{primary:"ui-icon-disk"}}).click(function(){});
$("#guideOpen").button({label:"Open",disabled:!0,icons:{primary:"ui-icon-disk"}}).click(function(){});$("#guideClose").button({label:"Close",icons:{primary:"ui-icon-close"}}).click(function(){guideClose()});$("#settings").button({label:"Settings",icons:{primary:"ui-icon-gear"}}).click(function(){$("#settings-form").dialog("open")});$(".guidemenu ul li").click(function(){gotoTabOrPage($(this).attr("ref"))});$(document).on("click",".editicons .ui-icon-circle-plus",function(){var a=$(this).closest("table"),
b=$(this).closest("tr"),c=a.data("settings");$("tbody tr",a).length>=c.max||(b.clone(!0,!0).insertAfter(b).fadeIn(),b.data("record",$.extend({},b.data("record"))),form.listManagerSave($(this).closest("table")))});$(document).on("click",".editicons .ui-icon-circle-minus",function(){var a=$(this).closest("table"),b=a.data("settings");$("tbody tr",a).length<=b.min||($(this).closest("tr").remove(),form.listManagerSave(a))});$("#tabsMapper button").first().button({disabled:!0,label:"Fit",icons:{primary:"ui-icon-arrow-4-diag"}}).next().button({label:"Zoom in",
icons:{primary:"ui-icon-zoomin"}}).next().button({label:"Zoom out",icons:{primary:"ui-icon-zoomout"}});$("#tabsMapper button").click(mapZoomClick);$(".tabsPages .tabFooter button").first().button({label:"Edit",icons:{primary:"ui-icon-pencil"}}).click(function(){gotoPageEdit(pageEditSelected())}).next().button({label:"New",icons:{primary:"ui-icon-document"}}).click(function(){pageEditNew()}).next().button({label:"Clone",icons:{primary:"ui-icon-newwin"}}).click(function(){pageEditClone(pageEditSelected())}).next().button({label:"Delete",
icons:{primary:"ui-icon-trash"}}).click(function(){pageEditDelete(pageEditSelected())});$("#vars_load").button({label:"Load",icons:{primary:"ui-icon-locked"}}).next().button({label:"Save",icons:{primary:"ui-icon-locked"}});$("#vars_load2").button({label:"Load",icons:{primary:"ui-icon-locked"}}).next().button({label:"Save",icons:{primary:"ui-icon-locked"}});$("#showlogic").buttonset();$("#showlogic1").click(function(){prefs.showLogic=1;gGuide.noviceTab("tabsLogic",!0)});$("#showlogic2").click(function(){prefs.showLogic=
2;gGuide.noviceTab("tabsLogic",!0)});$("#showtext").buttonset();$("#showtext1").click(function(){prefs.showText=1;gGuide.noviceTab("tabsText",!0)});$("#showtext2").click(function(){prefs.showText=2;gGuide.noviceTab("tabsText",!0)});$.extend($.ui.autocomplete.prototype,{_renderItem:function(a,b){return $("<li></li>").data("item.autocomplete",b).append($("<a></a>").html(b.label)).appendTo(a)}});$(".hotspot").draggable({containment:"parent"}).resizable().fadeTo(0.1,0.9);$("#cajasettings a").click(function(){switch($(this).attr("href")){case "#sample":loadGuideFile($(this).text(),
"");break;case "#bold":document.execCommand("bold",!1,null);break;case "#italic":document.execCommand("italic",!1,null);break;case "#indent":document.execCommand("indent",!1,null);break;case "#outdent":document.execCommand("outdent",!1,null);break;case "#theme":styleSheetSwitch($(this).text())}return!1});$("#settings-form").dialog({autoOpen:!1,width:600,height:500,modal:!0,buttons:[{text:"Close",click:function(){$(this).dialog("close")}}]});$("#page-viewer").hide();$("#var-add").button({icons:{primary:"ui-icon-trash"}}).click(varAdd);
$("#bold").button({label:"B"}).click(editButton);$("#italic").button({label:"I"}).click(editButton);$("#link").button({text:!1,icons:{primary:"ui-icon-link"}}).click(editButton);$("#popup").button({label:"P"}).click(editButton);$(document).tooltip({items:".htmledit a",content:function(){var a=$(this);return a.is("[title]")?a.attr("title"):a.is("a")?a.attr("href"):""}});signin()}
function signin(){$("#splash").show();ws({cmd:"login"},function(a){gUserID=a.userid;gGuideID=0;gUserNickName=a.nickname;0!==gUserID?($("#memenu").text(gUserNickName),$("#welcome .tabContent .name").html("Welcome "+gUserNickName+" user#"+gUserID),$("#welcome").show(),ws({cmd:"guides"},listGuides)):$("#login-form").dialog()})}
function gotoPageView(a){window.setTimeout(function(){var b=gGuide.pages[a];null===b||"undefined"===typeof b?(dialogAlert({title:"Missing page",message:"Page is missing: "+a}),traceLogic("Page is missing: "+a)):(gPage=b,$("#authortool").hide(),A2JViewer.layoutPage($(".A2JViewer","#page-viewer"),gPage),$("#page-viewer").removeClass("hidestart").show())},1)}function resumeEdit(){$("#authortool").show();$("#page-viewer").hide();null!==$pageEditDialog&&$pageEditDialog.dialog("open")}
function pageNameRelFilter(a,b){var c="PAGE "+b;return $(a).filter(function(){return c===$(this).attr("rel")})}function pageEditSelected(){var a=makestr($(".pageoutline li."+SELECTED).first().attr("rel"));return a=0===a.indexOf("PAGE ")?a.substr(5):""}function pageEditSelect(a){$(".pageoutline li").removeClass(SELECTED);pageNameRelFilter(".pageoutline li",a).toggleClass(SELECTED)}function pageEditNew(){pageEditClone(gGuide.firstPage)}
function pageEditClone(a){var b=gGuide.pages[a];if("undefined"===typeof b)return"";b=pageFromXML(page2XML(b));b=gGuide.addUniquePage(a,b);gGuide.sortPages();updateTOC();pageEditSelect(b.name);return b.name}
function pageRename(a,b){if(a.name===b)return!0;if(a.name.toLowerCase()!==b.toLowerCase()&&gGuide.pages[b])return dialogAlert({title:"Page rename disallowed",message:"There is already a page named "+b}),!1;gGuide.pageFindReferences(a.name,b);delete gGuide.pages[a.name];a.name=b;gGuide.pages[a.name]=a;gGuide.sortPages();updateTOC();pageEditSelect(b);return!0}
function pageEditDelete(a){var b=gGuide.pageFindReferences(a,null),c="",d;if(0<b.length){c=b.length+" references to this page.<ul>";for(d in b)c+="<li>"+b[d].name+" <i>"+b[d].field+"</i></li>";c+="</ul>"}else c="No references";dialogConfirmYesNo({title:"Delete page "+a,message:"Permanently delete this page?<hr>"+c,height:300,name:a,Yes:function(){delete gGuide.pages[gGuide.pages[this.name].name];gGuide.sortPages();updateTOC();null!==$pageEditDialog&&($pageEditDialog.dialog("close"),$pageEditDialog=
null)}})}
function gotoPageEdit(a){$pageEditDialog=$(".page-edit-form");$("#authortool").show();$("#page-viewer").hide();a=gGuide.pages[a];null===a||"undefined"===typeof a||($("#tabsLogic  .tabContent, #tabsText .tabContent").html(""),$pageEditDialog.attr("rel",a.name),$pageEditDialog.attr("title",a.name),$pageEditDialog.dialog({autoOpen:!1,width:750,height:500,minWidth:200,minHeight:300,maxHeight:700,close:function(){},buttons:[{text:"Delete",click:function(){pageEditDelete($(this).attr("rel"))}},{text:"Clone",
click:function(){pageEditClone($(this).attr("rel"))}},{text:"Preview",click:function(){var a=$(this).attr("rel");gotoPageView(a);$pageEditDialog.dialog("close")}},{text:"Close",click:function(){$(this).dialog("close")}}]}),a=gGuide.novicePage($(".page-edit-form-panel",$pageEditDialog).html(""),a.name),$pageEditDialog.dialog("open"),$pageEditDialog.dialog("moveToTop"))}
function gotoTabOrPage(a){if(0===a.indexOf("PAGE "))gotoPageEdit(a.substr(5));else switch(0===a.indexOf("STEP ")&&(a="tabsSteps"),$(".guidemenu ul li").removeClass("selected"),$('.guidemenu ul li[ref="'+a+'"]').addClass("selected"),$(".panel").hide(),$("#"+a).show(),a){case "tabsAbout":case "tabsVariables":case "tabsSteps":case "tabsLogic":case "tabsText":case "tabsConstants":gGuide.noviceTab(a,!1);break;case "tabsPreview":gotoPageView(gGuide.firstPage)}}
function pageGOTOList(){var a=[CONST.qIDNOWHERE,CONST.qIDSUCCESS,CONST.qIDFAIL,CONST.qIDEXIT,CONST.qIDBACK,CONST.qIDRESUME],b;for(b in gGuide.sortedPages){var c=gGuide.sortedPages[b];c.type!==CONST.ptPopup&&a.push(c.name)}return a}
function pickPage(a,b){a.term=a.term.split("\t")[0];var c=RegExp("^"+$.ui.autocomplete.escapeRegex(a.term),"i"),d=RegExp($.ui.autocomplete.escapeRegex(a.term),"i"),e=[[],[]],f=RegExp("(?![^&;]+;)(?!<[^<>]*)("+$.ui.autocomplete.escapeRegex(a.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),g;for(g in gGuide.sortedPages){var h=gGuide.sortedPages[g];if(h.type!==CONST.ptPopup){var j;j=c.test(h.name)?0:d.test(h.name)?1:-1;if(0<=j){var k="<b>"+h.name+"</b>: "+decodeEntities(h.text);e[j].push({label:k.replace(f,"<span class=hilite>$1</span>"),
value:h.name})}}}b(e[0].concat(e[1]).slice(0,30))}
function blankGuide(){var a=new TGuide;a.title="My guide";a.notes="Guide created on "+new Date;a.authors=[{name:"My name",organization:"My organization",email:"email@example.com",title:"My title"}];a.jurisdiction="Description of this guide";a.jurisdiction="My jurisdiction";a.version="1";a.sendfeedback=!1;var b=a.addUniquePage("Welcome");b.type="A2J";b.text="Welcome to Access to Justice";b.buttons=[{label:"Continue",next:"",name:"",value:""}];a.steps=[{number:0,text:"Welcome"}];a.vars=[];a.sortedPages=
[b];a.firstPage=b.id;return a}function createBlankGuide(){var a=blankGuide();ws({cmd:"guidesaveas",gid:0,guide:exportXML_CAJA_from_CAJA(a),title:a.title},function(a){if(void 0!==a.error)setProgress(a.error);else{var c=a.gid;ws({cmd:"guides"},function(a){listGuides(a);ws({cmd:"guide",gid:c},guideLoaded)})}})}
function listGuides(a){gGuideID=0;var b=[],c=[];$.each(a.guides,function(a,e){var f='<li class=guide gid="'+e.id+'">'+e.title+"("+e.id+")</li>";e.owned?b.push(f):c.push(f)});$("#guidelist").html('Create a new interview: <ul><li class=guide gid="a2j">Blank Interview</li></ul>Edit one of your existing interviews: <ul>'+b.join("")+"</ul>Open a Sample interview: <ul>"+c.join("")+"</ul>");$("li.guide").click(function(){var a=$(this).attr("gid"),b=$(this).text();$('li.guide[gid="'+a+'"]').html("Loading guide "+
b+AJAXLoader).addClass(".warning");loadNewGuidePrep(b,"");$("#splash").hide();"a2j"===a?createBlankGuide():ws({cmd:"guide",gid:a},guideLoaded)});$("#welcome").dialog("open")}
TGuide.prototype.novicePage=function(a,b){var c="",d=this.pages[b],c=$("<div/>").addClass("tabsPanel editq"),e;form.clear();if(null===d||"undefined"===typeof d)c.append(form.h2("Page not found "+b));else{if(d.type===CONST.ptPopup)e=form.fieldset("Popup info",d),e.append(form.text({label:"Name:",name:"pagename",value:d.name,change:function(a,b){!1===pageRename(b,a)&&$(this).val(b.name)}})),e.append(form.htmlarea({label:"Notes:",value:d.notes,change:function(a,b){b.notes=a}})),e.append(form.htmlarea({label:"Text:",
value:d.text,change:function(a,b){b.text=a}})),e.append(form.pickAudio({label:"Text audio:",placeholder:"mp3 file",value:d.textAudioURL,change:function(a,b){b.textAudioURL=a}}));else{e=form.fieldset("Page info",d);e.append(form.pickStep({label:"Step:",value:d.step,change:function(a,b){b.step=parseInt(a,10)}}));e.append(form.text({label:"Name:",value:d.name,change:function(a,b){a=jQuery.trim(a);!1===pageRename(b,a)&&$(this).val(b.name)}}));"A2J"!==d.type&&e.append(form.h2("Page type/style: "+d.type+
"/"+d.style));e.append(form.htmlarea({label:"Notes:",value:d.notes,change:function(a,b){b.notes=a}}));c.append(e);e=form.fieldset("Question text",d);e.append(form.htmlarea({label:"Text:",value:d.text,change:function(a,b){b.text=a}}));e.append(form.pickAudio({label:"Text audio:",placeholder:"mp3 file",value:d.textAudioURL,change:function(a,b){b.textAudioURL=a}}));e.append(form.text({label:"Learn More prompt:",placeholder:"Learn more",value:d.learn,change:function(a,b){b.learn=a}}));var f=function(a,
b){a.find('[name="helpAudio"]').showit(2!==b);a.find('[name="helpGraphic"]').showit(1===b);a.find('[name="helpReader"]').showit(1<=b);a.find('[name="helpVideo"]').showit(2===b)};e.append(form.pickList({label:"Help style:",value:""!==d.helpVideoURL?2:""!==d.helpImageURL?1:0,change:function(a,b,c){f(c,a)}},[0,"Text",1,"Show Me Graphic",2,"Show Me Video"]));e.append(form.htmlarea({label:"Help:",value:d.help,change:function(a,b){b.help=a}}));e.append(form.pickAudio({name:"helpAudio",label:"Help audio:",
placeholder:"Help audio URL",value:d.helpAudioURL,change:function(a,b){b.helpAudioURL=a}}));e.append(form.pickImage({name:"helpGraphic",label:"Help graphic:",placeholder:"Help image URL",value:d.helpImageURL,change:function(a,b){b.helpImageURL=a}}));e.append(form.pickVideo({name:"helpVideo",label:"Help video:",placeholder:"Help video URL",value:d.helpVideoURL,change:function(a,b){b.helpVideoURL=a}}));e.append(form.htmlarea({name:"helpReader",label:"Help Text Reader:",value:d.helpReader,change:function(a,
b){b.helpReader=a}}));e.append(form.text({label:"Repeating Variable:",placeholder:"",value:d.repeatVar,change:function(a,b){b.repeatVar=a}}));c.append(e);f(e,""!==d.helpVideoURL?2:""!==d.helpImageURL?1:0);e=null;if("A2J"===d.type||0<d.fields.length){var g=new TField;g.type=CONST.ftText;g.label="Label";var h=function(a,b){var c=b.type===CONST.ftNumber||b.type===CONST.ftNumberDollar||b.type===CONST.ftNumberPick||b.type===CONST.ftDateMDY,d=b.type===CONST.ftTextPick,e=b.type!==CONST.ftCheckBox&&b.type!==
CONST.ftCheckBoxNOTA&&b.type!==CONST.ftGender,f=b.type===CONST.ftTextPick||b.type===CONST.ftNumberPick||b.type===CONST.ftDateMDY,g=b.type===CONST.ftNumber||b.type===CONST.ftNumberDollar,h=b.type===CONST.ftText||b.type===CONST.ftTextLong||b.type===CONST.ftNumber||b.type===CONST.ftNumberDollar||b.type===CONST.ftNumberPhone||b.type===CONST.ftNumberZIP,n=b.type===CONST.ftDateMDY;a.find('[name="maxchars"]').showit(h);a.find('[name="min"]').showit(c);a.find('[name="max"]').showit(c);a.find('[name="default"]').showit(e);
a.find('[name="calculator"]').showit(g);a.find('[name="calendar"]').showit(n);a.find('[name="customlist"]').showit(d);a.find('[name="orderlist"]').showit(f)};e=form.fieldset("Fields");e.append(form.listManager({name:"Fields",picker:"Number of fields:",min:0,max:CONST.MAXFIELDS,list:d.fields,blank:g,save:function(a){d.fields=a},create:function(a,b){a.append(form.pickList({label:"Type:",value:b.type,change:function(a,b,c){b.type=a;h(c,b)}},fieldTypesList));a.append(form.htmlarea({label:"Label:",value:b.label,
change:function(a,b){b.label=a}}));a.append(form.text({label:"Variable:",placeholder:"Variable name",value:b.name,change:function(a,b){b.name=jQuery.trim(a)}}));a.append(form.text({label:"Default value:",name:"default",placeholder:"Default value",value:b.value,change:function(a,b){b.value=jQuery.trim(a)}}));a.append(form.checkbox({label:"Required:",checkbox:"",value:b.required,change:function(a,b){b.required=a}}));a.append(form.text({label:"Max chars:",name:"maxchars",placeholder:"Max Chars",value:b.maxChars,
change:function(a,b){b.maxChars=a}}));a.append(form.checkbox({label:"Show Calculator:",name:"calculator",checkbox:"Calculator available?",value:b.calculator,change:function(a,b){b.calculator=a}}));a.append(form.checkbox({label:"Show Calendar:",name:"calendar",checkbox:"Calendar available?",value:b.calendar,change:function(a,b){b.calendar=a}}));a.append(form.text({label:"Min value:",name:"min",placeholder:"min",value:b.min,change:function(a,b){b.min=a}}));a.append(form.text({label:"Max value:",name:"max",
placeholder:"max",value:b.max,change:function(a,b){b.max=a}}));a.append(form.pickXML({label:"External list:",value:b.listSrc,change:function(a,b){b.listSrc=a}}));a.append(form.textArea({label:"Internal list:",value:b.listData,change:function(a,b){b.listData=a}}));a.append(form.htmlarea({label:"If invalid say:",value:b.invalidPrompt,change:function(a,b){b.invalidPrompt=a}}));h(a,b);return a}}));c.append(e)}if("A2J"===d.type||0<d.buttons.length)g=new TButton,e=form.fieldset("Buttons"),e.append(form.listManager({name:"Buttons",
picker:"Number of buttons",min:1,max:CONST.MAXBUTTONS,list:d.buttons,blank:g,save:function(a){d.buttons=a},create:function(a,b){a.append(form.text({value:b.label,label:"Label:",placeholder:"button label",change:function(a,b){b.label=a}}));a.append(form.text({value:b.name,label:"Variable Name:",placeholder:"variable",change:function(a,b){b.name=a}}));a.append(form.text({value:b.value,label:"Default value",placeholder:"Default value",change:function(a,b){b.value=a}}));a.append(form.pickpage({value:b.next,
label:"Destination:",change:function(a,b){b.next=a}}));return a}})),c.append(e);e=form.fieldset("Advanced Logic");e.append(form.codearea({label:"Before:",value:d.codeBefore,change:function(a){d.codeBefore=a}}));e.append(form.codearea({label:"After:",value:d.codeAfter,change:function(a){d.codeAfter=a}}))}c.append(e)}a.append(c);form.finish(c);prefs.showXML&&(a.append("<div class=xml>"+htmlEscape(d.xml)+"</div>"),a.append("<div class=xml>"+htmlEscape(d.xmla2j)+"</div>"));return gPage=d};
function setProgress(a){"undefined"===typeof a&&(a="");$("#CAJAStatus").html(a);""!==a&&trace("setProgress",a)}function loadNewGuidePrep(){$(".pageoutline").html("")}function guideClose(){null!==gGuide&&0!==gGuideID&&guideSave();signin();$("#authortool").hide()}
function guideStart(a){""===a&&(a="tabsPages");$("#authortool").removeClass("hidestart").addClass("authortool").show();$("#welcome").dialog("close");$("#tabsVariables .tabContent, #tabsLogic  .tabContent, #tabsSteps .tabContent, #tabsAbout .tabContent, #tabsConstants .tabContent, #tabsText .tabContent").html("");""===makestr(a)&&(a="PAGE "+gGuide.firstPage);gotoTabOrPage(a);updateTOC();$("#guidetitle").html(gGuide.title);$("#fileupload").addClass("fileupload-processing");$("#fileupload").fileupload({url:CONST.uploadURL+
gGuideID,dataType:"json",done:function(){setTimeout(updateAttachmentFiles,1)},progressall:function(a,c){var d=parseInt(100*(c.loaded/c.total),10);$("#progress .bar").css("width",d+"%")}});updateAttachmentFiles();buildMap()}var attachmentFiles={};
function updateAttachmentFiles(){$.ajax({url:$("#fileupload").fileupload("option","url"),dataType:"json",context:$("#fileupload")[0]}).always(function(){$(this).removeClass("fileupload-processing")}).done(function(a){attachmentFiles=a.files;$("#attachmentFiles").empty();$.each(attachmentFiles,function(a,c){$("<tr><td>"+c.name+"</td><td>"+c.size+"</td></tr>").appendTo("#attachmentFiles")})})}
function updateTOC(){var a=[],b="",c;for(c in gGuide.steps)a[c]="";for(var d in gGuide.sortedPages){var e=gGuide.sortedPages[d],f='<li class="unselectable" rel="PAGE '+e.name.asHTML()+'">'+e.name.asHTML()+' <span class="tip">'+decodeEntities(e.text).substr(0,64)+"</span></li>";e.type===CONST.ptPopup?b+=f:a[e.step]+=f}d="";for(c in gGuide.steps)d+='<li rel="STEP '+c+'">STEP '+gGuide.steps[c].number+". "+gGuide.steps[c].text+"</li><ul>"+a[c]+"</ul>";$(".pageoutline").html("<ul>"+d+'<li rel="tabsPopups">'+
Languages.en("Popups")+"</li><ul>"+b+"</ul></ul>");$(".pageoutline li").click(function(a){a.ctrlKey||$(".pageoutline li").removeClass(SELECTED);$(this).toggleClass(SELECTED)}).dblclick(function(){var a=$(this).attr("rel");$(".pageoutline li").removeClass(SELECTED);$(this).addClass(SELECTED);gotoTabOrPage(a)})}function guideLoaded(a){gGuideID=a.gid;a=$(jQuery.parseXML(a.guide));gGuide=parseXML_Auto_to_CAJA(a);$('li.guide[gid="'+gGuideID+'"]').html(gGuide.title);guideStart("")}
function styleSheetSwitch(a){trace("styleSheetSwitch="+a);a="A2J"===a?"jQuery/themes/"+a.toLowerCase()+"/jquery-ui.css":"http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/"+a.toLowerCase()+"/jquery-ui.css";$("link[title=style]").attr("href",a)}
function editButton(){switch($(this).attr("id")){case "bold":document.execCommand("bold",!1,null);break;case "italic":document.execCommand("italic",!1,null);break;case "indent":document.execCommand("indent",!1,null);break;case "outdent":document.execCommand("outdent",!1,null)}}
function dialogConfirmYesNo(a){var b=$("#dialog-confirm");b.html('<p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>'+a.message+"</p>");b.dialog({title:a.title,resizable:!1,width:350,height:null!==a.height?a.height:240,modal:!0,buttons:{Yes:function(){$(this).dialog("close");a.Yes(a)},No:function(){$(this).dialog("close")}}})}
TGuide.prototype.pageFindReferences=function(a,b){var c=[],d,e=function(d,e,f){var g=!1;d[e]=d[e].replace(/\"POPUP:\/\/(([^\"])+)\"/ig,function(c){c=c.match(/\"POPUP:\/\/(([^\"])+)\"/i)[1];c===a&&(g=!0,null!==b&&(c=htmlEscape(b)));return'"POPUP://'+c+'"'});g&&c.push({name:d.name,field:f,text:d[e]})},f=function(d,e,f){gLogic.pageFindReferences(d[e],a,b).add&&c.push({name:d.name,field:f,text:""})};for(d in this.pages){var g=this.pages[d];e(g,"text","Text");e(g,"help","Help");f(g,"codeBefore","Logic Before");
f(g,"codeAfter","Logic After");for(var h in g.buttons){var j=g.buttons[h];j.next===a&&c.push({name:g.name,field:"Button "+j.label,text:j.label})}}return c};TGuide.prototype.varDelete=function(a){delete this.vars[a.toLowerCase()];gGuide.noviceTab("tabsVariables",!0)};function varAdd(){var a=new TVariable;varEdit(a)}
function varEdit(a){$("#varname").val(a.name);$("#vartype").val(a.type);$("#varcomment").val(a.comment);$("#varrepeating").val(a.repeating);$("#var-edit-form").data(a).dialog({autoOpen:!0,width:450,height:300,modal:!0,close:function(){},buttons:[{text:"Delete",click:function(){var a=$(this).data().name;""!==a&&dialogConfirmYesNo({title:"Delete variable "+a,message:"Delete this variable?",name:a,Yes:function(){$("#var-edit-form").dialog("close");gGuide.varDelete(this.name)}})}},{text:"Close",click:function(){var b=
$("#varname").val();b!==a.name&&(delete gGuide.vars[a.name.toLowerCase()],a.name=b,gGuide.vars[b.toLowerCase()]=a);a.type=$("#vartype").val();a.comment=$("#varcomment").val();a.repeating=$("#varrepeating").val();gGuide.noviceTab("tabsVariables",!0);$(this).dialog("close")}}]})}
TGuide.prototype.buildTabVariables=function(a){var b=form.rowheading(["Name","Type","Comment"]),c=[],d;for(d in this.vars)c.push(this.vars[d]);c.sort(function(a,b){return sortingNaturalCompare(a.name,b.name)});for(d in c)var e=c[d],b=b+form.row([e.name,e.type,e.comment]);a.append('<table class="A2JVars">'+b+"</table>");$("tr",a).click(function(){varEdit(gGuide.vars[$("td:first",this).text().toLowerCase()])})};
var form={id:0,editorAdd:function(a){0===a.parent().parent().find(".texttoolbar").length&&$("#texttoolbar").clone(!0,!0).attr("id","").prependTo(a.parent()).show()},editorRemove:function(){},change:function(a,b){var c=$(a).closest('[name="record"]');$(a).data("data").change.call(a,b,c.data("record"),c)},h1:function(a){return $("<h1>"+a+"</h1>")},h2:function(a){return $("<h2>"+a+"</h2>").click(function(){$(this).next().toggle()})},noteHTML:function(a,b){return'<div class="ui-widget"><div style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><p><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-'+
a+'"></span>'+b+"</div></div>"},note:function(a){return $(form.noteHTML("info",a))},noteAlert:function(a){return $(form.noteHTML("alert",a))},fieldset:function(a,b){return $('<fieldset name="record"><legend >'+a+"</legend></fieldset>").data("record",b)},record:function(a){return $("<div name=record class=record/>").data("record",a)},div:function(){return $("<div />")},checkbox:function(a){var b=$('<div name="'+a.name+'">'+("undefined"!==typeof a.label?"<label>"+a.label+"</label>":"")+'<span  class=editspan > <input class="ui-state-default ui-checkbox-input" type="checkbox" />'+
a.checkbox+"</span></div>");$("input",b).blur(function(){form.change($(this),$(this).is(":checked"))}).attr("checked",!0===a.value).data("data",a);return b},pickpage:function(a){var b=gGuide.pageDisplayName(a.value),c=$(("undefined"!==typeof a.label?"<label>"+a.label+"</label>":"")+'<span class=editspan><input class="  ui-combobox-input editable autocomplete picker page dest" type="text" ></span>');$(".picker",c).blur(function(){var a=$(this).val();form.change($(this),a)}).data("data",a).val(decodeEntities(b));
$(".autocomplete.picker.page",c).autocomplete({source:pickPage,html:!0,change:function(){var a=RegExp("^"+$.ui.autocomplete.escapeRegex($(this).val().split("\t")[0])+"$","i"),b=$(this).val();$.each(gGuide.sortedPages,function(c,g){return g.type!==CONST.ptPopup&&a.test(g.name)?(b=gGuide.pageDisplayName(g.name),!1):!0});$(this).val(b)}}).focus(function(){$(this).autocomplete("search")});return c},text:function(a){var b=$('<div name="'+a.name+'">'+("undefined"!==typeof a.label?"<label>"+a.label+"</label>":
"")+'<span class=editspan> <input class="ui-widget editable" placeholder="'+a.placeholder+'" type="text" /> </span></div>');$("input",b).blur(function(){form.change($(this),$(this).val());trace("saving "+$(this).val())}).val(decodeEntities(a.value)).data("data",a);return b},htmlFix:function(a){return a.replace(/<br\>/gi,"<BR/>")},htmlarea:function(a){form.id++;var b=$('<div name="'+a.name+'">'+("undefined"!==typeof a.label?"<label>"+a.label+"</label>":"")+'<span class=editspan><div contenteditable=true class="  htmledit  text editable taller" id="tinyMCE_'+
form.id+'"  name="'+form.id+'" rows=1>'+a.value+"</div></span></div>");$(".editable",b).focus(function(){$(this).addClass("tallest");form.editorAdd($(this))}).blur(function(){form.editorRemove(this);form.change($(this),form.htmlFix($(this).html()))}).data("data",a);return b},textArea:function(a){var b=$('<div name="'+a.name+'">'+("undefined"!==typeof a.label?"<label>"+a.label+"</label>":"")+'<span class=editspan><textarea  class="     text editable taller" rows=2>'+a.value+"</textarea></span></div>");
$(".editable",b).blur(function(){form.change($(this),$(this).html())}).data("data",a);return b},pickFile:function(){var a=$('<span class="fileinput-button"><button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary"><span class="ui-button-icon-primary ui-icon ui-icon-plus"></span><span class="ui-button-text" >Upload...</span></button><input class="fileupload" type="file" name="files[]"/></span>');$(".fileupload",a).fileupload({url:CONST.uploadURL+gGuideID,dataType:"json",
done:function(a,c){var d=c.result.files[0].name;$(a.target).closest("div").find("input[type=text]").val(d);setTimeout(updateAttachmentFiles,250)},progressall:function(a,c){var d=parseInt(100*(c.loaded/c.total),10);$("#progress .bar").css("width",d+"%")}});return a},pickAudio:function(a){return form.text(a).append(form.pickFile(""))},pickImage:function(a){return form.text(a).append(form.pickFile(""))},pickVideo:function(a){return form.text(a).append(form.pickFile(""))},pickXML:function(a){return form.text(a).append(form.pickFile(""))},
clear:function(){form.codeCheckList=[]},finish:function(){},codeCheckIntervalID:0,codeCheckList:[],codeCheckSoon:function(a){0===form.codeCheckIntervalID&&(form.codeCheckIntervalID=setInterval(form.codeCheckInterval,100));form.codeCheckList.unshift(a)},codeCheckInterval:function(){0===form.codeCheckList.length?(clearInterval(form.codeCheckIntervalID),form.codeCheckIntervalID=0):form.codeCheck(form.codeCheckList.pop())},codeFix:function(a){return a.replace(/<br\>/gi,"<BR/>")},codeCheck:function(a){$(a).removeClass("haserr");
$("SPAN",$(a)).remove();var b=form.codeFix($(a).html()),b=gLogic.translateCAJAtoJS(b),c="",d=[];if(0<b.errors.length){$(a).addClass("haserr");for(var e in b.errors)d=b.errors[e],$("BR:eq("+d.line+")",$(a)).before('<span style="margin-top: 20px; padding: 0 .7em;" class="ui-state-highlight ui-corner-all"><span style="float: left; margin-right: .3em;" class="ui-icon ui-icon-alert"></span>'+d.text+"</span></span>")}if(prefs.showJS){d=[];d.push("JS:");for(e=0;e<b.js.length;e++)d.push(b.js[e]);c+="<BLOCKQUOTE class=Script>"+
d.join("<BR>")+"</BLOCKQUOTE>"}$(".errors",$(a).closest(".editspan")).html(c)},codearea:function(a){form.id++;var b=$("<div>"+("undefined"!==typeof a.label?"<label>"+a.label+"</label>":"")+'<div class=editspan><div spellcheck="false" contenteditable=true spellcheck=false class="text editable taller codeedit"  rows=4>'+a.value+'</div><div class="errors"></div></div></div>');$(".editable",b).blur(function(){form.codeCheckSoon(this);$("SPAN",$(this)).remove();form.change($(this),form.codeFix($(this).html()))}).data("data",
a);form.codeCheckSoon($(".codeedit",b));return b},pickList:function(a,b){var c="",d;for(d=0;d<b.length;d+=2)c+='<option value="'+b[d]+'">'+b[d+1]+"</option>";c=$('<div name="'+a.name+'">'+("undefined"!==typeof a.label?"<label>"+a.label+"</label>":"")+'<span class=editspan><select class="     ui-select-input">'+c+"</select></span></div>");$(".ui-select-input",c).change(function(){form.change($(this),$("option:selected",this).val())}).data("data",a).val(a.value);$(".ui-select-input",c).val()!==String(a.value)&&
($("select",c).append($('<option value="'+a.value+'">{'+a.value+"}</option>")),$(".ui-select-input",c).val(a.value));return c},pickStep:function(a){var b=[],c;for(c=0;c<gGuide.steps.length;c++){var d=gGuide.steps[c];b.push(c,d.number+". "+d.text)}return form.pickList(a,b)},tableRows:function(a,b,c){a=$("<table/>").addClass("list").data("table",a).attr("list",a);var d,e;if("object"===typeof b){d="<tr valign=top>";for(e in b)d+="<th>"+b[e]+"</th>";a.append($(d+"</tr>"))}for(var f in c){b=$("<tr valign=top/>");
!1===c[f].visible&&b.addClass("hidden");for(e in c[f].row)b.append($("<td/>").append(c[f].row[e]));a.append(b);b.data("record",c[f].record)}$("tbody",a).sortable({handle:"td:eq(0) .sorthandle",update:function(){}});return a},tableRowCounter:function(a,b,c,d,e){b=$("<label/>").text(b);for(var f='<select list="'+a+'" class="  ui-select">';c<=d;c++)f+="<option>"+c+"</option>";f+="</select>";return $("<div/>").append(b.after(f).change(function(){form.tableRowAdjust(a,$("option:selected",this).val())}).val(e))},
tableRowAdjust:function(a,b){var c=$('table[list="'+a+'"]'),d=c.data("settings"),e=$("tbody",c),f=$("tr",e).length,g;for(g=0;g<f;g++)$("tr:nth("+g+")",e).showit(g<b);for(g=f;g<b;g++)form.listManagerAddRow(c,$.extend({},d.blank));form.listManagerSave(c)},listManagerSave:function(a){var b=a.data("settings"),c=[];$("tr",a).not(":hidden").each(function(){c.push($(this).data("record"))});b.save(c);$('select[list="'+b.name+'"]').val(c.length)},listManagerAddRow:function(a,b){var c=a.data("settings"),d=
$('<tr valign=top class="ui-corner-all" name="record"/>');d.append($('<td class="editicons"/>').append('<span class="ui-draggable sorthandle ui-icon ui-icon-arrowthick-2-n-s"/><span class="ui-icon ui-icon-circle-plus"/><span class="ui-icon ui-icon-circle-minus"/>'));d.append($("<td/>").append(c.create(form.div(),b)));d.data("record",b);a.append(d)},listManager:function(a){var b=$("<div/>"),c=$("<table/>").addClass("list").data("settings",a).attr("list",a.name);b.append(form.tableRowCounter(a.name,
a.picker,a.min,a.max,a.list.length));var d;console.log(b.html());for(d=0;d<a.list.length;d++)form.listManagerAddRow(c,a.list[d]);console.log(a.list);$("tbody",c).sortable({handle:"td .sorthandle",update:function(a,b){form.listManagerSave(b.item.closest("table"))}});b.append(c);return b},row:function(a){return"<tr valign=top><td>"+a.join("</td><td>")+"</td></tr>"},rowheading:function(a){return"<tr valign=top><th>"+a.join("</th><th>")+"</th></tr>"}},fieldTypesList=[CONST.ftText,"Text",CONST.ftTextLong,
"Text (Long)",CONST.ftTextPick,"Text (Pick from list)",CONST.ftNumber,"Number",CONST.ftNumberDollar,"Number Dollar",CONST.ftNumberSSN,"Number SSN",CONST.ftNumberPhone,"Number Phone",CONST.ftNumberZIP,"Number ZIP Code",CONST.ftNumberPick,"Number (Pick from list)",CONST.ftDateMDY,"Date MM/DD/YYYY",CONST.ftGender,"Gender",CONST.ftRadioButton,"Radio Button",CONST.ftCheckBox,"Check box",CONST.ftCheckBoxNOTA,"Check Box (None of the Above)"];
