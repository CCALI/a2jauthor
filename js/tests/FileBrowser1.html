<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
	CALI Author 5 / A2J Author 5 (CAJA)
	All Contents Copyright The Center for Computer-Assisted Legal Instruction
-->
<HTML xmlns="http://www.w3.org/1999/xhtml">
<link title="style" href="../themes/a2j/jquery-ui.css"  rel="stylesheet" type="text/css"/>
<link  href="../jquery.ui.custom.css" rel="stylesheet" type="text/css" />
<script src="../jquery.1.8.2.min.js" type="text/javascript"></script>
<script src="../jquery.ui.1.9.1.custom.min.js" type="text/javascript"></script>
<script src="../jquery.ui.custom.min.js" type="text/javascript" ></script>
<script src="../ckfinder/ckfinder.js" type="text/javascript" ></script>
<style type="text/css">
-->
</style>
<script type='text/javascript'> 
// 04/2013 Test file browsing feature

	 
function browseXML(field)
{
	 BrowseServer(field,'Lists')
}
function browseImage(field)
{
	 BrowseServer(field,'Images');
}
function BrowseServer(field,kind)
{
	 // You can use the "CKFinder" class to render CKFinder in a page:
	 var finder = new CKFinder( );
	 //finder.basePath = '../';	// The path for the installation of CKFinder (default = "/ckfinder/").
	 finder.selectActionFunction = SetFileField;
	 //CKFinder.config.startupPath ="Guides:/A2J_MobileOnline/";// "Images:/Images/";
	 CKFinder.config.startupPath =kind+":/A2J_MobileOnline/";
	 var api = finder.popup();
	 api.data={field:field,kind:kind};
	 api.openFolder('Guides','/A2J_MobileOnline/')
	 
	 // It can also be done in a single line, calling the "static"
	 // popup( basePath, width, height, selectFunction ) function:
	 // CKFinder.popup( '../', null, null, SetFileField ) ;
	 //
	 // The "popup" function can also accept an object as the only argument.
	 // CKFinder.popup( { basePath : '../', selectActionFunction : SetFileField } ) ;
}

// This is a sample function which is called when a file is selected in CKFinder.
function SetFileField( fileUrl )
{
	 if (this.data.kind=='Images') {
		  
		  browseFileSet(this.data.field,fileUrl)
	 }
	 else
	 {
		  $('#'+this.data.field).val(fileUrl);
	 }
}

function browseImageSet(field,src) {
//	 $('#filePath2').parent().next().find('img').attr('src','http://localhost/js/editors/ckfinder/core/connector/php/connector.php?command=Thumbnail&type=Guides&currentFolder=/A2J_MobileOnline/&langCode=en&FileName=smallestate_screenshot.jpg&')
	 //$('#filePath2').val('A2J_MobileOnline/smallestate_screenshot.jpg');
	 src = src.replace(/^.*[\\\/]/, '');
	 $('#'+field).val(src).parent().next().find('img').attr('src',
		  'http://localhost/js/editors/ckfinder/core/connector/php/connector.php?command=Thumbnail&type=Guides&currentFolder=/A2J_MobileOnline/&langCode=en&FileName='+src+'&')
}

$(document).ready(function()
{
	 //$('#filePath1').parent().find('input[type=button]').click(browseXML);
	 //$('#filePath2').val('A2J_MobileOnline/smallestate_screenshot.jpg');
	 //$('#filePath2').parent().next().find('img').attr('src','http://localhost/js/editors/ckfinder/core/connector/php/connector.php?command=Thumbnail&type=Guides&currentFolder=/A2J_MobileOnline/&langCode=en&FileName=smallestate_screenshot.jpg&')
	 browseImageSet('filePath2','smallestate_screenshot.jpg')
	 //alert($('#filePath2').parent().find('img').html())

});
</script>
<title>File Browser</title><BODY>
<table>
<tr valign=top><td>Choose an interview:</td><td><input id="filePath0" type="text" size="40" /> <input type="button" value="Find XML"    onclick="browseXML('filePath0');" /></td><td></td></tr>
<tr valign=top><td>Pick List</td><td><input id="filePath1" type="text" size="40" /> <input type="button" value="Browse XML"    onclick="browseXML('filePath1');" /></td><td></td></tr>
<tr valign=top><td>Help Image: </td><td><input id="filePath2" type="text" size="40" /> <input type="button" value="Browse Image" onclick="browseImage('filePath2');" /></td><td> <img src="" width=100 height=100/> </td></tr>
<tr valign=top><td>Logo Image: </td><td><input id="filePath3" type="text" size="40" /> <input type="button" value="Browse Image" onclick="browseImage('filePath3');" /> </td><td><img src=""/></td></tr>
</table> 

</BODY>
</HTML>
