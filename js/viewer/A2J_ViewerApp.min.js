/*
	CALI Author 5 / A2J Author 5 (CAJA) 正义 * công lý * правосудие
	All Contents Copyright The Center for Computer-Assisted Legal Instruction
*/
var CONST={devShowTesting:!1,showXML:0,uploadURL:"",uploadGuideURL:"",AJAXLoader:'<span class="loader">&nbsp;</span>"',A2JVersionNum:"5.0.1.12",A2JVersionDate:"2014-03-24",CAVersionNum:"5.0.0",CAVersionDate:"2013-04-15",navigationVarName:"A2J Navigation TF",interviewIncompleteVarName:"A2J Interview Incomplete TF",bookmarkVarName:"A2J Bookmark",historyVarName:"A2J History",interviewIDVarName:"A2J Interview ID",ptPopup:"Popup",ftButton:"button",ftText:"text",ftTextLong:"textlong",ftTextPick:"textpick",
ftNumber:"number",ftNumberDollar:"numberdollar",ftNumberSSN:"numberssn",ftNumberPhone:"numberphone",ftNumberZIP:"numberzip",ftNumberPick:"numberpick",ftDateMDY:"datemdy",ftGender:"gender",ftRace:"race",ftRadioButton:"radio",ftCheckBox:"checkbox",ftCheckBoxNOTA:"checkboxNOTA",ftCheckBoxMultiple:"checkboxmultiple",vtUnknown:"Unknown",vtText:"Text",vtTF:"TF",vtMC:"MC",vtNumber:"Number",vtDate:"Date",vtOther:"Other",MAXFIELDS:9,MAXBUTTONS:3,MAXSTEPS:12,kMinYear:1900,ordDefault:"",ordAscending:"ASC",ordDescending:"DESC",
qIDNOWHERE:"",qIDSUCCESS:"SUCCESS",qIDFAIL:"FAIL",qIDEXIT:"EXIT",qIDBACK:"BACK",qIDRESUME:"RESUME",HotDocsANXHeader_UTF8_str:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n',ScriptLineBreak:"<BR/>"};function TVariable(){this.comment=this.type=this.name="";this.repeating=!1;this.values=[null];return this}function TText(){this.text="";return this}function TButton(){this.value=this.name=this.next=this.label="";return this}
function TField(){this.value=this.name=this.label=this.type="";this.required=!1;this.max=this.min=this.order=this.invalidPromptAudio=this.invalidPrompt="";this.calculator=this.calendar=!1;this.sample=this.listData=this.listSrc=this.maxChars="";return this}
TField.prototype.fieldTypeToVariableType=function(){var a;switch(this.type){case CONST.ftText:case CONST.ftTextLong:case CONST.ftNumberSSN:case CONST.ftNumberPhone:case CONST.ftNumberZIP:a=CONST.vtText;break;case CONST.ftRadioButton:case CONST.ftGender:case CONST.ftTextPick:case CONST.ftCheckBoxMultiple:a=CONST.vtMC;break;case CONST.ftCheckBox:case CONST.ftCheckBoxNOTA:a=CONST.vtTF;break;case CONST.ftNumber:case CONST.ftNumberDollar:case CONST.ftNumberPick:a=CONST.vtNumber;break;case CONST.ftDateMDY:a=
CONST.vtDate;break;default:a=CONST.vtText}return a};function TScript(){this.code=this.event="";return this}function TStep(){this.text=this.number="";return this}function TConstant(){this.text=this.name="";return this}
function TPage(){this.codeAfter=this.codeBefore=this.repeatVar=this.helpVideoURL=this.helpImageURL=this.helpReader=this.helpAudioURL=this.help=this.learn=this.notes=this.textAudioURL=this.text=this.name="";this.fields=[];this.buttons=[];this.step=0;this.style=this.type="";this.mapy=this.mapx=0;this.xml=this.mapBranches=null;return this}function TAuthor(){this.email=this.organization=this.title=this.name="";return this}
function TGuide(){this.tool="CAJA";this.toolversion="2012-12-12";this.avatar="";this.guideGender="Female";this.notes=this.modifydate=this.language=this.jurisdiction=this.description=this.credits=this.createdate=this.copyrights=this.completionTime="";this.sendfeedback=!1;this.mobileFriendly=this.endImage=this.logoImage=this.viewer=this.version=this.title=this.subjectarea=this.emailContact="";this.authors=[];this.exitPage=this.firstPage="";this.steps=[];this.pages={};this.constants={};this.assets=[];
this.templates="";this.vars={};this.filename="";this.sortedPages=[];this.lastSaveXML="";this.attachedFiles={};return this}TGuide.prototype.genderVarName="User Gender";TGuide.prototype.goodGender=function(a){return"Male"===a?"M":"Female"===a?"F":""};TGuide.prototype.getClientGender=function(){return this.goodGender(this.varGet(this.genderVarName))};
TGuide.prototype.sortPages=function(){this.sortedPages=[];for(var a in this.pages)this.pages.hasOwnProperty(a)&&this.sortedPages.push(this.pages[a]);this.sortedPages=this.sortedPages.sort(function(a,c){return sortingNaturalCompare(a.name,c.name)})};TGuide.prototype.historyToXML=function(){return"<LABELS/>"};
TGuide.prototype.pageDisplayName=function(a){var b="";this.pages[a]?b=this.pages[a].name:(b={},b[CONST.qIDNOWHERE]=lang.qIDNOWHERE,b[CONST.qIDSUCCESS]=lang.qIDSUCCESS,b[CONST.qIDFAIL]=lang.qIDFAIL,b[CONST.qIDEXIT]=lang.qIDEXIT,b[CONST.qIDBACK]=lang.qIDBACK,b[CONST.qIDRESUME]=lang.qIDRESUME,b="undefined"===typeof b[a]?lang.UnknownID.printf(a,a):a+"\t"+b[a]);return b};
TVariable.prototype.trace=function(a){gLogic.trace(a+":"+traceTag("var",this.name)+", "+this.type+", "+(this.repeating?"REPEATING":"")+", "+this.comment)};TGuide.prototype.varExists=function(a){a=jQuery.trim(a);a=a.toLowerCase();a=this.vars[a];return"undefined"===typeof a?null:a};
TGuide.prototype.varGet=function(a,b){var c=this.varExists(a);if("undefined"===typeof b||null===b||""===b)b=1;if(null===c)return gLogic.trace("Undefined variable: "+traceTag("var",a)+(0===b?"":traceTag("varidx",b))),c;var d=c.values[b];switch(c.type){case CONST.vtNumber:d=parseFloat(d);break;case CONST.vtTF:d=0<d||!0===d||"true"===d}return d};
TGuide.prototype.varCreate=function(a,b,c,d){a=jQuery.trim(a);var e=a.toLowerCase(),f=new TVariable;f.name=a;f.repeating=c;f.type=b;f.comment=d;return this.vars[e]=f};
TGuide.prototype.varSet=function(a,b,c){var d=this.varExists(a);null===d&&(d=this.varCreate(a,CONST.vtText,!("undefined"===typeof c||null===c||""===c||0===c),""));if("undefined"===typeof c||null===c||""===c)c=0;0===c?(d.values[1]!==b&&(gLogic.indent++,gLogic.trace(traceTag("var",a)+"="+traceTag("val",b)),gLogic.indent--),d.values[1]=b):(d.values[c]!==b&&(gLogic.indent++,gLogic.trace(traceTag("var",a+"#"+c)+traceTag("val",b)),gLogic.indent--),d.values[c]=b)};
TGuide.prototype.variableToField=function(a){var b=this.pages,c;for(c in b)if(b.hasOwnProperty(c)){var d=b[c],e;for(e=0;e<d.fields.length;e++){var f;f=d.fields[e];if(0===strcmp(f.name,a))return f}}return null};
var gGuide,gPage,gGuideID,gUserID=0,gUserNickName="User",gGuidePath,gEnv="",gEnv=0===String(window.location).indexOf("http://authorbeta.a2jauthor.org")?"BETA":0===String(window.location).indexOf("http://authordev.a2jauthor.org")?"DEV":0===String(window.location).indexOf("http://localhost/")?"LOCAL":"",gStartArgs={templateURL:"",fileDataURL:"",getDataURL:"",setDataURL:"",exitURL:"",logURL:"",errRepURL:""};var html={version:"1",row:function(a){return"<tr valign=top><td>"+a.join("</td><td>")+"</td></tr>"},rowheading:function(a){return"<thead><tr valign=top><th>"+a.join("</th><th>")+"</th></tr></thead>"}};
function dialogConfirmYesNo(a){var b=$("#dialog-confirm");b.html('<p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>'+a.message+"</p>");b.dialog({title:a.title,resizable:!1,width:350,height:null!==a.height?a.height:240,modal:!0,buttons:{Yes:function(){$(this).dialog("close");a.Yes(a)},No:function(){$(this).dialog("close")}}})}
function dialogAlert(a){"string"===typeof a&&(a={body:a});"undefined"===typeof a.title&&(a.title="Alert");"undefined"===typeof a.width&&(a.width=350);"undefined"===typeof a.height&&(a.height=250);"undefined"===typeof a.body&&(a.body="An error occurred.");var b=$("#dialog-confirm");b.html('<p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>'+a.body+"</p>");b.dialog({title:a.title,resizable:!0,width:a.width,height:a.height,modal:!0,buttons:{OK:function(){$(this).dialog("close")}}})}
function urlSplit(a){var b={path:"",file:"",params:"",hash:""},c;a=a.replace("\\","/","gi");c=a.lastIndexOf("#");0<=c&&(b.hash=a.substr(c+1),a=a.substr(0,c));c=a.lastIndexOf("?");0<=c&&(b.params=a.substr(c+1),a=a.substr(0,c));c=a.lastIndexOf("/");0<=c?(b.file=a.substr(c+1),b.path=a.substr(0,c+1)):b.file=a;return b}function propCount(a){var b=0,c;for(c in a)b++;return b}
function traceTag(a,b){if("val"===a)if(""===b||null===b)b="blank",a="valBlank";else if(!0==b||"true"==b)a="valT";else if(!1==b||"false"==b)a="valF";return"<span class="+a+">"+htmlEscape(b)+"</span>"}function trace(a){if("undefined"!==typeof console){var b="",c;for(c=0;c<arguments.length;c++){var d=arguments[c];"object"===typeof d?b+=d:"function"!==typeof d&&(b+=d);""!==b&&(b+=", ")}console.log(b)}}function prettyXML(a){a=htmlEscape(a);return a=a.split("&lt;A").join("<BR>&lt;A")}
function cloneObject(a){var b={},c;for(c in a)b[c]="object"===typeof a[c]?cloneObject(a[c]):a[c];return b}$.fn.showit=function(a){return $(this).removeClass("hidden").addClass(a?"":"hidden")};String.prototype.asHTML=function(){return htmlEscape(this)};String.prototype.stripHTML=function(){return $("<div>"+this+"</div>").text()};String.prototype.ellipsis=function(a){return this.substring(0,a)+(this.length>a?"…":"")};
function htmlEscape(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function isBlankOrNull(a){return null===a||"undefined"===typeof a||""===a}function makestr(a){return null===a||"undefined"===typeof a?"":a}function textToBool(a,b){return null===a||"undefined"===typeof a?b:1===a||"1"===a||"true"===String(a).toLowerCase()}function aie(a,b,c){null!==c&&(a[b]=c)}
String.prototype.printf=function(){var a=this,b,c;for(b=0;b<arguments.length;b++)c=RegExp("\\{"+(b+1)+"\\}","gi"),a=a.replace(c,arguments[b]);return a};function strcmp(a,b){if(a===b)return 0;if(null===a||"undefined"===typeof a)a="";if(null===b||"undefined"===typeof b)b="";a=a.toUpperCase();b=b.toUpperCase();return a<b?-1:a>b?1:0}function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}function jquote(a){return'"'+a.replace(/"/gi,'\\"')+'"'}
function pickHilite(a,b){return a.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+$.ui.autocomplete.escapeRegex(b)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<span class=hilite>$1</span>")}var gJS2XML_SKIP={skip:!0};
function js2xml(a,b){function c(a,b,c){return""===c?""===b?"":"<"+a.toUpperCase()+b+"/>":"<"+a.toUpperCase()+b+">"+c+"</"+a.toUpperCase()+">"}if("object"===typeof b){var d="",e="",f;for(f in b)0<=parseInt(f,10)?e+=js2xml("",b[f]):"_"===f.substr(0,1)?""!==b[f]&&b[f]!==gJS2XML_SKIP&&(d+=" "+f.substr(1)+'="'+htmlEscape(b[f])+'"'):e="XML_"===f.substr(0,4)?e+c(f.substr(4),"",b[f]):e+js2xml(f,b[f]);""!==a&&(e=c(a,d,e))}else e=c(a,"",htmlEscape(b));return e.replace(/&nbsp;/g,"&#160;")}
function props(a){var b="",c;for(c in a)"object"===typeof a[c]?b+=c+"={"+props(a[c])+"}, ":"function"!==typeof a[c]&&(b+=c+"="+a[c]+", ");return b}function propsJSON(a,b){return propsJSON_(a,0,b)}
function propsJSON_(a,b,c){var d="",d='<div class="json indent">';if("object"===typeof c)if(d+=a+":",null===c)d+="null\n";else{a="";for(var e in c)parseInt(e,10),a+=propsJSON_(e,b+1,c[e]);d=""===a?d+"{}\n":d+("{\n"+a+"}\n")}else"function"===typeof c?d="":"string"===typeof c?(b=htmlEscape(c),d=1024>b.length?d+(a+':"'+b+'"\n'):d+(a+':"'+b.substr(0,1024)+'"...\n')):d+=a+":"+c+"\n";return d+"</div>"}function cr2P(a){return""===a?"":"<P>"+a.split("\n").join("</P><P>")+"</P>"}
function mdyTodmy(a){var b="";""!==makestr(a)&&(a=a.split("/"),b=a[1]+"/"+a[0]+"/"+a[2]);return b};var REG={LOGIC_SET:/set\s+(.+)/i,LOGIC_SETTO:/set\s+([\w#]+|\[.+\])\s*?(=|TO)\s?(.+)/i,LOGIC_GOTO:/^goto\s+\"(.+)\"/i,LOGIC_GOTO2:/^goto\s+(.+)/i,LOGIC_PRINT:/print\s+(.+)/i,LOGIC_ELSEIF:/^else if\s+(.+)/i,LOGIC_IF:/^if\s+(.+)/i,LOGIC_LE:/\<\=\=/gi,LOGIC_NE:/\<\>/gi,LINK_POP:/\"POPUP:\/\/(([^\"])+)\"/ig,LINK_POP2:/\"POPUP:\/\/(([^\"])+)\"/i};String.prototype.simpleHash=function(){return String(this).split("").reduce(function(a,b){a=(a<<5)-a+b.charCodeAt(0);return a&a},0)};
function sortingNaturalCompare(a,b){function c(a){for(var b=[],c=0,d=-1,e=0,g,f;g=(f=a.charAt(c++)).charCodeAt(0);)g=46==g||48<=g&&57>=g,g!==e&&(b[++d]="",e=g),b[d]+=f;return b}var d=c(a),e=c(b),f;for(f=0;d[f]&&e[f];f++)if(d[f]!==e[f]){var g=Number(d[f]),h=Number(e[f]);return g==d[f]&&h==e[f]?g-h:d[f]>e[f]?1:-1}return d.length-e.length}
var decodeEntities=function(){var a=document.createElement("div");return function(b){b&&"string"===typeof b&&(b=b.replace(/<script[^>]*>([\S\s]*?)<\/script>/gmi,""),b=b.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gmi,""),a.innerHTML=b,b=a.textContent,a.textContent="");return b}}();var lang={Language:"",Male:"",Female:"",GoBack:"",GoNext:"",MyProgress:"",SaveAndExit:"",ResumeExit:"",Comment:"",SendFeedback:"",qIDNOWHERE:"",qIDSUCCESS:"",qIDFAIL:"",qIDEXIT:"",qIDBACK:"",qIDRESUME:"",UnknownID:"",scriptErrorMissingPage:"",scriptErrorUnhandled:"",scriptErrorEndMissing:""};
function TLanguages(){this.defaultLanguage="en";this.regional=[];this.set=function(a){"undefined"===typeof this.regional[a]&&(a="en");trace("TLanguages.set",a);a=this.regional[a];lang={};for(var b in a)a.hasOwnProperty(b)&&(lang[b]=String(a[b]));a=this.regional.en;for(b in a)a.hasOwnProperty(b)&&""===makestr(lang[b])&&(lang[b]=String(a[b]))};this.en=function(a){return a};return this}var Languages=new TLanguages;
Languages.regional.en={locale:"en",Language:"English",LanguageEN:"English",AskYesNo_Yes:"Yes",AskYesNo_No:"No",Close:"Close",Comment:"Comment",GoBack:"BACK",GoNext:"NEXT",LearnMore:"Learn More",MyProgress:"MY PROGRESS",ProvideFeedbackOrComment:"Provide feedback or comment on this page",SaveAndExit:"EXIT",ResumeExit:"RESUME",SendFeedback:"SEND FEEDBACK",SoundIsOff:"SOUND IS OFF",SoundIsOn:"SOUND IS ON",SoundPlay:"Play",SoundStop:"Stop",WhatDoYouMean:"What do you mean?",Continue:"Continue",Exit:"Exit",
Male:"Male",Female:"Female",ChooseListNumber:"Choose:",ChooseListText:"Choose from this list:",CheckBoxNOTALabel:"None of the above",ZoomNormal:"Normal Size",ZoomFull:"Full screen",TextEnlarge:"Enlarge text box",TextShrink:"Shrink text box",TextSizeLetter:"A",UploadAnswers:"Exiting. Please wait...",CalcClear:"Clear",CalcEnter:"Enter",MonthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",MonthNamesLong:"January,February,March,April,May,June,July,August,September,October,November,December",
FieldPrompts_ResponseRequired:"You must provide a response in the blanks next to the red labels before you can continue.",FieldPrompts_SelectionRequired:"You must make a selection before you can continue.",FieldPrompts_text:"You must type a response in the highlighted space before you can continue.",FieldPrompts_textlong:"You must type a response in the highlighted space before you can continue.",FieldPrompts_textpick:"You must make a selection from the highlighted space before you can continue.",
FieldPrompts_number:"You must type a number in the highlighted space before you can continue.",FieldPrompts_numberdollar:"You must type a dollar amount in the highlighted space before you can continue.",FieldPrompts_numberssn:"You must type a social security number in the highlighted spaces before you can continue.",FieldPrompts_numberphone:"You must type a phone number in the highlighted spaces before you can continue.",FieldPrompts_numberzip:"You must type a zip code in the highlighted space before you can continue.",
FieldPrompts_numberpick:"You must select a number from the highlighted space before you can continue.",FieldPrompts_datemdy:"You must enter a month, day and year in the highlighted spaces before you can continue.",FieldPrompts_gender:"You must choose either male or female from the highlighted selection before you can continue.",FieldPrompts_radio:"You must choose a response from the highlighted selection before you can continue.",FieldPrompts_checkbox:"You must select one or more checkboxes to continue.",
FieldPrompts_checkboxNOTA:'Please select one or more checkboxes or "None of the above" to continue.',Ordinals_1:"first",Ordinals_2:"second",Ordinals_3:"third",Ordinals_4:"fourth",Ordinals_5:"fifth",Ordinals_6:"sixth",Ordinals_7:"seventh",Ordinals_8:"eighth",Ordinals_9:"ninth",Ordinals_10:"tenth",Ordinals_11:"eleventh",Ordinals_12:"twelfth",Ordinals_13:"13th",tabAbout:"About",tabInterview:"Interview",tabVariables:"Variables",tabConstants:"Constants",tabSteps:"Steps",qIDNOWHERE:"[no where]",qIDSUCCESS:"[Success - Process Form]",
qIDFAIL:"[Exit - User does not qualify]",qIDEXIT:"[Exit - Save Incomplete Form]",qIDBACK:"[Back to prior question]",qIDRESUME:"[Exit - Resume interview]",UnknownID:"[Unknown id [{1}]: [{2}",scriptErrorMissingPage:'Page "{1}" does not exist.',scriptErrorUnhandled:"Unknown command: {1}",scriptErrorEndMissing:"Missing an EndIf",app:""};
Languages.regional.es={locale:"es",Language:"Español",LanguageEN:"Spanish",AskYesNo_Yes:"Si",AskYesNo_No:"No",Close:"Cerrar",Comment:"Comentario",GoBack:"Anterior",GoNext:"Siguiente",LearnMore:"Aprender más",MyProgress:"Mi Progreso",ProvideFeedbackOrComment:"Enviar comentarios y sugerencias",SaveAndExit:"Salida",ResumeExit:"Anterior",SendFeedback:"Enviar comentarios",SoundIsOff:"Sonido está apagado",SoundIsOn:"Sonido está encendido",SoundPlay:"Prender",SoundStop:"Parar",WhatDoYouMean:"¿Qué significas?",
Continue:"continúe",Exit:"Salida",Male:"Masculino",Female:"Femenina",ChooseListNumber:"Escoja:",ChooseListText:"Escoja de esta lista:",CheckBoxNOTALabel:"ninguna de arriba",ZoomNormal:"tamaño normal",ZoomFull:"pantalla completa",TextEnlarge:"ampliar el cuadro de texto",TextShrink:"reducir el cuadro de texto",TextSizeLetter:"A",UploadAnswers:"Saliendo. Por favor, espere...",CalcClear:"Clear!",CalcEnter:"Enter!",MonthNamesShort:"ene,feb,mar,abr,may,jun,jul,ago,sep,oct,nov,dic",MonthNamesLong:"enero,febrero,marzo,abril,mayo,junio,julio,agosto,septiembre,octubre,noviembre,diciembre",
FieldPrompts_ResponseRequired:"You must provide a response in the blanks next to the red labels before you can continue.",FieldPrompts_SelectionRequired:"You must make a selection before you can continue.",FieldPrompts_text:"You must type a response in the highlighted space before you can continue.",FieldPrompts_textlong:"You must type a response in the highlighted space before you can continue.",FieldPrompts_textpick:"You must make a selection from the highlighted space before you can continue.",
FieldPrompts_number:"You must type a number in the highlighted space before you can continue.",FieldPrompts_numberdollar:"You must type a dollar amount in the highlighted space before you can continue.",FieldPrompts_numberssn:"You must type a social security number in the highlighted spaces before you can continue.",FieldPrompts_numberphone:"You must type a phone number in the highlighted spaces before you can continue.",FieldPrompts_numberzip:"You must type a zip code in the highlighted space before you can continue.",
FieldPrompts_numberpick:"You must select a number from the highlighted space before you can continue.",FieldPrompts_datemdy:"You must enter a month, day and year in the highlighted spaces before you can continue.",FieldPrompts_gender:"You must choose either male or female from the highlighted selection before you can continue.",FieldPrompts_radio:"You must choose a response from the highlighted selection before you can continue.",FieldPrompts_checkbox:"Please select one or more checkboxes to continue.",
FieldPrompts_checkboxNOTA:'Please select one or more checkboxes or "None of the above" to continue.',Ordinals1:"primero",Ordinals2:"segundo",Ordinals3:"tercero",Ordinals4:"cuarto",Ordinals5:"quinto",Ordinals6:"sexto",Ordinals7:"séptimo",Ordinals8:"octavo",Ordinals9:"noveno",Ordinals10:"décimo",Ordinals11:"undécimo",Ordinals12:"duodécimo",Ordinals13:"decimotecero",Ordinals14:"decimocuarto",Ordinals15:"decimoquinto",Ordinals16:"decimosexto",Ordinals17:"decimoséptimo",Ordinals18:"decimoctavo",Ordinals19:"decimonoveno:",
Ordinals20:"vigésimo",Ordinals21:"vigésimoprimero",Ordinals22:"vigésimosegundo",Ordinals23:"vigésimotercero",Ordinals24:"vigésimocuarto",Ordinals25:"vigésimoquinto",Ordinals26:"vigésimosexto",Ordinals27:"vigésimoséptimo",Ordinals28:"vigésimooctavo",Ordinals29:"vigésimonoveno",Ordinals30:"trigésimo",Ordinals31:"trigésimoprimero",Ordinals32:"trigésimosegundo",Ordinals33:"trigésimotercero",Ordinals34:"trigésimocuarto",Ordinals35:"trigésimoquinto",Ordinals36:"trigésimosexto",Ordinals37:"trigésimoséptimo",
Ordinals38:"trigésimooctavo",Ordinals39:"trigésimonoveno",Ordinals40:"cuadragésimo",Ordinals41:"cuadragésimoprimero",Ordinals42:"cuadragésimosegundo",Ordinals43:"cuadragésimotercero",Ordinals44:"cuadragésimocuarto",Ordinals45:"cuadragésimoquinto",Ordinals46:"cuadragésimosexto",Ordinals47:"cuadragésimoséptimo",Ordinals48:"cuadragésimooctavo",Ordinals49:"cuadragésimonoveno",Ordinals50:"quincuagésimo"};
Languages.regional.vi={locale:"vi",Language:"Tiếng Anh",LanguageEN:"Vietnamese",AskYesNo_Yes:"Có",AskYesNo_No:"Không",Close:"Đóng",Comment:"Ý kiến/lời chú thích",GoBack:"TRỞ LẠI",GoNext:"TIẾP TỤC",LearnMore:"Tìm hiểu thêm",MyProgress:"TIẾN ĐỘ",ProvideFeedbackOrComment:"Trả lời của tôi hoặc là ý kiến trong trang này",SaveAndExit:"RỜI KHỎI TRANG",ResumeExit:"TRỞ LẠI TRANG ĐIỀN LẦN CUỐI CÙNG",SendFeedback:"GỬI CÂU TRẢ LỜI",SoundIsOff:"TẮT ÂM THANH",SoundIsOn:"MỞ ÂM THANH",SoundPlay:"Bắt đầu",SoundStop:"Ngưng",
WhatDoYouMean:"Quý vị có ý gì?",Continue:"Tiếp tục",Exit:"Rời khỏi trang",Male:"Nam",Female:"Nữ",ChooseListNumber:"Chọn",ChooseListText:"Chọn từ danh sách",CheckBoxNOTALabel:"Không có câu nào được áp dụng",ZoomNormal:"Chữ cỡ bình thưởng",ZoomFull:"Nguyên màn hình",TextEnlarge:"Làm chữ lớn hơn",TextShrink:"Làm chữ nhỏ hơn",TextSizeLetter:"A",UploadAnswers:"Rời khỏi trang. Xin đợi một chút",CalcClear:"Xóa",CalcEnter:"Vào trong",MonthNamesShort:"Tháng 1,Tháng 2,Tháng 3,Tháng 4,Tháng 5,Tháng 6,Tháng 7,Tháng 8,Tháng 9,Tháng 10,Tháng 11,Tháng 12",
MonthNamesLong:"Tháng 1,Tháng 2,Tháng 3,Tháng 4,Tháng 5,Tháng 6,Tháng 7,Tháng 8,Tháng 9,Tháng 10,Tháng 11,Tháng 12",FieldPrompts_ResponseRequired:"Quý vị phải điền một câu trả lời vào ô trống ngay bên cạnh nhãn hiệu màu đỏ trước khi quý vị có thể tiếp tục.",FieldPrompts_SelectionRequired:"Quý vị phải chọn một câu trả lời trước khi quý vị có thể tiếp tục.",FieldPrompts_text:"Quý vị phải trả lời bằng cách đánh máy vào chỗ được tô đậm trước khi quý vị có thể tiếp tục.",FieldPrompts_textlong:"Quý vị phải trả lời bằng cách đánh máy vào chỗ được tô đậm trước khi quý vị có thể tiếp tục.",
FieldPrompts_textpick:"Quý vị phải chọn một câu trả lời từ chỗ được tô đậm trước khi quý vị tiếp tục.",FieldPrompts_number:"Quý vị phải đánh một con số vào trong chỗ được tô đậm trước khi quý vị có thể tiếp tục.",FieldPrompts_numberdollar:"Quý vị phải đánh số tiền vào chỗ được tô đậm trước khi quý vị có thể được tiếp tục.",FieldPrompts_numberssn:"Quý vị phải đánh số an sinh xã hội vào chỗ được tô đậm trước khi quý vị có thể tiếp tục.",FieldPrompts_numberphone:"Quý vị phải đánh vào số điện thoại vào chỗ được tô đậm trước khi quý vị có thể tiếp tục. ",
FieldPrompts_numberzip:"Quý vị phải đánh vào số ZIP vào chỗ được tô đậm trước khi quý vị có thể tiếp tục. ",FieldPrompts_numberpick:"Quý vị phải chọn một số từ chỗ được tô đậm trước khi quý vị có thể tiếp tục. ",FieldPrompts_datemdy:"Xin điền tháng, ngày, và năm vào chỗ được tô đậm trước khi quý vị có thể tiếp tục. ",FieldPrompts_gender:"Quý vị phải chọn nam hay nữ từ chỗ được tô đậm trước khi quý vị có thể tiếp tục. ",FieldPrompts_radio:"Quý vị phải chọn một câu trả lời từ chỗ được tô đậm trước khi quý vị tiếp tục.",
FieldPrompts_checkbox:"Quý vị phải đánh dấu vào một ô trống hoặc nhiều hơn để tiếp tục. ",FieldPrompts_checkboxNOTA:'Xin đánh dấu vào một ô trống hoặc nhiều hơn hoặc chọn "Không có câu nào áp dụng" để tiếp tục. ',Ordinals1:"Một",Ordinals2:"Hai",Ordinals3:"Ba",Ordinals4:"Bốn",Ordinals5:"Năm ",Ordinals6:"Sáu",Ordinals7:"Bảy ",Ordinals8:"Tám",Ordinals9:"Chín",Ordinals10:"Mười",Ordinals11:"Mười một",Ordinals12:"Mười hai",Ordinals13:"Mười ba"};
Languages.regional["zh-cn"]={locale:"zh-cn",Language:"英语",LanguageEN:"Simplified Chinese",AskYesNo_Yes:"是",AskYesNo_No:"否",Close:"关闭",Comment:"评论",GoBack:"返回/上一页",GoNext:"前进/下一页",LearnMore:"了解更多",MyProgress:"我的进度",ProvideFeedbackOrComment:"在本页作出回应或评论",SaveAndExit:"退出",ResumeExit:"恢复",SendFeedback:"送出回应",SoundIsOff:"关闭音效",SoundIsOn:"打开音效",SoundPlay:"播放",SoundStop:"停止",WhatDoYouMean:"你的意思是？",Continue:"继续",Exit:"退出",Male:"男性",Female:"女性",ChooseListNumber:"选择：",ChooseListText:"从以下选项选择",CheckBoxNOTALabel:"以上皆非",
ZoomNormal:"正常尺寸",ZoomFull:"全荧幕",TextEnlarge:"放大文字框",TextShrink:"缩小文字框",TextSizeLetter:"大",UploadAnswers:"退出中，请稍候…",CalcClear:"清除",CalcEnter:"输入",MonthNamesShort:"一月, 二月, 三月, 四月, 五月, 六月, 七月, 八月, 九月, 十月, 十一月, 十二月,",MonthNamesLong:"一月, 二月, 三月, 四月, 五月, 六月, 七月, 八月, 九月, 十月, 十一月, 十二月",FieldPrompts_ResponseRequired:"你必须先在红色标签旁的空位上作出回应才能继续下去",FieldPrompts_SelectionRequired:"你必须作出一项选择才能继续下去",FieldPrompts_text:"你必须先在黃色标记的栏位上作出回应才能继续下去",FieldPrompts_textlong:"你必须先在黃色标记的栏位上作出回应才能继续下去",FieldPrompts_textpick:"你必须先在黃色标记的栏位上作出一项选择才能继续下去",
FieldPrompts_number:"你必须先在黃色标记的栏位上输入一个号码才能继续下去",FieldPrompts_numberdollar:"你必须先在黃色标记的栏位上输入一个价钱才能继续下去",FieldPrompts_numberssn:"你必须先在黃色标记的栏位上输入社会安全号码才能继续下去",FieldPrompts_numberphone:"你必须先在黃色标记的栏位上输入一个电话号码才能继续下去",FieldPrompts_numberzip:"你必须先在黃色标记的栏位上输入一个邮区号码才能继续下去",FieldPrompts_numberpick:"你必须先在黃色标记的栏位上选择一个号码才能继续下去",FieldPrompts_datemdy:"你必须先在黃色标记的栏位上输入月、日及年份才能继续下去",FieldPrompts_gender:"你必须先在黃色标记的栏位上选择男或女才能继续下去",FieldPrompts_radio:"你必须先在黃色标记的栏位上选择一项回应才能继续下去",FieldPrompts_checkbox:"你必须先在复选框里选择一项或以上才能继续下去",
FieldPrompts_checkboxNOTA:"请在复选框选择一项或以上，或选择“以上皆非”以继续下去",Ordinals1:"第一",Ordinals2:"第二",Ordinals3:"第三",Ordinals4:"第四",Ordinals5:"第五",Ordinals6:"第六",Ordinals7:"第七",Ordinals8:"第八",Ordinals9:"第九",Ordinals10:"第十",Ordinals11:"第十一",Ordinals12:"第十二",Ordinals13:"第十三"};
$.datepicker&&(jQuery(function(a){a.datepicker.regional.en=a.datepicker.regional[""]}),jQuery(function(a){a.datepicker.regional.es={closeText:"Cerrar",prevText:"&#x3c;Ant",nextText:"Sig&#x3e;",currentText:"Hoy",monthNames:"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),monthNamesShort:"Ene Feb Mar Abr May Jun Jul Ago Sep Oct Nov Dic".split(" "),dayNames:"Domingo Lunes Martes Mi&eacute;rcoles Jueves Viernes S&aacute;bado".split(" "),dayNamesShort:"Dom Lun Mar Mi&eacute; Juv Vie S&aacute;b".split(" "),
dayNamesMin:"Do Lu Ma Mi Ju Vi S&aacute;".split(" "),weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}}),jQuery(function(a){a.datepicker.regional.vi={closeText:"Đóng",prevText:"&#x3c;Trước",nextText:"Tiếp&#x3e;",currentText:"Hôm nay",monthNames:"Tháng Một;Tháng Hai;Tháng Ba;Tháng Tư;Tháng Năm;Tháng Sáu;Tháng Bảy;Tháng Tám;Tháng Chín;Tháng Mười;Tháng Mười Một;Tháng Mười Hai".split(";"),monthNamesShort:"Tháng 1;Tháng 2;Tháng 3;Tháng 4;Tháng 5;Tháng 6;Tháng 7;Tháng 8;Tháng 9;Tháng 10;Tháng 11;Tháng 12".split(";"),
dayNames:"Chủ Nhật;Thứ Hai;Thứ Ba;Thứ Tư;Thứ Năm;Thứ Sáu;Thứ Bảy".split(";"),dayNamesShort:"CN T2 T3 T4 T5 T6 T7".split(" "),dayNamesMin:"CN T2 T3 T4 T5 T6 T7".split(" "),weekHeader:"Tu",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}}),jQuery(function(a){a.datepicker.regional["zh-cn"]={closeText:"关闭",prevText:"&#x3c;上月",nextText:"下月&#x3e;",currentText:"今天",monthNames:"一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" "),monthNamesShort:"一 二 三 四 五 六 七 八 九 十 十一 十二".split(" "),
dayNames:"星期日 星期一 星期二 星期三 星期四 星期五 星期六".split(" "),dayNamesShort:"周日 周一 周二 周三 周四 周五 周六".split(" "),dayNamesMin:"日一二三四五六".split(""),weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"}}));function fixPath(a){if(0===a.indexOf("http"))return a;var b=gGuidePath+urlSplit(a).file;trace("fixPath",a,b);return b}function loadXMLList(a){var b=$(a.data);$(b,"option:first").prepend('<option value="">Choose from this list</option>');$(a.elt).html(b.html()).val(a.val)}
function loadXMLListExternal(a){$.ajax({url:fixPath(a.url),dataType:"text",timeout:15E3,opts:a,error:function(a,c){dialogAlert({title:"Error loading external list",body:"Unable to load a list of items from "+this.url+"\n"+c})},success:function(a){var c=this.opts;c.data=a;loadXMLList(c)}})}
function page2JSON(a){var b={_NAME:a.name,_TYPE:a.type,_STYLE:a.style,_MAPX:a.mapx,_MAPY:a.mapy,_STEP:a.step,_REPEATVAR:a.repeatVar,_NEXTPAGE:""===a.nextPage?gJS2XML_SKIP:a.nextPage,_nextPageDisabled:!0===a.nextPageDisabled?!0:gJS2XML_SKIP,_alignText:""===a.alignText?gJS2XML_SKIP:a.alignText,XML_TEXT:a.text,TEXTAUDIO:a.textAudioURL,XML_LEARN:a.learn,XML_HELP:a.help,HELPAUDIO:a.helpAudioURL,XML_HELPREADER:a.helpReader,HELPIMAGE:a.helpImageURL,HELPVIDEO:a.helpVideoURL,BUTTONS:[],FIELDS:[],XML_CODEBEFORE:a.codeBefore,
XML_CODEAFTER:a.codeAfter,XML_NOTES:a.notes},c;for(c in a.buttons){var d=a.buttons[c];b.BUTTONS.push({BUTTON:{XML_LABEL:d.label,_NEXT:d.next,NAME:d.name,VALUE:d.value}})}for(var e in a.fields)c=a.fields[e],b.FIELDS.push({FIELD:{_TYPE:c.type,_ORDER:c.order,_REQUIRED:c.required,_MIN:c.min,_MAX:c.max,_CALENDAR:!0===c.calendar?!0:gJS2XML_SKIP,_CALCULATOR:!0===c.calculator?!0:gJS2XML_SKIP,_MAXCHARS:c.maxChars,LISTSRC:c.listSrc,XML_LISTDATA:c.listData,XML_LABEL:c.label,NAME:c.name,VALUE:c.value,SAMPLE:c.sample,
XML_INVALIDPROMPT:c.invalidPrompt}});return b}
function exportXML_CAJA_from_CAJA(a){var b={INFO:{AUTHORS:[]},PAGES:[],STEPS:[],VARIABLES:[]};b.INFO.tool=a.tool;b.INFO.toolversion=a.toolversion;b.INFO.avatar=a.avatar;b.INFO.guideGender=a.guideGender;b.INFO.XML_completionTime=a.completionTime;b.INFO.XML_copyrights=a.copyrights;b.INFO.createdate=a.createdate;b.INFO.XML_credits=a.credits;b.INFO.XML_DESCRIPTION=a.description;b.INFO.emailContact=a.emailContact;b.INFO.jurisdiction=a.jurisdiction;b.INFO.language=a.language;b.INFO.modifydate=a.modifydate;
b.INFO.XML_notes=a.notes;b.INFO.sendfeedback=a.sendfeedback;b.INFO.subjectarea=a.subjectarea;b.INFO.title=a.title;b.INFO.version=a.version;b.INFO.viewer=a.viewer;b.INFO.endImage=a.endImage;b.INFO.logoImage=a.logoImage;b.INFO.mobileFriendly=a.mobileFriendly;for(var c in a.authors){var d=a.authors[c];b.INFO.AUTHORS.push({AUTHOR:{NAME:d.name,TITLE:d.title,ORGANIZATION:d.organization,EMAIL:d.email}})}b.INFO.firstPage=a.firstPage;b.INFO.exitPage=a.exitPage;for(var e in a.steps)c=a.steps[e],b.STEPS.push({STEP:{_NUMBER:c.number,
XML_TEXT:c.text}});for(var f in a.vars)e=a.vars[f],b.VARIABLES.push({VARIABLE:{_NAME:e.name,_TYPE:e.type,_REPEATING:!0===e.repeating?e.repeating:gJS2XML_SKIP,_COMMENT:e.comment}});for(var g in a.pages)a.pages.hasOwnProperty(g)&&b.PAGES.push({PAGE:page2JSON(a.pages[g])});return'<?xml version="1.0" encoding="UTF-8" ?>'+js2xml("GUIDE",b)}
function parseXML_CAJA_to_CAJA(a){var b=new TGuide,c=$("INFO",a);b.tool=makestr(c.children("TOOL").text());b.toolversion=makestr(c.children("TOOLVERSION").text());b.avatar=makestr(c.children("AVATAR").text());b.guideGender=makestr(c.children("GUIDEGENDER").text());b.completionTime=makestr(c.children("COMPLETIONTIME").xml());b.copyrights=makestr(c.children("COPYRIGHTS").xml());b.createdate=makestr(c.children("CREATEDATE").text());b.credits=makestr(c.children("CREDITS").xml());b.description=makestr(c.children("DESCRIPTION").xml());
b.jurisdiction=makestr(c.children("JURISDICTION").text());b.language=makestr(c.children("LANGUAGE").text());b.modifydate=makestr(c.children("MODIFYDATE").text());b.notes=makestr(c.children("NOTES").xml());b.sendfeedback=textToBool(c.children("SENDFEEDBACK").text(),!1);b.emailContact=makestr(c.children("EMAILCONTACT").text());b.subjectarea=makestr(c.children("SUBJECTAREA").text());b.title=c.children("TITLE").text();b.version=makestr(c.children("VERSION").text());b.viewer=makestr(c.children("VIEWER").text());
b.logoImage=makestr(c.children("LOGOIMAGE").text());b.endImage=makestr(c.children("ENDIMAGE").text());b.mobileFriendly=c.children("MOBILEFRIENDLY").text();b.authors=[];a.find("AUTHORS > AUTHOR").each(function(){var a=$(this),c=new TAuthor;c.name=a.find("NAME").text();c.title=a.find("TITLE").text();c.organization=a.find("ORGANIZATION").text();c.email=a.find("EMAIL").text();b.authors.push(c)});b.firstPage=makestr(a.find("FIRSTPAGE").text());b.exitPage=makestr(a.find("EXITPAGE").text());a.find("STEP").each(function(){var a=
$(this),c=new TStep;c.number=a.attr("NUMBER");c.text=a.find("TEXT").xml();b.steps.push(c)});a.find("VARIABLES > VARIABLE").each(function(){var a=$(this);b.varCreate(a.attr("NAME"),a.attr("TYPE"),textToBool(a.attr("REPEATING"),!1),makestr(a.attr("COMMENT")))});a.find("CONSTANTS").each(function(){var a=$(this),c=new TConstant;c.name=a.attr("NAME");c.text=a.find("VAL").xml();b.constants[c.name]=c});a.find("PAGES > PAGE").each(function(){var a=$(this),c=b.addUniquePage(a.attr("NAME"));parseXML2Page(a,
c)});return b}function page2XML(a){return'<?xml version="1.0" encoding="UTF-8" ?>'+js2xml("PAGE",page2JSON(a))}function pageFromXML(a){a=$(jQuery.parseXML(a));a=$("PAGE",a);var b=new TPage;parseXML2Page(a,b);return b}
function parseXML2Page(a,b){b.xml=a.xml();b.type=a.attr("TYPE");b.style=makestr(a.attr("STYLE"));b.type===CONST.ptPopup||"Pop-up page"===b.type?(b.type=CONST.ptPopup,b.mapx=null):(b.mapx=parseInt(a.attr("MAPX"),10),b.mapy=parseInt(a.attr("MAPY"),10));b.repeatVar=makestr(a.attr("REPEATVAR"));b.nextPage="";b.nextPageDisabled=!1;b.alignText="";b.step=parseInt(a.attr("STEP"),10);b.text=a.find("TEXT").xml();b.textAudioURL=makestr(a.find("TEXTAUDIO").text());b.learn=makestr(a.find("LEARN").xml());b.help=
makestr(a.find("HELP").xml());b.helpAudioURL=makestr(a.find("HELPAUDIO").text());b.helpReader=makestr(a.find("HELPREADER").xml());b.helpImageURL=makestr(a.find("HELPIMAGE").text());b.helpVideoURL=makestr(a.find("HELPVIDEO").text());b.notes=makestr(a.find("NOTES").xml());b.codeBefore=makestr(a.find("CODEBEFORE").xml());b.codeAfter=makestr(a.find("CODEAFTER").xml());a.find("BUTTONS > BUTTON").each(function(){var a=new TButton;a.label=jQuery.trim($(this).find("LABEL").xml());a.next=makestr($(this).attr("NEXT"));
a.name=jQuery.trim($(this).find("NAME").xml());a.value=jQuery.trim($(this).find("VALUE").xml());b.buttons.push(a)});a.find("FIELDS > FIELD").each(function(){var a=new TField,d=$(this);a.type=d.attr("TYPE");a.required=textToBool(d.attr("REQUIRED"),!0);a.order=makestr(d.attr("ORDER"));a.label=makestr(jQuery.trim(d.find("LABEL").xml()));a.name=jQuery.trim(d.find("NAME").xml());a.value=makestr(jQuery.trim(d.find("VALUE").xml()));a.sample=makestr(jQuery.trim(d.find("SAMPLE").xml()));a.min=makestr(d.attr("MIN"));
a.max=makestr(d.attr("MAX"));a.calendar=textToBool(d.attr("CALENDAR"),!1);a.calculator=textToBool(d.attr("CALCULATOR"),!1);a.invalidPrompt=makestr(jQuery.trim(d.find("INVALIDPROMPT").xml()));a.invalidPromptAudio=makestr(jQuery.trim(d.find("INVALIDPROMPTAUDIO").xml()));a.listSrc=makestr(d.find("LISTSRC").xml());""===a.listSrc&&(a.listData=d.find("LISTDATA").xml());b.fields.push(a)});return b}
function parseXML_Auto_to_CAJA(a){var b;""!==a.find("A2JVERSION").text()?b=parseXML_A2J_to_CAJA(a):""!==a.find("CALIDESCRIPTION").text()?"undefined"!==typeof parseXML_CA_to_CAJA&&(b=parseXML_CA_to_CAJA(a)):b=parseXML_CAJA_to_CAJA(a);b.sortPages();return b}TGuide.prototype.HotDocsAnswerSetXML=function(){this.updateVarsForAnswerFile();var a=CONST.HotDocsANXHeader_UTF8_str,a=a+'<AnswerSet title="">',b=this.vars,c;for(c in b)a+=this.HotDocsAnswerSetVariable(b[c]);a+="</AnswerSet>";trace(a);return a};
TGuide.prototype.HotDocsAnswerSetVariable=function(a){function b(a){d===CONST.vtDate&&(a=mdyTodmy(a));a="undefined"===typeof a||null===a||""===a?"<"+e+' UNANS="true"></'+e+">":"<"+e+">"+htmlEscape(a)+"</"+e+">";d===CONST.vtMC&&(a="<SelValue>"+a+"</SelValue>");return a}var c,d;c=this.variableToField(a.name);d=null===c?a.type:c.fieldTypeToVariableType();c={};c[CONST.vtUnknown]="Unknown";c[CONST.vtText]="TextValue";c[CONST.vtTF]="TFValue";c[CONST.vtMC]="MCValue";c[CONST.vtNumber]="NumValue";c[CONST.vtDate]=
"DateValue";c[CONST.vtOther]="OtherValue";var e=c[d];if(e===CONST.vtUnknown||null===e||"undefined"===typeof e)e=[CONST.vtText];var f="";if(!0===a.repeating){for(c=1;c<a.values.length;c++)f+=b(a.values[c]);f="<RptValue>"+f+"</RptValue>"}else f=b(a.values[1]);return f='<Answer name="'+a.name+'">'+f+"</Answer>"};
TGuide.prototype.updateVarsForAnswerFile=function(){this.varSet("A2J Version",CONST.A2JVersionNum);this.varSet(CONST.bookmarkVarName,gPage.name);this.varSet(CONST.historyVarName,this.historyToXML());this.varSet(CONST.interviewIDVarName,this.makeHash());alert('Hash is "'+this.makeHash()+'"')};TGuide.prototype.makeHash=function(){return(String(this.title)+String(this.jurisdiction)+String(propCount(this.pages))+String(this.description)+String(this.version)+String(this.language)+String(this.notes)).simpleHash()};
TGuide.prototype.HotDocsAnswerSetFromXML=function(a){var b={};b.Unknown=CONST.vtUnknown;b.TextValue=CONST.vtText;b.TFValue=CONST.vtTF;b.MCValue=CONST.vtMC;b.NumValue=CONST.vtNumber;b.DateValue=CONST.vtDate;b.OtherValue=CONST.vtOther;b.RptValue=CONST.vtUnknown;var c=this;$(a).find("AnswerSet > Answer").each(function(){var a=makestr($(this).attr("name"));if(0<=a.indexOf("#"))trace("Discarding invalidly named variable '"+a+"'");else{var e=c.varExists(a),f=!1,g=$(this).children().get(0).tagName,h=b[g];
null===e&&(e=c.varCreate(a,h,!1,""),f=!0);switch(g){case "TextValue":c.varSet(a,$(this).find("TextValue").html());break;case "NumValue":c.varSet(a,$(this).find("NumValue").html());break;case "TFValue":c.varSet(a,$(this).find("TFValue").html());break;case "DateValue":c.varSet(a,$(this).find("DateValue").html());break;case "MCValue":c.varSet(a,$(this).find("MCValue > SelValue").html());break;case "RptValue":e.repeating=!0,$("RptValue",this).children().each(function(e){g=$(this).get(0).tagName;h=b[g];
switch(g){case "TextValue":case "NumValue":case "TFValue":case "DateValue":c.varSet(a,$(this).html(),e+1);break;case "MCValue":c.varSet(a,$(this).find("SelValue").html())}})}e.type===CONST.vtUnknown&&(e.type=h,e.type===CONST.vtUnknown&&(a=a.split(" "),a=a[a.length-1],e.type="MC"==a?CONST.vtMC:"TF"==a?CONST.vtTF:"NU"==a?CONST.vtNumber:CONST.vtText,e.comment+="Type not in answer file, assuming "+e.type));e.trace(f?"Creating new:":"Replacing:")}})};
TGuide.prototype.loadXMLAnswerExternal=function(a){$.ajax({url:fixPath(a.url),dataType:"xml",timeout:15E3,opts:a,error:function(a,c){dialogAlert({title:"Error loading answer file",body:"Unable to load answer file from "+this.url+"\n"+c})},success:function(b){gGuide.HotDocsAnswerSetFromXML($(b));a.success&&a.success()}})};
function loadGuideFile(a,b){if(""===a)$("#splash").empty(),dialogAlert({title:"No guide file specified"});else{var c=urlSplit(a);a=c.path+c.file;gGuidePath=c.path;""!==c.hash&&(b="PAGE "+c.hash);trace(a,c,gGuidePath);loadNewGuidePrep(a,b);window.setTimeout(function(){$.ajax({url:a,dataType:"xml",timeout:45E3,error:function(b,c){$("#splash").empty();dialogAlert({title:"Error occurred loading file",body:"Unable to load XML from "+a+"\n"+c})},success:function(c){c=$(c);gGuide=parseXML_Auto_to_CAJA(c);
gGuide.filename=a;guideStart(b)}})},500)}}
function parseXML_A2J_to_CAJA(a){trace("Converting from A2J Author 4");var b={"I need more information. Please choose one or more checkboxes to continue.":"helpCB","I need more information. You must type an answer in the highlighted box before you can continue.":"helpText","I need more information. You must choose an answer from the highlighted box before you can continue.":"invalidPromptChoose"},c={},d=new TGuide;d.tool="A2J";d.toolversion=makestr(a.find("A2JVERSION").text());d.avatar=makestr(a.find("AVATAR").text());
d.guideGender=makestr(a.find("GUIDEGENDER").text());d.completionTime="";d.copyrights="";d.createdate="";d.credits="";d.description=cr2P(makestr(a.find("DESCRIPTION").xml()));d.jurisdiction=makestr(a.find("JURISDICTION").text());d.language=makestr(a.find("LANGUAGE").text());d.modifydate="";d.notes=cr2P(makestr(a.find("HISTORY").xml()));d.sendfeedback=textToBool(a.find("SENDFEEDBACK").text(),!1);d.emailContact=makestr(a.find("SENDFEEDBACKEMAIL").text());d.subjectarea=d.jurisdiction;d.title=a.find("TITLE").text();
d.version=makestr(a.find("VERSION").text());d.viewer="A2J";d.endImage=a.find("ENDGRAPHIC").text();d.logoImage=a.find("LOGOGRAPHIC").text();d.mobileFriendly="";var e=new TAuthor;e.name=makestr(a.find("AUTHOR").text());d.authors=[e];a.find("STEP").each(function(){var a=$(this),b=new TStep;b.number=a.attr("NUMBER");b.text=a.find("TEXT").xml();d.steps.push(b)});d.templates=makestr(a.find("TEMPLATES").text());a.find("VARIABLE").each(function(){var a=$(this);d.varCreate(a.attr("NAME"),a.attr("TYPE"),textToBool(a.attr("REPEATING"),
!1),makestr(a.find("COMMENT").xml()))});var f=[];a.find("POPUP").each(function(){var a=$(this),b={};b.id=a.attr("ID");b.name=a.attr("NAME");b.text=a.find("TEXT").xml();f[b.id]=b});var g=[],h=function(a){return g[a]?g[a].name:a},j=function(a,b){return b.replace(/\"POPUP:\/\/(\w+)\"/ig,function(b){b=b.match(/\"POPUP:\/\/(\w+)\"/i)[1];b=f[b];b.page=d.addUniquePage(a+" popup");b.page.type="Popup";b.page.text=j(a,b.text);return'"POPUP://'+htmlEscape(b.page.name)+'"'})};a.find("QUESTION").each(function(){var a=
$(this),b=d.addUniquePage(jQuery.trim(a.attr("NAME")));g[a.attr("ID")]=b});d.firstPage=h(makestr(a.find("FIRSTQUESTION").text()));d.exitPage=h(makestr(a.find("EXITQUESTION").text()));a.find("QUESTION").each(function(){var a=$(this),b=g[a.attr("ID")];b.xmla2j=a.xml();b.type="A2J";b.style="";b.step=parseInt(a.attr("STEP"),10);b.mapx=parseInt(0.4*a.attr("MAPX"),10);b.mapy=parseInt(0.3*a.attr("MAPY"),10);b.repeatVar=makestr(a.attr("REPEATVAR"));b.nextPage="";b.nextPageDisabled=!1;b.text=j(b.name,makestr(a.find("TEXT").xml()));
b.textAudioURL=j(b.name,makestr(a.find("TEXTAUDIO").xml()));b.learn=makestr(a.find("LEARN").xml());b.help=j(b.name,makestr(a.find("HELP").xml()));b.helpAudioURL=j(b.name,makestr(a.find("HELPAUDIO").xml()));b.helpReader=makestr(a.find("HELPREADER").xml());b.helpImageURL=makestr(a.find("HELPGRAPHIC").text());b.helpVideoURL=makestr(a.find("HELPVIDEO").text());b.notes=cr2P(makestr(a.find("NOTE").xml()));CONST.showXML&&(b.xml=$(this).xml());b.alignText="";var c=[];a.find("BUTTON").each(function(){var a=
new TButton;a.label=jQuery.trim($(this).find("LABEL").xml());a.next=h(makestr($(this).attr("NEXT")));a.name=jQuery.trim($(this).attr("NAME"));a.value=jQuery.trim($(this).find("VALUE").xml());b.buttons.push(a)});a.find("FIELD").each(function(){var a=new TField;a.type=$(this).attr("TYPE");a.required=!textToBool($(this).attr("OPTIONAL"),!1);a.order=makestr($(this).attr("ORDER"));a.min=makestr($(this).attr("MIN"));a.max=makestr($(this).attr("MAX"));a.calendar=textToBool($(this).attr("CALENDAR"),!1);a.calculator=
textToBool($(this).attr("CALCULATOR"),!1);a.label=makestr(jQuery.trim($(this).find("LABEL").xml()));a.name=jQuery.trim($(this).find("NAME").xml());a.value=makestr(jQuery.trim($(this).find("VALUE").xml()));a.sample=makestr(jQuery.trim($(this).find("SAMPLE").xml()));a.invalidPrompt=makestr(jQuery.trim($(this).find("INVALIDPROMPT").xml()));a.invalidPromptAudio=makestr(jQuery.trim($(this).find("INVALIDPROMPTAUDIO").xml()));a.listSrc=makestr(jQuery.trim($(this).find("LISTSRC").xml()));""===a.listSrc&&
(a.listData=$(this).find("SELECT").xml());b.fields.push(a)});a.find("MACRO").each(function(){var a=new TScript;a.event=jQuery.trim($(this).find("EVENT").xml());var b=gLogic.hds(jQuery.trim($(this).find("CONDITION").xml())),d=jQuery.trim($(this).find("COMMENT").xml());if("Example: set a flag if income too high"===d||null===d||"undefined"===d)d="";var e=[],f=[];$(this).find("STATEMENT").each(function(){var a=jQuery.trim($(this).find("CONDITION").xml()),b=jQuery.trim($(this).find("ACTION").xml()),c;
if(null!==(c=b.match(REG.LOGIC_SET))){var d=c[1].indexOf("="),b=c[1].substr(0,d);c=gLogic.hds(c[1].substr(d+1));""===c&&(c='""');b=""!==b?0<=b.indexOf(" ")?"SET ["+b+"] TO "+c:"SET "+b+" TO "+c:""}else b=null!==(c=b.match(/goto\s+(\w+)\s?/i))?'GOTO "'+htmlEscape(h(c[1]))+'"':"//"+b;""!==b&&("true"===a?e.push(b):f.push(b))});a.code="true"===b.toLowerCase()||"1"===b||"1=1"===b?e.join("\n")+"\n":0===f.length?"IF "+b+" \n "+e.join("\n ")+"\nEND IF\n":0===e.length?"IF NOT ("+b+") \n "+f.join("\n ")+"\nEND IF\n":
"IF  "+b+" \n "+e.join("\n ")+"\nELSE\n "+f.join("\n ")+"\nEND IF\n";d&&(a.code="//"+d+"\n"+a.code);c.push(a)});var a=[],d=[],e;for(e in c){var f=c[e],k=f.code.split("\n");"BEFORE"===f.event?a=a.concat(k):d=d.concat(k)}b.codeBefore=makestr(a.join("<BR/>"));b.codeAfter=makestr(d.concat([]).join("<BR/>"))});for(var k in b)1===c[k]&&(d.constants[b[k]]=k);return parseXML_CAJA_to_CAJA($(jQuery.parseXML(exportXML_CAJA_from_CAJA(d))))}
TGuide.prototype.addUniquePage=function(a,b){for(var c=1,d=a;"undefined"!==typeof this.pages[d];)c++,d=a+" "+c;c=b?b:new TPage;c.name=d;return this.pages[c.name]=c};function versionString(){return"Access to Justice Viewer/Author Version "+CONST.A2JVersionNum+"("+CONST.A2JVersionDate+")"}
var A2JViewer={IMG:"images/",filterVariables:function(){var a=$("#viewer-var-filter").val().toUpperCase();$(".A2JVars tbody tr").each(function(){$(this).toggle(0<=$(this).text().toUpperCase().indexOf(a))})},refreshVariables:function(){var a=$(".varvalpanel"),b=gGuide,c,d=html.rowheading(["Name","Loop","Value"]),e=[],f;for(f in b.vars)if(b.vars.hasOwnProperty(f))if(c=b.vars[f],c.repeating)for(var g=1;g<c.values.length;g++)e.push({name:c.name+"#"+g,v:c,i:g});else e.push({name:c.name,v:c,i:1});e.sort(function(a,
b){return a.name.toLowerCase()>b.name.toLowerCase()});b="";for(f=0;f<e.length;f++){g=e[f];c=g.v;var h=htmlEscape(makestr(c.values[g.i])),b=c.repeating?b+html.row([c.name,"#"+g.i,h]):b+html.row([c.name,"",h])}a.html("").append('<table class="A2JVars">'+d+"<tbody>"+b+"</tbody></table>");$("tr",a).click(function(){});A2JViewer.filterVariables()},fillSample:function(){for(var a=gPage,b=0;b<a.fields.length;b++){var c=a.fields[b],d="FID_"+b,e=c.sample;switch(c.type){case CONST.ftText:case CONST.ftTextLong:case CONST.ftTextPick:case CONST.ftNumber:case CONST.ftNumberDollar:case CONST.ftNumberSSN:case CONST.ftNumberPhone:case CONST.ftNumberZIP:case CONST.ftNumberPick:case CONST.ftDateMDY:$("#"+
d).val(e)}}},history:[],skipHistory:!1,layoutPage:function(a,b){""===a.html()&&(a.html('<div class="interact"></div><div class="a2jbtn"></div> <ul class="NavBar"> <li><button class="navBack">'+lang.GoBack+'</button></li> <li><button class="navNext">'+lang.GoNext+'</button></li> <li><div class="ui-widget">'+lang.MyProgress+': <select  id="history"></select></div></li><li class="right"><button class="navFeedback">Feedback</button></li><li class="right"><button class="navSaveAndExit">Save &amp; Exit</button></li><li class="right"><button class="navResumeExit">Resume</button></li></ul><div class="notice"><div class="copyright"><span class="viewerenv">'+
gEnv+" "+CONST.A2JVersionNum+" ("+CONST.A2JVersionDate+") </span>© 2000-2014 Illinois Institute of Technology - Chicago-Kent College of Law and the Center for Computer-Assisted Legal Instruction</div></div>"),$("div.a2jbtn",a).attr("title",versionString()).click(function(){$(a).toggleClass("test",500)}),$("#viewer-var-form").append('<div><button/><button/><button/><label for="viewer-var-filter">Filter:</label><input type=text id="viewer-var-filter" size="5"/></div><div class=varvalpanel></div></div>'),
$("#viewer-var-form div button").first().button({label:"Save",icons:{primary:"ui-icon-folder-open"}}).click(function(){dialogAlert({title:"Save XML",body:prettyXML(gGuide.HotDocsAnswerSetXML())})}).next().button({label:"Refresh",icons:{primary:"ui-icon-zoomin"}}).click(function(){A2JViewer.refreshVariables()}).next().button({label:"Reload",icons:{primary:"ui-icon-arrowrefresh-1-e"}}),$("#viewer-var-filter").keyup(A2JViewer.filterVariables),$("#history").change(function(){A2JViewer.skipHistory=!0;
gotoPageView($(this).val())}),$("button.navBack",a).button({label:lang.GoBack,icons:{primary:"ui-icon-circle-triangle-w"},disabled:!0}).click(function(){trace("navBack");$("#history").prop("selectedIndex",$("#history").prop("selectedIndex")+1);A2JViewer.skipHistory=!0;gotoPageView($("#history").val())}),$("button.navNext",a).button({label:lang.GoNext,icons:{primary:"ui-icon-circle-triangle-e"},disabled:!0}).click(function(){trace("navNext");$("#history").prop("selectedIndex",$("#history").prop("selectedIndex")-
1);A2JViewer.skipHistory=!0;gotoPageView($("#history").val())}),$("button.navFeedback",a).button({label:lang.SendFeedback,icons:{primary:"ui-icon-comment"},disabled:0}).click(function(){trace("navFeedback")}),$("button.navSaveAndExit",a).button({label:lang.SaveAndExit,icons:{primary:"ui-icon-disk"},disabled:0}).click(function(){trace("navSaveAndExit")}),$("button.navResumeExit",a).button({label:lang.ResumeExit,icons:{primary:"ui-icon-arrowreturnthick-1-w"},disabled:!0}).click(function(){trace("navResumeExit")}),
"undefined"!==typeof authorViewerHook?authorViewerHook():($(".license",a).hide(),$(".copyright",a).click(function(){$(".license").toggle()})));traceLogic("Page "+traceTag("page",b.name));gLogic.GOTOPAGE=null;""!==makestr(b.codeBefore)&&(traceLogic(traceTag("info","Logic Before Question")),gLogic.executeScript(b.codeBefore),traceLogic(traceTag("info","Asking Question")));var c=b.step,d=gLogic.evalLogicHTML(b.text),e=gLogic.evalLogicHTML(b.help);if(!A2JViewer.skipHistory){trace("Save in history");var f=
'<option value="'+b.name.asHTML()+'">'+String(d).stripHTML().ellipsis(40)+"</option>";$("#history").prepend(f).prop("selectedIndex",0)}f=$("#history").children("option").length;$("button.navBack",a).button({disabled:$("#history").prop("selectedIndex")===f-1});$("button.navNext",a).button({disabled:0===$("#history").prop("selectedIndex")});A2JViewer.skipHistory=!1;$(".interact",a).html(A2JViewer.layoutStep(c));$(".ui-form.question",a).html(d+'<div class="form"></div><div class="buttonlist"></div>');
for(c=0;c<b.buttons.length;c++)d=b.buttons[c],$(".ui-form.question  .buttonlist",a).append("<button num="+c+' title="Go to page '+gGuide.pageDisplayName(d.next).asHTML()+'">'+d.label+"</button>");c=$(".ui-form.question .form",a);d=null;""!==b.repeatVar&&(d=gGuide.varGet(b.repeatVar));for(f=0;f<b.fields.length;f++){var g=b.fields[f],h="FID_"+f,j="FID_"+g.name,k=gGuide.varGet(g.name,d),m=gLogic.evalLogicHTML(g.label),m=$("<label/>").attr("for",h).html(m),l=null,n=null;switch(g.type){case CONST.ftText:l=
$("<input type=text class=text id="+h+"></input>").val(k);break;case CONST.ftTextLong:l=$("<textarea type=text class=textarea id="+h+"></textarea>").val(k);break;case CONST.ftTextPick:l=$("<select id="+h+"></select>").val(k);""!==g.listSrc?loadXMLListExternal({elt:l,url:g.listSrc,val:k}):loadXMLList({elt:l,data:"<select>"+g.listData+"</select>",val:k});break;case CONST.ftNumber:l=$("<input type=text class=number id="+h+"></input>").val(k);break;case CONST.ftNumberDollar:l=$("<input type=text class=number id="+
h+"></input>").val(k);break;case CONST.ftNumberSSN:l=$("<input type=text class=number id="+h+"></input>").val(k);break;case CONST.ftNumberPhone:l=$("<input type=text class=number id="+h+"></input>").val(k);break;case CONST.ftNumberZIP:l=$("<input type=text class=number id="+h+"></input>").val(k);break;case CONST.ftNumberPick:l=$("<input type=text id="+h+"></input>").val(k);break;case CONST.ftDateMDY:l=$("<input type=text id="+h+"></input>").val(k);trace(CONST.ftDateMDY,gGuide.language);j={changeMonth:!0,
changeYear:!0};isBlankOrNull(g.min)||(trace("minDate",g.min),j.minDate=g.min);isBlankOrNull(g.max)||(trace("maxDate",g.max),j.maxDate=g.max);$.datepicker.setDefaults($.datepicker.regional[gGuide.language]);j.dateFormat="mm/dd/yyyy";l.datepicker(j);break;case CONST.ftGender:g=h+"M";h+="F";k=gGuide.goodGender(k);l=$("<div/>").append($('<input type=radio id="'+g+'" name="'+j+'"></input>').prop("checked","M"===k)).append($("<label/>").attr("for",g).html(lang.Male)).append("<br/>").append($('<input type=radio id="'+
h+'" name="'+j+'"></input>').prop("checked","F"===k)).append($("<label/>").attr("for",h).html(lang.Female));break;case CONST.ftRadioButton:n=$('<input type=radio id="'+h+'" name="'+j+'"></input>').prop("checked",k===g.value);break;case CONST.ftCheckBox:n=$('<input type=checkbox id="'+h+'"  name="'+j+'"></input>').prop("checked",k);break;case CONST.ftCheckBoxNOTA:n=$('<input type=checkbox id="'+h+'"  name="'+j+'"></input>')}j=$('<div class="field"/>');null!==n?j.append($('<div class="labelinput"/>').append([n,
m])):j.append([$('<div class="label"/>').append(m),$('<div class="input"/>').append(l)]);c.append(j)}$(".ui-form.learnmore",a).html(e+'<div class="buttonlist"><button>Close</button></div>').parent().hide().filter(function(){return""!==e}).fadeIn(1E3);400<$(".question.ui-form",a).height()&&$(".question.bubble",a).css({top:50});$(".ui-form.learnmore button",a).button().click(function(){$(".A2JViewer .learnmore.bubble").hide()});$(".ui-form.question button",a).button().click(function(){var a=null;""!==
b.repeatVar&&(a=gGuide.varGet(b.repeatVar));for(var c=0;c<b.fields.length;c++){var d=b.fields[c],e="FID_"+c;switch(d.type){case CONST.ftText:case CONST.ftTextLong:case CONST.ftNumber:case CONST.ftNumberDollar:case CONST.ftNumberSSN:case CONST.ftNumberPhone:case CONST.ftNumberZIP:case CONST.ftDateMDY:gGuide.varSet(d.name,$("#"+e).val(),a);break;case CONST.ftTextPick:gGuide.varSet(d.name,$("#"+e).val(),a);break;case CONST.ftNumberPick:gGuide.varSet(d.name,$("#"+e).val(),a);break;case CONST.ftGender:$("#"+
e+"M").is(":checked")&&gGuide.varSet(d.name,lang.Male,a);$("#"+e+"F").is(":checked")&&gGuide.varSet(d.name,lang.Female,a);break;case CONST.ftRadioButton:$("#"+e).is(":checked")&&gGuide.varSet(d.name,d.value,a);break;case CONST.ftCheckBox:gGuide.varSet(d.name,$("#"+e).is(":checked"),a)}}c=parseInt($(this).attr("num"),10);c=b.buttons[c];traceLogic("You pressed "+traceTag("ui",c.label));trace("ButtonPress",c.label,c.name,c.value);""!==c.name&&gGuide.varSet(c.name,c.value,a);gLogic.GOTOPAGE=c.next;gLogic.executeScript(b.codeAfter);
gotoPageView(c.next)})},layoutStep:function(a){function b(a,b,c,e,f){void 0!==typeof e&&(e=" width="+e);void 0!==typeof f&&(f=" height="+f);return'<img src="'+d+a+'" '+e+f+' style="position:absolute; left:'+b+"px; top:"+c+'px;">'}var c=gGuide.steps,d=A2JViewer.IMG,e=[{ground:"step1.png",ch:[322,5,550,350],gl:[351,204],gf:[451,200],cr:[523,198],steps:[[288,430,432,131]],signs:[[629,277,1]]},{ground:"step7.png",ch:[579,66,143,61],gl:[351,204],gf:[451,200],cr:[523,198],steps:[[288,430,432,131],[448,
236,197,24]],signs:[[619,438,1],[550,200,0.6]]}],e=1>=c.length-a?e[0]:e[1],f=b(e.ground,0,0)+b("A2J5_CourtHouse.png",e.ch[0],e.ch[1],e.ch[2],e.ch[3]),g;for(g=0;g<e.steps.length;g++)var h=a+g,j=e.steps[g],k=0===h?0:(h-1)%4+1,f=f+b("step_circle_"+k+".png",j[0],j[1],j[2],j[3]),j=e.signs[g],m=j[2],m="-moz-transform: scale("+m+");",f=f+('<div class="stepsign" style="position:absolute; left:'+j[0]+"px; top: "+j[1]+"px;"+m+'"><div class="stepsigncolor Step'+k+'" ></div>\t<div class="stepnumber" >'+c[h].number+
'</div><table class="steptextdiv"><tr valign=true><td><span class="steptext">'+c[h].text+"</span></tr></tr></table></div>");a=gGuide.guideGender;a="Male"===a?"M":"F";c=gGuide.getClientGender();g=gGuide.varGet("User Avatar");"undefined"===typeof g&&(g=gGuide.avatar);g="tan"===g?1:"blank"===g||""===g?0:"tan2"===g?2:parseInt(g,10);""!==c?(h=e.gl[0]-300,f+=b("A2JAvatar-Guide-"+a+g+".png",e.gl[0],e.gl[1])+b("A2JAvatar-Client-"+c+g+".png",e.cr[0],e.cr[1])):(h=e.gf[0]-300,f+=b("A2JAvatar-Guide-Front-"+a+
g+".png",e.gf[0],e.gf[1]));return'<div class="step" >'+(f+('<div class="question bubble" style="position:absolute; left:'+h+'px; top: 140px; width: 300px; "><div class="question ui-form"></div></div><img style="position:absolute; left: '+(h+299)+'px; top: 240px; " src="'+d+'guide_bubble_tip.png"   />'))+'<div class="learnmore bubble" style="position:absolute; left:604px; top: 93px; width: 285px;"><div class="ui-form learnmore"><div class="buttonlist"><button>Close</button></div></div></div></div>'}};function ParseError(a,b,c){this.line=a;this.type=b;this.text=c;return this}function TLogic(){this.showCAJAScript=0;this.tracerID="#tracer";this.userFunctions=[];this.indent=0;this.GOTOPAGE=null;return this}TLogic.prototype.pageExists=function(a){return null!==gGuide.pages[a]};TLogic.prototype.pageFindReferences=function(a,b){var c={add:!1},d=a.split(CONST.ScriptLineBreak),e;for(e=0;e<d.length;e++){var f;if(null!==(f=jQuery.trim(d[e]).split("//")[0].match(REG.LOGIC_GOTO))&&f[1]===b)c.add=!0}return c};
TLogic.prototype.evalLogicHTML=function(a){var b=a.split("%%");if(0<b.length){a="";var c;for(c=0;c<b.length;c+=2)a+=b[c],c<b.length-1&&(a+=this.evalBlock(b[c+1]))}return a};
TLogic.prototype.translateCAJAtoJS=function(a){var b=[],c=[];a=a.split(CONST.ScriptLineBreak);var d=0,e;for(e=0;e<a.length;e++){var f=jQuery.trim(decodeEntities(a[e])).split("//")[0],g;if(""!==f){if(null!==(g=f.match(REG.LOGIC_SETTO))){var h=g[1],h=h.replace(/\[|\]/gi,""),h=h.split("#");g=1===h.length?"_VS("+jquote(f)+',"'+h[0]+'",0,'+this.translateCAJAtoJSExpression(g[3],e,b)+");":"_VS("+jquote(f)+',"'+h[0]+'",'+this.translateCAJAtoJSExpression(h[1],e,b)+","+this.translateCAJAtoJSExpression(g[3],
e,b)+");"}else null!==(g=f.match(REG.LOGIC_GOTO2))?(g=g[1],'"'===g.substr(0,1)&&'"'===g.substr(-1,1)&&(h=g.substr(1,g.length-2),this.pageExists(h)||b.push(new ParseError(e,"",lang.scriptErrorMissingPage.printf(h)))),g="_GO("+jquote(f)+","+g+");return;"):null!==f.match(REG.LOGIC_PRINT)?g="":null!==(g=f.match(REG.LOGIC_IF))?(d++,3===this.showCAJAScript&&(f=""),g="if (_IF("+d+","+jquote(g[1])+","+this.translateCAJAtoJSExpression(g[1],e,b)+")){"):null!==(g=f.match(REG.LOGIC_ELSEIF))?(3===this.showCAJAScript&&
(f=""),g="} else if (_IF("+d+","+jquote(g[1])+","+this.translateCAJAtoJSExpression(g[1],e,b)+")){"):null!==f.match(/^end if/i)?(3===this.showCAJAScript&&(f=""),d--,g="};_ENDIF("+d+");"):null!==f.match(/^else/i)?(3===this.showCAJAScript&&(f=""),g="}else{"):null!==f.match(/deltavars/i)?g="_deltaVars("+jquote(f)+");":(g="_CAJA("+jquote(f)+");",b.push(new ParseError(e,"",lang.scriptErrorUnhandled.printf(f))));switch(this.showCAJAScript){case 0:c.push(g);break;case 1:c.push(g+" //CAJA: "+f);break;case 2:c.push("",
"//CAJA: "+f,g);break;default:c.push("","",g)}}}0<d&&b.push(new ParseError(e,"",lang.scriptErrorEndMissing.printf()));return{js:c,errors:b}};TLogic.prototype.evalBlock=function(a){var b="",c=[],d=this.translateCAJAtoJSExpression(a,1,c);if(0===c.length)try{b=(new Function("with (gLogic) { return ("+d+")}"))()}catch(e){b='<span class="code">'+a+'</span><span class="err">'+e.message+"</span>"}else b='<span class="code">'+a+'</span><span class="err">syntax error</span>';return b};
TLogic.prototype.hds=function(a){return a};
TLogic.prototype.translateCAJAtoJSExpression=function(a,b,c){a=(" "+a+" ").split('"');var d;for(d=0;d<a.length;d+=2){var e=a[d],e=e.replace(/\[([\w|\s|\-]+)\]/gi,'$$1("$1")'),e=e.replace(/\[([\w|\s|\-]+)#([\d]+)\]/gi,'$$1("$1",$2)'),e=e.replace(/\[([\w|\s|\-]+)#([\w|\s|\-]+)\]/gi,'$$1("$1",$$1("$2"))'),e=e.replace(/#([\d|\/]+)#/gi,'$$2("$1")');a[d]=e}a=a.join('"').split('"');var f=function(a){return a.replace(",","")};for(d=0;d<a.length;d+=2)e=a[d],e=e.replace(/(\d[\d|\,]+)/gi,f),e=e.replace(/\band\b/gi,
"&&"),e=e.replace(/\bor\b/gi,"||"),e=e.replace(/\bnot\b/gi,"!"),e=e.replace(/\=/gi,"=="),e=e.replace(/\>\=\=/gi,">="),e=e.replace(REG.LOGIC_LE,"<="),e=e.replace(REG.LOGIC_NE,"!="),e=e.replace(/\bis\b/gi,"=="),e=e.replace(/\btrue\b/gi,"1"),e=e.replace(/\bfalse\b/gi,"0"),e=e.replace(/([A-Za-z_][\w]*)(\s*)(\()/gi,'$$3("$1",'),a[d]=e;a=a.join('"').split('"');for(d=0;d<a.length;d+=2)e=a[d],e=e.replace(/([A-Za-z_][\w]*)/gi,'$$1("$1")'),a[d]=e;a=a.join('"').split('"');for(d=0;d<a.length;d+=2)e=a[d],e=e.replace(/\$1/,
"_VG").replace(/\$2/,"_ED").replace(/\$3/,"_CF"),a[d]=e;a=a.join('"');try{new Function(a)}catch(g){"missing ; before statement"===g.message&&(g.message="syntax error"),c.push(new ParseError(b,"",g.message))}return a};TLogic.prototype.addUserFunction=function(a,b,c){this.userFunctions.push({name:a,numArgs:b,func:c})};TLogic.prototype.trace=function(a){$(this.tracerID).append('<li style="text-indent:'+this.indent+'em">'+a+"</li>");trace(String(a).stripHTML())};
TLogic.prototype._CAJA=function(a){this.trace(traceTag("code",a))};TLogic.prototype._IF=function(a,b,c){!0===c?this.trace("IF "+traceTag("valT",b)+" ✔"):this.trace("<strike>IF "+traceTag("valF",b)+"</strike>");this.indent=a;return!0===c};TLogic.prototype._ENDIF=function(a){this.indent=a};TLogic.prototype._VS=function(a,b,c,d){this.trace(a);return gGuide.varSet(b,d,c)};TLogic.prototype._VG=function(a,b){return gGuide.varGet(a,b)};TLogic.prototype._CF=function(a){this.trace("Call function "+a);return 0};
TLogic.prototype._ED=function(a){return Date.parse(a)};TLogic.prototype._GO=function(a,b){this.GOTOPAGE=b;this.trace(a)};TLogic.prototype._deltaVars=function(){};
TLogic.prototype.executeScript=function(a){if("undefined"===typeof a)return!0;this.indent=0;var b=this.translateCAJAtoJS(a);if(0===b.errors.length){b="with (gLogic) {"+b.js.join("\n")+"}";try{(new Function(b))()}catch(c){return this.trace("executeScript.error: "+c.lineNumber+": "+c.message),trace(a),trace(b),!1}}else return this.trace("executeScript.error: syntax error in logic"),!1;this.indent=0;return!0};var gLogic=new TLogic;gLogic.addUserFunction("Number",1,function(a){return parseFloat(a)});
gLogic.addUserFunction("String",1,function(a){return String(a)});gLogic.addUserFunction("HisHer",1,function(a){return"male"===a?"his":"her"});gLogic.addUserFunction("HimHer",1,function(a){return"male"===a?"him":"her"});gLogic.addUserFunction("HeShe",1,function(a){return"male"===a?"he":"she"});
$.formatNumber&&(gLogic.addUserFunction("Dollar",1,function(a){return $.formatNumber(a,{format:"#,###.00",locale:"us"})}),gLogic.addUserFunction("DollarRound",1,function(a){return $.formatNumber(Math.round(a),{format:"#,##0",locale:"us"})}));gLogic.addUserFunction("dateMDY",1,function(a){var b=new Date;b.setTime(864E5*a);return b.getMonth()+1+"/"+b.getDate()+"/"+b.getFullYear()});function traceLogic(a){gLogic.trace(a)};function setProgress(a){null===a&&(a="");trace("setProgress",a)}
function guideStart(a){0===a.indexOf("PAGE ")&&(a=a.substr(5));Languages.set(Languages.defaultLanguage);var b=gGuide;traceLogic("Guide "+b.title+" loaded.");traceLogic("#Pages: "+propCount(b.pages)+", #Variables:"+propCount(b.vars));""===String(a)&&(a=b.firstPage);traceLogic("Starting on page "+traceTag("page",a));gotoPageView(a);$("#page-viewer").removeClass("hidestart");$("#splash").empty();CONST.devShowTesting&&$(".A2JViewer").toggleClass("test",500)}function loadNewGuidePrep(){}
function gotoPageView(a){window.setTimeout(function(){var b=gGuide.pages[a];"undefined"===typeof b?(dialogAlert("Page is missing: "+a),traceLogic("Page is missing: "+traceTag("page",a))):(gPage=b,A2JViewer.layoutPage($("#page-viewer .A2JViewer"),gPage))},1)}function main(){loadGuideFile(gStartArgs.templateURL,"")};
