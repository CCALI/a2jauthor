<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
	CALI Author 5 / A2J Author 5 (CAJA) 正义 * công lý * правосудие
	All Contents Copyright The Center for Computer-Assisted Legal Instruction
	
	Notes:
		04/03/2015 CKEditor with floating option is problemative or requires newer jQuery than A2J5 is using
	
-->
<HTML xmlns="http://www.w3.org/1999/xhtml">
<title>CKEditor UI Tests</title>
<link href="../viewer/viewer.jquery-ui.css" rel="stylesheet" type="text/css" />
<link href="../viewer/jquery-ui.extra.css"  rel="stylesheet" type="text/css" title="style" />
<link href="../viewer/A2J_Viewer.css" rel="stylesheet" type="text/css" />
<script src="../viewer/jquery.1.8.2.min.js" type="text/javascript"></script>
<script src="../viewer/jquery.ui.1.9.1.min.js" type="text/javascript"></script>

<xscript src="http://cdn.ckeditor.com/4.4.7/standard/ckeditor.js"></script>
<script src="../../../../js/editors/ckeditor/ckeditor.js"></script>
<script src="http://cdn.ckeditor.com/4.4.7/standard/adapters/jquery.js"></script>



<style type="text/css">
<!--
body,div {
	background-color: #111;
	color:#fff;
	margin: 10px;
}
.cke_editable {
	background-color: #333;
}
div {
	pading: 2em;
	border: ridge;
}
-->
</style>


<script type='text/javascript'>  
// 2014-07-21 Testing CKEditor Dynamic edit areas
function load()
{
	$('.questions').empty();
	for (var q=1;q<= 25 ;q++)
	{
	//editor question cke_editable cke_editable_inline cke_contents_ltr cke_show_borders
		$('.questions').append(
				  '<fieldset><legend>Question '+q + '</legend>'
					 +'<div contentEditable=true class="editor question  " name="Q'+q+'"><p>Question content for question '+q+'. </p></div>'
					  +'<div contentEditable=true class="editor help  " name="QH'+q+'"><p>Help content for question  '+q+'</p></div>'
				  +'</fieldset>');
		}
	//CKEDITOR.inlineAll(); // 04/03/2015 super slow when FireBug active.
	
	// Turn off automatic editor creation first.
	CKEDITOR.disableAutoInline = true;

	// Attach as user clicks is faster.
	$( '.editor' ).click(function(){
		if (!$(this).hasClass('cke_editable')) {
			//$(this).ckeditor();
			console.log(CKEDITOR.inline( this ));
		}
	})
}

function ready()
{
	if ( 1 ) {
	CKEDITOR.config.toolbar = [
    { name: 'basicstyles', items: [ 'Bold', 'Italic' ] },
	 { name: 'links', items: [ 'Link', 'Unlink'  ] },
	 { name: 'paragraph', groups: [ 'list', 'indent', 'blocks'  ], items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote'] },
    { name: 'clipboard', items: [ 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo' ] }
	];
	}
	
	$('#save').button({label:'Save'}).click(function()
	{
		$('.editor').each(function(){
			if ($(this).hasClass('cke_editable')) {
				console.log($(this).html());
				/*
				var editor = $(this).ckeditor().editor;
				if (editor.checkDirty()) {
					console.log('Editor for '+$(this).attr('name')+' edited');
					console.log('Data: '+ editor.getData());
			}*/

			}
		})
		
	});
	
	$('#load').button({label:'Load'}).click(load);

	//load();
}


$(document).ready(ready);
</script>

 
<BODY>
	<div class="a2jv">
	<button id="load" />
	<button id="save" />
	</div>
<div class="questions">
 questions

</div>
</BODY>
</HTML>
